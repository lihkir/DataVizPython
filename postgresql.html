

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Introducción a PostreSQL y Docker &#8212; Visualización de Datos con Python y R</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'postgresql';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Introducción a Dash" href="dash_dataviz.html" />
    <link rel="prev" title="Predicción de series de tiempo" href="predictive_model.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
    
    
      
    
    
    <img src="_static/logo_uninorte.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="_static/logo_uninorte.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    <no title>
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="dataviz_intro.html">Introducción a la visualización de datos con Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="static_dataviz.html">Visualización estática</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive_dataviz.html">De la visualización estática a la interactiva</a></li>
<li class="toctree-l1"><a class="reference internal" href="stratified_dataviz.html">Visualización de datos a través de estratos</a></li>
<li class="toctree-l1"><a class="reference internal" href="geo_dataviz.html">Visualización interactiva de datos geográficos</a></li>
<li class="toctree-l1"><a class="reference internal" href="common_errors.html">Errores comunes al crear visualizaciones interactivas</a></li>

<li class="toctree-l1"><a class="reference internal" href="predictive_model.html">Predicción de series de tiempo</a></li>

<li class="toctree-l1 current active"><a class="current reference internal" href="#">Introducción a PostreSQL y Docker</a></li>




<li class="toctree-l1"><a class="reference internal" href="dash_dataviz.html">Introducción a <code class="docutils literal notranslate"><span class="pre">Dash</span></code></a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fpostgresql.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/postgresql.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Introducción a PostreSQL y Docker</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Introducción a PostreSQL y Docker</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#herramienta-de-administracion-de-bases-de-datos-dbeaver">Herramienta de administración de bases de datos: DBeaver</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instalacion-y-uso-de-docker">Instalación y uso de Docker</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#despliegue-de-base-de-datos-en-railway">Despliegue de Base de Datos en Railway</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#introduccion-a-consultas-sql">Introducción a consultas <code class="docutils literal notranslate"><span class="pre">SQL</span></code></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#restauracion-de-bases-de-datos-dvdrental">Restauración de bases de datos <code class="docutils literal notranslate"><span class="pre">dvdrental</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#consultas-sql">Consultas SQL</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#select">SELECT</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#alias">Alias</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#order-by">ORDER BY</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#select-distinct">SELECT DISTINCT</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#where">WHERE</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#configuracion-de-su-entorno-usando-python-jupyterlab-y-vs-code">Configuración de su entorno usando Python, JupyterLab y VS Code</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#python-api-for-postgresql">Python API for PostgreSQL</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#importar-un-archivo-csv-o-un-pandas-dataframe-en-sqlite">Importar un archivo CSV o un pandas DataFrame en SQLite</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ejercicio-para-entregar">Ejercicio para entregar</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="introduccion-a-postresql-y-docker">
<h1>Introducción a PostreSQL y Docker<a class="headerlink" href="#introduccion-a-postresql-y-docker" title="Permalink to this heading">#</a></h1>
<section id="herramienta-de-administracion-de-bases-de-datos-dbeaver">
<h2>Herramienta de administración de bases de datos: DBeaver<a class="headerlink" href="#herramienta-de-administracion-de-bases-de-datos-dbeaver" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DBeaver</span></code> es una herramienta de base de datos multiplataforma gratuita para desarrolladores, administradores de bases de datos, analistas y todas las personas que necesiten trabajar con bases de datos. Soporta todas las bases de datos populares:<code class="docutils literal notranslate"> <span class="pre">MySQL,</span> <span class="pre">PostgreSQL,</span> <span class="pre">SQLite,</span> <span class="pre">Oracle,</span> <span class="pre">DB2,</span> <span class="pre">SQL</span> <span class="pre">Server,</span> <span class="pre">Sybase,</span> <span class="pre">MS</span> <span class="pre">Access,</span> <span class="pre">Teradata,</span> <span class="pre">Firebird,</span> <span class="pre">Apache</span> <span class="pre">Hive,</span> <span class="pre">Phoenix,</span> <span class="pre">Presto</span></code>, etc.</p></li>
<li><p>Para instalar <code class="docutils literal notranslate"><span class="pre">DBeaver</span></code> usar el instalador correspondiente del siguiente link: <a class="reference external" href="https://dbeaver.io/download/">(ver DBeaver)</a>. Para el caso de Windows el instalador a descargar aparece en la siguiente imagen:</p></li>
</ul>
<figure class="align-center" id="dbeaver-installer-fig">
<a class="reference internal image-reference" href="_images/dbeaver_installer.png"><img alt="_images/dbeaver_installer.png" src="_images/dbeaver_installer.png" style="width: 613.5px; height: 442.5px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3 </span><span class="caption-text">Instalador de <code class="docutils literal notranslate"><span class="pre">DBeaver</span></code> para <code class="docutils literal notranslate"><span class="pre">Windows</span></code> y <code class="docutils literal notranslate"><span class="pre">Mac</span></code>.</span><a class="headerlink" href="#dbeaver-installer-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Siga los pasos de instalación. Procederemos ahora ahora con la instalación de <code class="docutils literal notranslate"><span class="pre">Docker</span></code> y luego retomaremos el uso de <code class="docutils literal notranslate"><span class="pre">DBeaver</span></code> para administrar la base de datos a crear.</p></li>
</ul>
</section>
<section id="instalacion-y-uso-de-docker">
<h2>Instalación y uso de Docker<a class="headerlink" href="#instalacion-y-uso-de-docker" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Docker</span></code> es una plataforma de software que le permite <code class="docutils literal notranslate"><span class="pre">crear,</span> <span class="pre">probar</span> <span class="pre">e</span> <span class="pre">implementar</span> <span class="pre">aplicaciones</span> <span class="pre">rápidamente</span></code>. <code class="docutils literal notranslate"><span class="pre">Docker</span></code> empaqueta software en unidades estandarizadas llamadas <code class="docutils literal notranslate"><span class="pre">contenedores</span></code> que incluyen todo lo necesario para que el software se ejecute, incluidas bibliotecas, herramientas de sistema, código y tiempo de ejecución. Con <code class="docutils literal notranslate"><span class="pre">Docker</span></code>, puede implementar y ajustar la escala de aplicaciones rápidamente en cualquier entorno con la certeza de saber que su código se ejecutará.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Docker</span></code> le proporciona una manera estándar de ejecutar su código. <code class="docutils literal notranslate"><span class="pre">Docker</span></code> es un <code class="docutils literal notranslate"><span class="pre">sistema</span> <span class="pre">operativo</span> <span class="pre">para</span> <span class="pre">contenedores</span></code>. De manera similar a cómo una <code class="docutils literal notranslate"><span class="pre">máquina</span> <span class="pre">virtual</span> <span class="pre">virtualiza</span></code> (elimina la necesidad de administrar directamente) el hardware del servidor, <code class="docutils literal notranslate"><span class="pre">los</span> <span class="pre">contenedores</span> <span class="pre">virtualizan</span> <span class="pre">el</span> <span class="pre">sistema</span> <span class="pre">operativo</span> <span class="pre">de</span> <span class="pre">un</span> <span class="pre">servidor</span></code>. <code class="docutils literal notranslate"><span class="pre">Docker</span></code> se instala en cada servidor y proporciona comandos sencillos que puede utilizar para crear, iniciar o detener contenedores. Para instalar <code class="docutils literal notranslate"><span class="pre">Docker</span></code> use el siguiente link (<a class="reference external" href="https://docs.docker.com/get-docker/">ver Docker Installer</a>). <code class="docutils literal notranslate"><span class="pre">Tenga</span> <span class="pre">en</span> <span class="pre">cuenta</span> <span class="pre">que</span> <span class="pre">debe</span> <span class="pre">instalar</span> <span class="pre">Docker</span> <span class="pre">como</span> <span class="pre">administrador</span></code>.</p></li>
</ul>
<figure class="align-center" id="docker-installer-fig">
<a class="reference internal image-reference" href="_images/docker_installer.png"><img alt="_images/docker_installer.png" src="_images/docker_installer.png" style="width: 663.25px; height: 245.7px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 4 </span><span class="caption-text">Instalador de <code class="docutils literal notranslate"><span class="pre">Docker</span></code> para <code class="docutils literal notranslate"><span class="pre">Windows</span></code>, <code class="docutils literal notranslate"><span class="pre">Mac</span></code> y <code class="docutils literal notranslate"><span class="pre">Linux</span></code>.</span><a class="headerlink" href="#docker-installer-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Luego de instalar <code class="docutils literal notranslate"><span class="pre">Docker</span></code>, puede iniciar la aplicación, ejecutando <code class="docutils literal notranslate"><span class="pre">Docker</span> <span class="pre">Desktop</span></code>, el cual mantendrá ejecutando un proceso de virtualización. La siguiente será la interfaz gráfica que visualizará al ejecutar <code class="docutils literal notranslate"><span class="pre">Docker</span></code></p></li>
</ul>
<figure class="align-center" id="docker-desktop-fig">
<a class="reference internal image-reference" href="_images/docker_desktop.png"><img alt="_images/docker_desktop.png" src="_images/docker_desktop.png" style="width: 672.0px; height: 356.65px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 5 </span><span class="caption-text">Aplicación <code class="docutils literal notranslate"><span class="pre">Docker</span> <span class="pre">Desktop</span></code> para Windows.</span><a class="headerlink" href="#docker-desktop-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Inicialmente utilizaremos <code class="docutils literal notranslate"><span class="pre">Docker</span></code> desde consola. Para esto abrimos una terminal de <code class="docutils literal notranslate"><span class="pre">Windows</span> <span class="pre">PowerShell</span></code> usando el comando <code class="docutils literal notranslate"><span class="pre">Window</span> <span class="pre">+</span> <span class="pre">R</span></code> o directamente desde su terminal buscando el logo de <code class="docutils literal notranslate"><span class="pre">Windows</span> <span class="pre">PowerShell</span></code>. Luego de esto vamos a <code class="docutils literal notranslate"><span class="pre">descargar</span> <span class="pre">el</span> <span class="pre">contenedor</span> <span class="pre">de</span> <span class="pre">PostgreSQL</span></code> utilizando el comando siguiente (ver <a class="reference external" href="https://hub.docker.com/_/postgres">Docker PostgreSQL</a>). Nótese que el contenedor de <code class="docutils literal notranslate"><span class="pre">Docker</span></code> para <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> se llama <code class="docutils literal notranslate"><span class="pre">postgres</span></code>.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>pull<span class="w"> </span>postgres
</pre></div>
</div>
<ul class="simple">
<li><p>Si desea eliminar la imagen <code class="docutils literal notranslate"><span class="pre">postgres</span></code> de docker, puede usar el comando</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">rmi</span> <span class="n">postgres</span>
</pre></div>
</div>
<ul class="simple">
<li><p>En <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">hub</span></code> (ver <a class="reference external" href="https://hub.docker.com/">Docker Hub</a>) podrás encontrar otro tipo de contenedores, por ejemplo para: <code class="docutils literal notranslate"><span class="pre">Engines,</span> <span class="pre">Apache,</span> <span class="pre">Java,</span> <span class="pre">C#,</span> <span class="pre">Python,</span> <span class="pre">Go</span></code>, etc,….</p></li>
</ul>
<figure class="align-center" id="docker-pullpostgres-fig">
<a class="reference internal image-reference" href="_images/docker_pullpostgres.png"><img alt="_images/docker_pullpostgres.png" src="_images/docker_pullpostgres.png" style="width: 672.0px; height: 230.29999999999998px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 6 </span><span class="caption-text">Consola <code class="docutils literal notranslate"><span class="pre">Windows</span> <span class="pre">PowerShell</span></code> para ejecutar el cliente de <code class="docutils literal notranslate"><span class="pre">Docker</span></code>.</span><a class="headerlink" href="#docker-pullpostgres-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>El procedimiento anterior se encargará de descargar la última versión de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> en nuestro computador (<code class="docutils literal notranslate"><span class="pre">imagen</span> <span class="pre">de</span> <span class="pre">Docker</span></code>). Este es solo un proceso de instalación, el cual nos <code class="docutils literal notranslate"><span class="pre">permitirá</span> <span class="pre">posteriormente,</span> <span class="pre">ejecutar</span> <span class="pre">múltiples</span> <span class="pre">instancias</span> <span class="pre">del</span> <span class="pre">contenedor</span> <span class="pre">para</span> <span class="pre">bases</span> <span class="pre">de</span> <span class="pre">datos</span></code>.</p></li>
</ul>
<ul class="simple">
<li><p>Para crear una base de datos vamos a necesitar como <code class="docutils literal notranslate"><span class="pre">mínimo</span> <span class="pre">una</span> <span class="pre">contraseña</span></code> para inicializarla, para esto debemos usar el flag: <code class="docutils literal notranslate"><span class="pre">POSTGRES_PASSWORD</span></code>. Podemos también asignarle un usuario a la base de datos, en caso de no hacerlo, el usuario por defecto creado por <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> será <code class="docutils literal notranslate"><span class="pre">postgres</span></code>. Para proceder entonces utilizamos el siguiente comando:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-e<span class="w"> </span><span class="nv">POSTGRES_PASSWORD</span><span class="o">=</span>password<span class="w"> </span>postgres
</pre></div>
</div>
<ul class="simple">
<li><p>El comando <code class="docutils literal notranslate"><span class="pre">run</span></code> ejecutará una instancia para nuestra nueva base de datos. El flag <code class="docutils literal notranslate"><span class="pre">e</span></code> es utilizado para agregar variables de entorno (ver <a class="reference external" href="https://hub.docker.com/_/postgres">Docker PostgreSQL</a>). En este caso, vamos a utilizar la variable <code class="docutils literal notranslate"><span class="pre">POSTGRES_PASSWORD</span></code> y asignaremos a esta la contraseña deseada, en este caso, a manera de ejemplo, utilizaremos <code class="docutils literal notranslate"><span class="pre">password</span></code> como contraseña. Al final de la instancia, podrá observar un mensaje indicando que el sistema ya esta listo para aceptar conexiones. <code class="docutils literal notranslate"><span class="pre">Esta</span> <span class="pre">ventana</span> <span class="pre">la</span> <span class="pre">debemos</span> <span class="pre">de</span> <span class="pre">dejar</span> <span class="pre">ejecutándose</span></code>.</p></li>
</ul>
<figure class="align-center" id="docker-rundatabase-fig">
<a class="reference internal image-reference" href="_images/docker_rundatabase.png"><img alt="_images/docker_rundatabase.png" src="_images/docker_rundatabase.png" style="width: 672.0px; height: 205.79999999999998px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 7 </span><span class="caption-text">Creación de instancia para la base de datos <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code>.</span><a class="headerlink" href="#docker-rundatabase-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>En <code class="docutils literal notranslate"><span class="pre">Docker</span> <span class="pre">Desktop</span></code> podrá visualizar la instancia de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> que el contenedor ha creado, la cual tiene un nombre que generó de forma aleatoria.</p></li>
</ul>
<figure class="align-center" id="instancia-postgresdesktop">
<a class="reference internal image-reference" href="_images/instancia_postgresdesktop.png"><img alt="_images/instancia_postgresdesktop.png" src="_images/instancia_postgresdesktop.png" style="width: 672.0px; height: 159.95px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 8 </span><span class="caption-text">Instancia de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> con nombre random visualizada en <code class="docutils literal notranslate"><span class="pre">Docker</span> <span class="pre">Desktop</span></code>.</span><a class="headerlink" href="#instancia-postgresdesktop" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>El siguiente paso es conectarnos a la instancia de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> creada por el contenedor. Para esto abrimos una nueva consola de <code class="docutils literal notranslate"><span class="pre">Windows</span> <span class="pre">PowerShell</span></code> para conectarnos al contenedor que se está ejecutando. Antes, verificamos cual es el nombre del contenedor (<em>adjetivo+nombre aleatorio</em>) creado desde la consola o de <code class="docutils literal notranslate"><span class="pre">Docker</span> <span class="pre">Desktop</span></code></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>ps
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">ps</span></code> nos mostrará en consola los <code class="docutils literal notranslate"><span class="pre">procesos</span> <span class="pre">que</span> <span class="pre">está</span> <span class="pre">ejecutando</span> <span class="pre">nuestro</span> <span class="pre">contenedor</span></code>. En este caso nos aparece el único contenedor creado hasta el momento, cuyo nombre es: <code class="docutils literal notranslate"><span class="pre">vigilant_grothendieck</span></code>. Este nombre puede ser cambiado utilizando las variables de entorno.</p></li>
</ul>
<figure class="align-center" id="docker-ps-fig">
<a class="reference internal image-reference" href="_images/docker_ps.png"><img alt="_images/docker_ps.png" src="_images/docker_ps.png" style="width: 672.0px; height: 97.3px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 9 </span><span class="caption-text">Procesos siendo ejecutados por nuestro contenedor <code class="docutils literal notranslate"><span class="pre">Docker</span></code></span><a class="headerlink" href="#docker-ps-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Procedemos ahora si a conectarnos a la instancia de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> creada por el contenedor. Para esto utilizaremos el siguiente comando:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>vigilant_grothendieck<span class="w"> </span>bash
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.docker.com/engine/reference/commandline/exec/">docker exec</a> se encarga de <code class="docutils literal notranslate"><span class="pre">ejecutar</span> <span class="pre">un</span> <span class="pre">comando</span> <span class="pre">de</span> <span class="pre">forma</span> <span class="pre">interactiva</span> <span class="pre">en</span> <span class="pre">un</span> <span class="pre">contenedor</span> <span class="pre">en</span> <span class="pre">ejecución</span></code>, en este caso, el contenedor para <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> previamente instanciado, utilizando el programa <code class="docutils literal notranslate"><span class="pre">bash</span></code> dentro del contenedor. Luego de hacerlo, podemos conectarnos a <code class="docutils literal notranslate"><span class="pre">postgres</span></code> desde el <code class="docutils literal notranslate"><span class="pre">bash</span></code> utilizando:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>psql<span class="w"> </span>-U<span class="w"> </span>postgres<span class="w"> </span>--password
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">psql</span></code> es la línea de comandos de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code>. Por otro lado, <code class="docutils literal notranslate"><span class="pre">postgres</span></code> es el nombre de usuario que se creo por defecto al instanciar la base de datos. Usamos el flag <code class="docutils literal notranslate"><span class="pre">--password</span></code> para <code class="docutils literal notranslate"><span class="pre">agregar</span> <span class="pre">por</span> <span class="pre">consola</span> <span class="pre">nuestra</span> <span class="pre">contraseña</span></code> creada para la base de datos. Podrá observar que se ha conectado a la instancia de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> y puede realizar a esta, las consultas que desee. Para salir del contenedor puede presionar <code class="docutils literal notranslate"><span class="pre">Ctrl</span> <span class="pre">+</span> <span class="pre">D</span></code>.</p></li>
<li><p>Podemos crear una base de datos de prueba, para verificar que el funcionamiento de nuestro contenedor. Para eso usamos la siguiente orden:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>CREATE<span class="w"> </span>DATABASE<span class="w"> </span>sql_test<span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="sql-testdatabase-fig">
<a class="reference internal image-reference" href="_images/sql_testdatabase.png"><img alt="_images/sql_testdatabase.png" src="_images/sql_testdatabase.png" style="width: 672.0px; height: 271.95px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 10 </span><span class="caption-text">Consulta y creación de base de datos test, en la instancia de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> en <code class="docutils literal notranslate"><span class="pre">Docker</span></code>.</span><a class="headerlink" href="#sql-testdatabase-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Ahora procederemos a estudiar como podemos <code class="docutils literal notranslate"><span class="pre">eliminar</span> <span class="pre">un</span> <span class="pre">contenedor</span></code>. Por ahora, tenemos nuestro contenedor ejecutándose, al usar <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">ps</span></code> podremos verlo listado. En caso de que la lista de contenedores activos está vacía (<code class="docutils literal notranslate"><span class="pre">contenedor</span> <span class="pre">no</span> <span class="pre">ejecutado</span></code>), si utilizamos <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">ps</span> <span class="pre">-a</span></code> podremos visualizar los contenedores creados, aún cuando no se están ejecutando.</p></li>
<li><p>Para eliminar contenedores creados a priori podemos utilizar el comando <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">rm</span></code> seguido del identificador del contenedor, tal como se muestra a continuación. Antes puede salir del bash de PostgreSQL presionando <code class="docutils literal notranslate"><span class="pre">Ctrl</span> <span class="pre">+</span> <span class="pre">D</span></code> dos veces. Si le arroja una respuesta de error del daemon, procedemos antes a detener el contenedor usando <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">stop</span> <span class="pre">vigilant_grothendieck</span></code>.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>rm<span class="w"> </span>vigilant_grothendieck
</pre></div>
</div>
<figure class="align-center" id="containers-created-fig">
<a class="reference internal image-reference" href="_images/containers_created.png"><img alt="_images/containers_created.png" src="_images/containers_created.png" style="width: 672.0px; height: 105.69999999999999px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 11 </span><span class="caption-text">Lista de contenedores creados por <code class="docutils literal notranslate"><span class="pre">Docker</span></code>. Eliminación de contenedor.</span><a class="headerlink" href="#containers-created-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Podemos volver a recrear lo realizado previamente, pero ahora sin necesidad de instalar el contenedor de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> como se realizó al inicio, pues ya el instalador fue descargado, el cual podemos reutilizar</p></li>
</ul>
<figure class="align-center" id="docker-images-fig">
<a class="reference internal image-reference" href="_images/docker_images.png"><img alt="_images/docker_images.png" src="_images/docker_images.png" style="width: 672.0px; height: 54.599999999999994px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 12 </span><span class="caption-text">Imágenes de <code class="docutils literal notranslate"><span class="pre">Docker</span></code> instaladas.</span><a class="headerlink" href="#docker-images-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Ejecutemos nuevamente el contenedor de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> para poder crear una nueva base de datos, ahora con mas opciones para las variables de entorno, como <code class="docutils literal notranslate"><span class="pre">usuario</span> <span class="pre">además</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">contraseña</span> <span class="pre">y</span> <span class="pre">el</span> <span class="pre">nombre</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">base</span> <span class="pre">de</span> <span class="pre">datos</span></code>, de tal forma que puedan ser usados para conectarse a la base de datos. El comando <code class="docutils literal notranslate"><span class="pre">-d</span></code> (<em>detach</em>) puede ser utilizado para <code class="docutils literal notranslate"><span class="pre">mantener</span> <span class="pre">el</span> <span class="pre">proceso</span> <span class="pre">en</span> <span class="pre">ejecución</span></code></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>--name<span class="o">=</span>undatascience-postgres<span class="w"> </span>-e<span class="w"> </span><span class="nv">POSTGRES_USER</span><span class="o">=</span>undatascience<span class="w"> </span>-e<span class="w"> </span><span class="nv">POSTGRES_PASSWORD</span><span class="o">=</span>password<span class="w"> </span>-e<span class="w"> </span><span class="nv">POSTGRES_DB</span><span class="o">=</span>undatasciencedb<span class="w"> </span>-d<span class="w"> </span>postgres
</pre></div>
</div>
<figure class="align-center" id="postgres-name-fig">
<a class="reference internal image-reference" href="_images/postgres_name.png"><img alt="_images/postgres_name.png" src="_images/postgres_name.png" style="width: 672.0px; height: 79.44999999999999px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 13 </span><span class="caption-text">Creación de nueva base de datos nombrada <code class="docutils literal notranslate"><span class="pre">undatascience-postgres</span></code> en el contenedor de <code class="docutils literal notranslate"><span class="pre">Docker</span></code>.</span><a class="headerlink" href="#postgres-name-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Si se desea eliminar el <code class="docutils literal notranslate"><span class="pre">Docker</span></code> que está en ejecución, primero debe detenerlo utilizando el comando <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">stop</span></code> seguido del nombre del contenedor y luego <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">rm</span></code>. La base de datos creada también se puede visualizar desde <code class="docutils literal notranslate"><span class="pre">Docker</span> <span class="pre">Desktop</span></code>.</p></li>
</ul>
<figure class="align-center" id="containernamed-dockerapp-fig">
<a class="reference internal image-reference" href="_images/containernamed_dockerapp.png"><img alt="_images/containernamed_dockerapp.png" src="_images/containernamed_dockerapp.png" style="width: 672.0px; height: 162.04999999999998px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 14 </span><span class="caption-text">Nueva base de datos creada administrada desde <code class="docutils literal notranslate"><span class="pre">Docker</span> <span class="pre">Desktop</span></code>.</span><a class="headerlink" href="#containernamed-dockerapp-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Podemos hacer el ejercicio de conectarnos nuevamente, de manera interactiva el nuevo contenedor creado utilizando el nombre con el que fue creado <code class="docutils literal notranslate"><span class="pre">undatascience-postgres</span></code> y ejecutar dentro de este el programa <code class="docutils literal notranslate"><span class="pre">bash</span></code>. Si el contenedor está apagado, debe iniciarse antes usando <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">start</span> <span class="pre">undatascience-postgres</span></code></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>undatascience-postgres<span class="w"> </span>bash<span class="w"> </span>
</pre></div>
</div>
<figure class="align-center" id="start-containernamed-fig">
<a class="reference internal image-reference" href="_images/start_containernamed.png"><img alt="_images/start_containernamed.png" src="_images/start_containernamed.png" style="width: 672.0px; height: 54.949999999999996px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 15 </span><span class="caption-text">Inicio del contenedor mediante su nombre, ejecutando el programa <code class="docutils literal notranslate"><span class="pre">bash</span></code>.</span><a class="headerlink" href="#start-containernamed-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Dentro de <code class="docutils literal notranslate"><span class="pre">bash</span></code> puede utilizar todos los atajos comúnmente usados, por ejemplo <code class="docutils literal notranslate"><span class="pre">Ctrl</span> <span class="pre">+</span> <span class="pre">L</span></code> para limpiar la consola, <code class="docutils literal notranslate"><span class="pre">Ctrl</span> <span class="pre">+</span> <span class="pre">D</span></code> para salir de la consola. Para verificar cual es la versión de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> usamos el comando</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>psql<span class="w"> </span>--version
</pre></div>
</div>
<ul class="simple">
<li><p>El mensaje arrojado en consola será del tipo: <code class="docutils literal notranslate"><span class="pre">psql</span> <span class="pre">(PostgreSQL)</span> <span class="pre">15.3</span> <span class="pre">(Debian</span> <span class="pre">15.3-1.pgdg110+1)</span></code>. Si deseamos conectarnos a la base de datos recientemente creada, utilizaremos el siguiente comando en el que utilizamos: nombre de la base de datos y la contraseña asignada previamente.</p></li>
</ul>
<ul class="simple">
<li><p>Asignamos <code class="docutils literal notranslate"><span class="pre">nombres</span> <span class="pre">de</span> <span class="pre">usuario</span> <span class="pre">y</span> <span class="pre">base</span> <span class="pre">de</span> <span class="pre">datos</span></code>. La <code class="docutils literal notranslate"><span class="pre">contraseña</span> <span class="pre">será</span> <span class="pre">solicitada</span> <span class="pre">en</span> <span class="pre">el</span> <span class="pre">prompt</span></code>.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>psql<span class="w"> </span>-U<span class="w"> </span>undatascience<span class="w"> </span>--password<span class="w"> </span>--db<span class="w"> </span>undatasciencedb
</pre></div>
</div>
<figure class="align-center" id="database-connection-nameuserdb-fig">
<a class="reference internal image-reference" href="_images/database_connection_nameuserdb.png"><img alt="_images/database_connection_nameuserdb.png" src="_images/database_connection_nameuserdb.png" style="width: 672.0px; height: 89.6px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 16 </span><span class="caption-text">Conexión a base de datos. La contraseña es suministrada en el prompt.</span><a class="headerlink" href="#database-connection-nameuserdb-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>En caso de haber olvidado la contraseña, puede ingresar a <code class="docutils literal notranslate"><span class="pre">Docker</span> <span class="pre">Desktop</span></code> para recordarla y utilizarla</p></li>
</ul>
<figure class="align-center" id="credentials-postgresdb-fig">
<a class="reference internal image-reference" href="_images/credentials_postgresdb.png"><img alt="_images/credentials_postgresdb.png" src="_images/credentials_postgresdb.png" style="width: 672.0px; height: 355.95px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 17 </span><span class="caption-text">Aplicación <code class="docutils literal notranslate"><span class="pre">Docker</span> <span class="pre">Desktop</span></code> para verificar credenciales de bases de datos.</span><a class="headerlink" href="#credentials-postgresdb-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Para verificar que estamos dentro de la base de datos que hemos creado, podemos utilizar el siguiente comando (<code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">CURRENT_USER;</span></code>), el cual mostrará cual es el <code class="docutils literal notranslate"><span class="pre">nombre</span> <span class="pre">del</span> <span class="pre">usuario</span></code> asociado a la base de datos a la cual nos hemos conectado</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>CURRENT_USER<span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="select-currentuser-fig">
<a class="reference internal image-reference" href="_images/select_currentuser.png"><img alt="_images/select_currentuser.png" src="_images/select_currentuser.png" style="width: 672.0px; height: 61.599999999999994px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 18 </span><span class="caption-text">Consulta a la base de datos para identificar el usuario actual.</span><a class="headerlink" href="#select-currentuser-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Ya dentro del bash asociado a nuestra base de datos, podemos usar comandos útiles de la consola interactiva de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">\h</span> <span class="pre">INSERT</span></code>: Ver la ayuda con respecto a la sintaxis de nuestras consultas <code class="docutils literal notranslate"><span class="pre">SQL</span></code>, por ejemplo, el uso de <code class="docutils literal notranslate"><span class="pre">INSERT</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\dt</span></code>: Mostrará la lista de las tablas de la base de datos que tengamos seleccionada.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\?</span></code>: Mostrará una lista de todos los comandos que podemos usar en la consola interactiva de <code class="docutils literal notranslate"><span class="pre">postgresql</span></code>. Presionar <code class="docutils literal notranslate"><span class="pre">q</span></code> para salir de la lista.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\conninfo</span></code>: Mostrará la información de nuestra conexión activa.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\l</span></code>: Muestra la lista de instancias de bases de datos creadas</p></li>
</ul>
</li>
</ul>
<ul class="simple">
<li><p>Cuando ejecutamos un contenedor (ver <a class="reference internal" href="#postgres-name-fig"><span class="std std-numref">Fig. 13</span></a>) obtenemos el puerto <code class="docutils literal notranslate"><span class="pre">5432/tcp</span></code> el cual asigna por defecto <code class="docutils literal notranslate"><span class="pre">postgres</span></code>. <code class="docutils literal notranslate"><span class="pre">Este</span> <span class="pre">puerto</span> <span class="pre">solo</span> <span class="pre">funciona</span> <span class="pre">internamente</span> <span class="pre">dentro</span> <span class="pre">del</span> <span class="pre">contenedor</span></code>. Si deseamos <code class="docutils literal notranslate"><span class="pre">acceder</span> <span class="pre">a</span> <span class="pre">este</span> <span class="pre">puerto</span> <span class="pre">desde</span> <span class="pre">fuera,</span> <span class="pre">necesitaremos</span> <span class="pre">exponerlo</span></code>. Para esto usamos el flag <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">5432:5432</span></code>. Ahora nos podemos conectar a nuestro contenedor de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> desde cualquier aplicación, por ejemplo desde <code class="docutils literal notranslate"><span class="pre">DBeaver</span></code>.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>--name<span class="o">=</span>undatascience-name<span class="w"> </span>-e<span class="w"> </span><span class="nv">POSTGRES_USER</span><span class="o">=</span>undatascience-user<span class="w"> </span>-e<span class="w"> </span><span class="nv">POSTGRES_PASSWORD</span><span class="o">=</span>undatascience-password<span class="w"> </span>-e<span class="w"> </span><span class="nv">POSTGRES_DB</span><span class="o">=</span>undatascience-db<span class="w"> </span>-p<span class="w"> </span><span class="m">5432</span>:5432<span class="w"> </span>-d<span class="w"> </span>postgres
</pre></div>
</div>
<figure class="align-center" id="nuevo-puerto-conexion-fig">
<a class="reference internal image-reference" href="_images/nuevo_puerto_conexion.png"><img alt="_images/nuevo_puerto_conexion.png" src="_images/nuevo_puerto_conexion.png" style="width: 672.0px; height: 224.7px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 19 </span><span class="caption-text">Creación de contenedor con puerto expuesto para conexiones externas.</span><a class="headerlink" href="#nuevo-puerto-conexion-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Gracias a que hemos expuesto el contenedor, ahora podemos por medio de este conectarnos a la base de datos creada (<code class="docutils literal notranslate"><span class="pre">undatascience-db</span></code>) desde cualquier aplicación, por ejemplo, usando <code class="docutils literal notranslate"><span class="pre">DBeaver</span></code> el cual fue instalado al inicio de este capítulo (ver <a class="reference internal" href="#dbeaver-installer-fig"><span class="std std-numref">Fig. 3</span></a>).</p></li>
</ul>
<ul class="simple">
<li><p>Nótese que aún sin tener instalado <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> en nuestro computador, podemos utilizar <code class="docutils literal notranslate"><span class="pre">DBeaver</span></code> para conectarnos a la base de datos creada en <code class="docutils literal notranslate"><span class="pre">Docker</span></code>. Para conectarnos a  la base de datos creada, por ejemplo <code class="docutils literal notranslate"><span class="pre">undatascience-db</span></code>, hacemos click en <code class="docutils literal notranslate"><span class="pre">Database</span> <span class="pre">-&gt;</span> <span class="pre">New</span> <span class="pre">Database</span> <span class="pre">Connection</span></code> y podremos observar la siguiente imagen, en la que seleccionaremos <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> y luego el botón <code class="docutils literal notranslate"><span class="pre">Next</span></code>.</p></li>
</ul>
<figure class="align-center" id="dbeaver-connection-db-fig">
<a class="reference internal image-reference" href="_images/dbeaver_connection_db.png"><img alt="_images/dbeaver_connection_db.png" src="_images/dbeaver_connection_db.png" style="width: 768.0px; height: 406.8px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 20 </span><span class="caption-text">Conexión a la base de datos creada en <code class="docutils literal notranslate"><span class="pre">Docker</span></code>, desde la aplicación <code class="docutils literal notranslate"><span class="pre">DBeaver</span></code>.</span><a class="headerlink" href="#dbeaver-connection-db-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>En la ventana que se abrirá, vamos a <code class="docutils literal notranslate"><span class="pre">agregar</span> <span class="pre">las</span> <span class="pre">credenciales</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">base</span> <span class="pre">de</span> <span class="pre">datos</span> <span class="pre">creada</span></code>. Para conectarnos tendremos en cuenta lo siguiente:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Host</span></code>: localhost</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Port</span></code>: 5432</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Database</span></code>: undatascience-db</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Username</span></code>: undatascience-user</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Password</span></code>: undatascience-password</p></li>
</ul>
</li>
<li><p>Luego de ingresar las credenciales del paso anterior, puede probar la conexión utilizando el botón: <code class="docutils literal notranslate"><span class="pre">Test</span> <span class="pre">Connection</span></code> y luego <code class="docutils literal notranslate"><span class="pre">Finalizar</span></code> para guardar la conexión.</p></li>
<li><p>Cuando realice la conexión por primera vez, podrá visualizar la siguiente imagen en la que se le solicita descargar e instalar algunos controladores necesarios para poder realizar la conexión a <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code>. Si <code class="docutils literal notranslate"><span class="pre">DBeaver</span></code> le <code class="docutils literal notranslate"><span class="pre">solicita</span> <span class="pre">instalar</span> <span class="pre">algunos</span> <span class="pre">drivers,</span> <span class="pre">haga</span> <span class="pre">click</span> <span class="pre">en</span> <span class="pre">descargar</span></code>, esto le permitirá contar con las bibliotecas que le permitirán realizar la conexión.</p></li>
</ul>
<figure class="align-center" id="requirements-dbeaver-fig">
<a class="reference internal image-reference" href="_images/requirements_dbeaver.png"><img alt="_images/requirements_dbeaver.png" src="_images/requirements_dbeaver.png" style="width: 672.0px; height: 293.65px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 21 </span><span class="caption-text">Solicitud para instalar controladores necesarios para la conexión a <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code>.</span><a class="headerlink" href="#requirements-dbeaver-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="database-connection-test-fig">
<a class="reference internal image-reference" href="_images/database_connection_test.png"><img alt="_images/database_connection_test.png" src="_images/database_connection_test.png" style="width: 672.0px; height: 355.95px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 22 </span><span class="caption-text">Test de conexión a base de datos <code class="docutils literal notranslate"><span class="pre">Docker</span></code> desde <code class="docutils literal notranslate"><span class="pre">DBeaver</span></code>.</span><a class="headerlink" href="#database-connection-test-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="database-saved-dbeaver-fig">
<a class="reference internal image-reference" href="_images/database_saved_dbeaver.png"><img alt="_images/database_saved_dbeaver.png" src="_images/database_saved_dbeaver.png" style="width: 672.0px; height: 356.65px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 23 </span><span class="caption-text">Base de datos guardarda en <code class="docutils literal notranslate"><span class="pre">DBeaver</span></code> disponible para ser gestionada.</span><a class="headerlink" href="#database-saved-dbeaver-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Podemos realizar una consulta de test, desde <code class="docutils literal notranslate"><span class="pre">DBeaver</span></code>. Por ejemplo, si seguimos la ruta: <code class="docutils literal notranslate"><span class="pre">Database</span> <span class="pre">Navigator</span> <span class="pre">-&gt;</span> <span class="pre">undatascience-db</span> <span class="pre">-&gt;</span> <span class="pre">Schemas</span> <span class="pre">-&gt;</span> <span class="pre">public</span> <span class="pre">-&gt;</span> <span class="pre">Tables</span></code>, podemos realizar una consulta asociada con la creación de una tabla. Para esto, parados en <code class="docutils literal notranslate"><span class="pre">Tables</span></code> hacemos click en la parte superior sobre <code class="docutils literal notranslate"><span class="pre">SQL</span></code>. Se va a generar un script de <code class="docutils literal notranslate"><span class="pre">SQL</span></code> el cual podemos usar para realizar consultas.</p></li>
<li><p>En este caso usamos la siguiente consulta:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>CREATE<span class="w"> </span>TABLE<span class="w"> </span>USERS<span class="w"> </span><span class="o">(</span>ID<span class="w"> </span>SERIAL<span class="o">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>El script creará la tabla <code class="docutils literal notranslate"><span class="pre">users</span></code> con un <code class="docutils literal notranslate"><span class="pre">id</span></code> nombrado serial. <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> es utilizado para crear una nueva tabla en la base de datos. <code class="docutils literal notranslate"><span class="pre">ID</span></code> (<code class="docutils literal notranslate"><span class="pre">identity</span> <span class="pre">column</span></code>) es una columna numérica en la tabla que se rellena automáticamente con un valor entero cada vez que se inserta una fila.</p></li>
<li><p>En la siguiente sección estudiaremos las consultas en mas detalle. Además usaremos la <code class="docutils literal notranslate"><span class="pre">API</span></code> de <code class="docutils literal notranslate"><span class="pre">Python</span></code> para realizar dichas consultas desde un <code class="docutils literal notranslate"><span class="pre">notebook</span></code>.</p></li>
</ul>
<figure class="align-center" id="table-users-created-fig">
<a class="reference internal image-reference" href="_images/table_users_created.png"><img alt="_images/table_users_created.png" src="_images/table_users_created.png" style="width: 672.0px; height: 355.95px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 24 </span><span class="caption-text">Creación de la tabla <code class="docutils literal notranslate"><span class="pre">users</span></code> desde el script <code class="docutils literal notranslate"><span class="pre">SQL</span></code> en <code class="docutils literal notranslate"><span class="pre">DBeaver</span></code>.</span><a class="headerlink" href="#table-users-created-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Dado que la tabla ya fue creada. Podemos interactuar con esta desde la consola de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> dentro de nuestro contenedor. Para visualizar las tablas creadas desde la consola de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code>, usamos por ejemplo el comando <code class="docutils literal notranslate"><span class="pre">\d</span></code>. Si el contenedor está apagado lo podemos iniciar usando antes <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">start</span> <span class="pre">undatascience-name</span></code></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>undatascience-name<span class="w"> </span>bash
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>psql<span class="w"> </span>-U<span class="w"> </span>undatascience-user<span class="w"> </span>--db<span class="w"> </span>undatascience-db<span class="w"> </span>--password
</pre></div>
</div>
<figure class="align-center" id="queriesto-dbcreated-fig">
<a class="reference internal image-reference" href="_images/queriesto_dbcreated.png"><img alt="_images/queriesto_dbcreated.png" src="_images/queriesto_dbcreated.png" style="width: 672.0px; height: 156.45px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 25 </span><span class="caption-text">Consultas a la base de datos creada. Test para verificar creación de la tabla <code class="docutils literal notranslate"><span class="pre">users</span></code>.</span><a class="headerlink" href="#queriesto-dbcreated-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Podemos <code class="docutils literal notranslate"><span class="pre">agregar</span> <span class="pre">una</span> <span class="pre">fila</span> <span class="pre">a</span> <span class="pre">la</span> <span class="pre">tabla</span> <span class="pre">creada</span></code> para verificar otra consulta. En este caso usamos:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>INSERT<span class="w"> </span>INTO<span class="w"> </span>users<span class="w"> </span>VALUES<span class="w"> </span><span class="o">(</span><span class="m">1</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>users<span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="rowaddedto-userstable-fig">
<a class="reference internal image-reference" href="_images/rowaddedto_userstable.png"><img alt="_images/rowaddedto_userstable.png" src="_images/rowaddedto_userstable.png" style="width: 672.0px; height: 97.3px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 26 </span><span class="caption-text">Fila agregada a la tabla <code class="docutils literal notranslate"><span class="pre">users</span></code> en la base de datos <code class="docutils literal notranslate"><span class="pre">undatascience-db</span></code>.</span><a class="headerlink" href="#rowaddedto-userstable-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Podemos visualizar desde <code class="docutils literal notranslate"><span class="pre">DBeaver</span></code> la nueva fila agregada a la tabla <code class="docutils literal notranslate"><span class="pre">lectura_database_tableusers</span></code> creada en el contenedor.</p></li>
</ul>
<figure class="align-center" id="lectura-database-tableusers-fig">
<a class="reference internal image-reference" href="_images/lectura_database_tableusers.png"><img alt="_images/lectura_database_tableusers.png" src="_images/lectura_database_tableusers.png" style="width: 672.0px; height: 357.7px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 27 </span><span class="caption-text">Lectura de datos agregados a la tabla <code class="docutils literal notranslate"><span class="pre">users</span></code> desde <code class="docutils literal notranslate"><span class="pre">DBeaver</span></code>.</span><a class="headerlink" href="#lectura-database-tableusers-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Los <code class="docutils literal notranslate"><span class="pre">contenedores</span></code> creados recuerde que <code class="docutils literal notranslate"><span class="pre">pueden</span> <span class="pre">ser</span> <span class="pre">eliminados</span> <span class="pre">cuantas</span> <span class="pre">veces</span> <span class="pre">usted</span> <span class="pre">lo</span> <span class="pre">desee</span></code>, para construir nuevos proyectos. Para eliminarlos primero deben detenerse. Para esto usamos los siguientes comandos</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>stop<span class="w"> </span>undatascience-name
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>rm<span class="w"> </span>undatascience-name
</pre></div>
</div>
<ul class="simple">
<li><p>También puede <code class="docutils literal notranslate"><span class="pre">eliminar</span> <span class="pre">la</span> <span class="pre">imagen</span> <span class="pre">creada</span> <span class="pre">cuando</span> <span class="pre">instaló</span> <span class="pre">PostgreSQL</span></code> en el contenedor, usando la siguiente orden</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>images
docker<span class="w"> </span>rmi<span class="w"> </span>postgres
</pre></div>
</div>
<ul class="simple">
<li><p>Por otro lado, es posible <code class="docutils literal notranslate"><span class="pre">exportar</span> <span class="pre">e</span> <span class="pre">importar</span> <span class="pre">imágenes</span> <span class="pre">docker</span></code> con el objetivo de ser compartida con otros usuarios. Lo único que necesita el usuario que recibe la imagen es, tener instalado <code class="docutils literal notranslate"><span class="pre">Docker</span></code> en su computadora.</p></li>
<li><p>Veamos un ejemplo. Primero usando <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">ps</span></code> verificamos que nuestro contenedor objetivo ha sido iniciado. En caso contrario, puede iniciarlo usando <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">start</span></code>. Luego de ser iniciado pasamos a <code class="docutils literal notranslate"><span class="pre">exportar</span> <span class="pre">la</span> <span class="pre">imagen</span></code> usando la siguiente orden, en este caso vamos a exportar el contenedor recién creado <code class="docutils literal notranslate"><span class="pre">undatascience-name</span></code> con <code class="docutils literal notranslate"><span class="pre">ID</span> <span class="pre">igual</span> <span class="pre">a</span> <span class="pre">075cf2a22e48</span></code></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>container<span class="w"> </span><span class="nb">export</span><span class="w"> </span>075cf2a22e48<span class="w"> </span>-o<span class="w"> </span>undatascience-docker.tar
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ls</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Nótese que <code class="docutils literal notranslate"><span class="pre">075cf2a22e48</span></code> corresponde al <code class="docutils literal notranslate"><span class="pre">ID</span></code> correspondiente al contenedor. Luego de ser exportado el archivo <code class="docutils literal notranslate"><span class="pre">.tar</span></code> que contiene la imagen, dentro de la carpeta donde fue creado podemos importar la imagen docker usando la siguiente orden:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>image<span class="w"> </span>import<span class="w"> </span>undatascience-docker.tar<span class="w"> </span>undatascience-docker
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">images</span>
</pre></div>
</div>
<figure class="align-center" id="dockerimage-imported-fig">
<a class="reference internal image-reference" href="_images/dockerimage_imported.png"><img alt="_images/dockerimage_imported.png" src="_images/dockerimage_imported.png" style="width: 672.0px; height: 37.099999999999994px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 28 </span><span class="caption-text">Imagen <code class="docutils literal notranslate"><span class="pre">docker</span></code> importada usando la orden <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">image</span> <span class="pre">import</span></code>.</span><a class="headerlink" href="#dockerimage-imported-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Podemos seguir el procedimiento realizado previamente y <code class="docutils literal notranslate"><span class="pre">ejecutar</span> <span class="pre">de</span> <span class="pre">forma</span> <span class="pre">interactiva</span> <span class="pre">el</span> <span class="pre">contenedor</span> <span class="pre">importado</span></code> usando la siguiente orden</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>--name<span class="o">=</span>undatascience-docker<span class="w"> </span>undatascience-docker<span class="w"> </span>bash
</pre></div>
</div>
<ul class="simple">
<li><p>Además de <code class="docutils literal notranslate"><span class="pre">Docker</span></code>, si no deseamos pagar un servidor tipo <code class="docutils literal notranslate"><span class="pre">AWS,</span> <span class="pre">Google,</span> <span class="pre">IBM,...</span></code>  para <code class="docutils literal notranslate"><span class="pre">desplegar</span> <span class="pre">nuestra</span> <span class="pre">base</span> <span class="pre">de</span> <span class="pre">datos</span></code>, podemos usar servidores gratuitos para esta tarea. Una de las opciones gratuitas mas usadas en la actualidad es <code class="docutils literal notranslate"><span class="pre">Railway</span></code> el cual revisaremos a continuación.</p></li>
</ul>
</section>
<section id="despliegue-de-base-de-datos-en-railway">
<h2>Despliegue de Base de Datos en Railway<a class="headerlink" href="#despliegue-de-base-de-datos-en-railway" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Railway</span></code> es una plataforma de despliegue donde puedes <code class="docutils literal notranslate"><span class="pre">proveer</span> <span class="pre">infraestructura,</span> <span class="pre">desarrollar</span> <span class="pre">con</span> <span class="pre">esa</span> <span class="pre">infraestructura</span> <span class="pre">localmente,</span> <span class="pre">y</span> <span class="pre">luego</span> <span class="pre">desplegar</span> <span class="pre">en</span> <span class="pre">la</span> <span class="pre">nube</span></code>.</p></li>
<li><p>Primero que todo debe crear una cuenta en <code class="docutils literal notranslate"><span class="pre">Railway</span></code> y realizar verificación de identidad usando su cuenta de <code class="docutils literal notranslate"><span class="pre">GitHub</span></code>. De esta forma obtendrá un <code class="docutils literal notranslate"><span class="pre">plan</span> <span class="pre">inicial</span> <span class="pre">de</span> <span class="pre">500</span> <span class="pre">hrs</span></code> equivalente a <code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">USD</span></code>.</p></li>
</ul>
<figure class="align-center" id="signup-railway-fig">
<a class="reference internal image-reference" href="_images/signup_railway.png"><img alt="_images/signup_railway.png" src="_images/signup_railway.png" style="width: 649.25px; height: 272.29999999999995px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 29 </span><span class="caption-text">Pagina inicial de <code class="docutils literal notranslate"><span class="pre">Railway</span></code>. Crear una cuenta haciendo click en <code class="docutils literal notranslate"><span class="pre">Login</span></code></span><a class="headerlink" href="#signup-railway-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="signup-githubrailway-fig">
<a class="reference internal image-reference" href="_images/signup_githubrailway.png"><img alt="_images/signup_githubrailway.png" src="_images/signup_githubrailway.png" style="width: 648.55px; height: 238.7px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 30 </span><span class="caption-text">Autenticación de cuenta de <code class="docutils literal notranslate"><span class="pre">Railway</span></code> usando cuenta de <code class="docutils literal notranslate"><span class="pre">GitHub</span></code>.</span><a class="headerlink" href="#signup-githubrailway-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Una vez haya autenticado su cuenta de <code class="docutils literal notranslate"><span class="pre">Docker</span></code> podrá visualizar el siguiente mensaje de confirmación de activación de cuenta. En este se resumen los limites del <code class="docutils literal notranslate"><span class="pre">Trial</span> <span class="pre">Plan</span></code>.</p></li>
</ul>
<figure class="align-center" id="verfied-railway-fig">
<a class="reference internal image-reference" href="_images/verfied_railway.png"><img alt="_images/verfied_railway.png" src="_images/verfied_railway.png" style="width: 273.15000000000003px; height: 282.15000000000003px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 31 </span><span class="caption-text">Creación y verificación de cuenta de <code class="docutils literal notranslate"><span class="pre">Railway</span></code>. Autenticación por medio de cuenta de <code class="docutils literal notranslate"><span class="pre">GitHub</span></code>.</span><a class="headerlink" href="#verfied-railway-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Para crear una cuenta en <code class="docutils literal notranslate"><span class="pre">GitHub</span></code> puede usar el siguiente link (ver <a class="reference external" href="https://github.com/">GitHub</a>). Luego de haber creado y activado la cuenta, hacemos click en la opción <code class="docutils literal notranslate"><span class="pre">New</span> <span class="pre">Project</span></code> del <code class="docutils literal notranslate"><span class="pre">Dashboard</span></code> de <code class="docutils literal notranslate"><span class="pre">Railway</span></code>. Para esto hacer click en <code class="docutils literal notranslate"><span class="pre">Provision</span> <span class="pre">PostgreSQL</span></code>. Al final podrá observar la base de datos creada.</p></li>
<li><p>Una vez creada la cuenta, accedemos a el <code class="docutils literal notranslate"><span class="pre">Dashboard</span></code> de <code class="docutils literal notranslate"><span class="pre">Railway</span></code> y creamos un nuevo proyecto haciendo click en <code class="docutils literal notranslate"><span class="pre">New</span> <span class="pre">Project</span></code>. Luego, creamos el servidor para <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> en <code class="docutils literal notranslate"><span class="pre">Railway</span></code>, tal como se muestra en las imágenes siguientes:</p></li>
</ul>
<figure class="align-center" id="newproject-railway-fig">
<a class="reference internal image-reference" href="_images/newproject_railway.png"><img alt="_images/newproject_railway.png" src="_images/newproject_railway.png" style="width: 614.7px; height: 272.7px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 32 </span><span class="caption-text">Creación de nuevo proyecto <code class="docutils literal notranslate"><span class="pre">Railway</span></code> desde el <code class="docutils literal notranslate"><span class="pre">Dashboard</span></code>.</span><a class="headerlink" href="#newproject-railway-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="provision-postgresql-fig">
<a class="reference internal image-reference" href="_images/provision_postgresql.png"><img alt="_images/provision_postgresql.png" src="_images/provision_postgresql.png" style="width: 624.0px; height: 272.8px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 33 </span><span class="caption-text">Creación de base de datos <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> en <code class="docutils literal notranslate"><span class="pre">Railway</span></code>.</span><a class="headerlink" href="#provision-postgresql-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Nótese que si hacemos click sobre la base de datos creada, podemos visualizar todas las opciones ofrecidas por <code class="docutils literal notranslate"><span class="pre">Railway</span></code>. Si hacemos click en <code class="docutils literal notranslate"><span class="pre">Connect</span></code>, podemos acceder a las credencial necesarias para conectarnos a la base de datos.</p></li>
</ul>
<figure class="align-center" id="credentials-railwaypostgres-fig">
<a class="reference internal image-reference" href="_images/credentials_railwaypostgres.png"><img alt="_images/credentials_railwaypostgres.png" src="_images/credentials_railwaypostgres.png" style="width: 624.0px; height: 274.40000000000003px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 34 </span><span class="caption-text">Credenciales de conexión a la base de datos de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> en <code class="docutils literal notranslate"><span class="pre">Railway</span></code>.</span><a class="headerlink" href="#credentials-railwaypostgres-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Si usamos las credenciales de la bases de datos creada en <code class="docutils literal notranslate"><span class="pre">Railway</span></code> podemos conectarnos a la base de datos como se muestra en la siguiente imagen, desde <code class="docutils literal notranslate"><span class="pre">DBeaver</span></code> (ver  <a class="reference internal" href="#requirements-dbeaver-fig"><span class="std std-numref">Fig. 21</span></a>).</p></li>
</ul>
<figure class="align-center" id="database-railwayconn-fig">
<a class="reference internal image-reference" href="_images/database_railwayconn.png"><img alt="_images/database_railwayconn.png" src="_images/database_railwayconn.png" style="width: 672.0px; height: 297.84999999999997px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 35 </span><span class="caption-text">Conexión a base de datos creada en <code class="docutils literal notranslate"><span class="pre">Railway</span></code>.</span><a class="headerlink" href="#database-railwayconn-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Procederemos ahora a realizar algunas <code class="docutils literal notranslate"><span class="pre">consultas</span> <span class="pre">básicas</span> <span class="pre">a</span> <span class="pre">la</span> <span class="pre">base</span> <span class="pre">de</span> <span class="pre">datos</span></code> creada. En este caso utilizaremos la consola para consultas <code class="docutils literal notranslate"><span class="pre">SQL</span></code> de <code class="docutils literal notranslate"><span class="pre">pgAdmin</span></code>.</p></li>
</ul>
<figure class="align-center" id="sqlqueries-railwaydb-fig">
<a class="reference internal image-reference" href="_images/sqlqueries_railwaydb.png"><img alt="_images/sqlqueries_railwaydb.png" src="_images/sqlqueries_railwaydb.png" style="width: 672.0px; height: 204.04999999999998px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 36 </span><span class="caption-text">Consultas <code class="docutils literal notranslate"><span class="pre">SQL</span></code> pueden realizarse desde el <code class="docutils literal notranslate"><span class="pre">Dashboard</span></code> de <code class="docutils literal notranslate"><span class="pre">Railway</span></code> directamente.</span><a class="headerlink" href="#sqlqueries-railwaydb-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="introduccion-a-consultas-sql">
<h1>Introducción a consultas <code class="docutils literal notranslate"><span class="pre">SQL</span></code><a class="headerlink" href="#introduccion-a-consultas-sql" title="Permalink to this heading">#</a></h1>
<section id="restauracion-de-bases-de-datos-dvdrental">
<h2>Restauración de bases de datos <code class="docutils literal notranslate"><span class="pre">dvdrental</span></code><a class="headerlink" href="#restauracion-de-bases-de-datos-dvdrental" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>En esta sección, se proporcionará una base de datos de ejemplo de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> que servirá como herramienta de aprendizaje y práctica. La base de datos utilizada es la de un <code class="docutils literal notranslate"><span class="pre">negocio</span> <span class="pre">de</span> <span class="pre">alquiler</span> <span class="pre">de</span> <span class="pre">DVD</span></code>, diseñada para demostrar las características de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code>. Esta base de datos contiene numerosos objetos relacionados con los procesos de negocio de la tienda de alquiler de DVD</p>
<ul>
<li><p>15 tables</p></li>
<li><p>1 trigger</p></li>
<li><p>7 views</p></li>
<li><p>8 functions</p></li>
<li><p>1 domain</p></li>
<li><p>13 sequences</p></li>
</ul>
</li>
</ul>
<ul class="simple">
<li><p>Hay 15 tablas en la base de datos de alquiler de DVD:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">actor</span></code> - almacena los datos de los actores, incluyendo nombre y apellidos.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">film</span></code> - almacena datos de la película como título, año de lanzamiento, duración, clasificación, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">film_actor</span></code> - almacena las relaciones entre películas y actores.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">category</span></code> - almacena los datos de las categorías de las películas.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">film_category</span></code> - almacena las relaciones entre películas y categorías.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">store</span></code> - contiene los datos de la tienda, incluido el personal de gestión y la dirección.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inventory</span></code> - almacena los datos de inventario.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rental</span></code> - almacena los datos de alquiler.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">payment</span></code> - almacena los pagos de los clientes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">staff</span></code> - almacena los datos del personal.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">customer</span></code> - almacena los datos del cliente.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code> - almacena la dirección del personal y de los clientes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">city</span></code> - almacena los nombres de las ciudades.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">country</span></code> - almacena los nombres de los países.</p></li>
</ul>
</li>
</ul>
<ul class="simple">
<li><p>Puede descargar la base de datos ejemplo <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span> <span class="pre">DVD</span> <span class="pre">Rental</span></code> a través del siguiente enlace (ver <a class="reference external" href="https://github.com/lihkir/Data/blob/main/dvdrental.tar">dvdrental.tar</a>). Para importar esta base de datos en un servidor de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> podemos utilizar el gestor de bases de datos <code class="docutils literal notranslate"><span class="pre">pgAdmin</span></code>, el cual es ampliamente usado para este tipo de tareas. Para esto, primero lo instalamos siguiendo el siguiente link (ver <a class="reference external" href="https://www.pgadmin.org/download/">pgAdmin</a>). Una vez instalado lo iniciamos y agregamos el servidor, nombrado <code class="docutils literal notranslate"><span class="pre">dvdrental</span></code> por ejemplo.</p></li>
</ul>
<figure class="align-center" id="addnew-serverrailway-fig">
<a class="reference internal image-reference" href="_images/addnew_serverrailway.png"><img alt="_images/addnew_serverrailway.png" src="_images/addnew_serverrailway.png" style="width: 672.0px; height: 255.49999999999997px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 37 </span><span class="caption-text">Nuevo proyecto creado para el servidor <code class="docutils literal notranslate"><span class="pre">dvdrental</span></code>.</span><a class="headerlink" href="#addnew-serverrailway-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Para crear un nuevo servidor agregamos cada una de las credenciales generadas en nuestro proyecto <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> de <code class="docutils literal notranslate"><span class="pre">Docker</span></code>, tal como se muestra en la siguientes figuras. Al finalizar, hacemos click en <code class="docutils literal notranslate"><span class="pre">Save</span></code> para poder visualizar el nuevo servidor creado</p></li>
</ul>
<figure class="align-center" id="nameof-serverrailway-fig">
<a class="reference internal image-reference" href="_images/nameof_serverrailway.png"><img alt="_images/nameof_serverrailway.png" src="_images/nameof_serverrailway.png" style="width: 612.0px; height: 385.8px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 38 </span><span class="caption-text">Asignamos el nombre de la base de datos creada en <code class="docutils literal notranslate"><span class="pre">Docker</span></code>.</span><a class="headerlink" href="#nameof-serverrailway-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="connection-railwaydb-fig">
<a class="reference internal image-reference" href="_images/connection_railwaydb.png"><img alt="_images/connection_railwaydb.png" src="_images/connection_railwaydb.png" style="width: 612.0px; height: 387.59999999999997px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 39 </span><span class="caption-text">Credenciales para conexión a la base de datos en <code class="docutils literal notranslate"><span class="pre">Docker</span></code>.</span><a class="headerlink" href="#connection-railwaydb-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="pgadmindash-connrailway-fig">
<a class="reference internal image-reference" href="_images/pgadmindash_connrailway.png"><img alt="_images/pgadmindash_connrailway.png" src="_images/pgadmindash_connrailway.png" style="width: 575.6999999999999px; height: 280.5px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 40 </span><span class="caption-text">Dashboard de <code class="docutils literal notranslate"><span class="pre">pgAdmin</span></code> con información de conexión al servidor <code class="docutils literal notranslate"><span class="pre">Docker</span></code>.</span><a class="headerlink" href="#pgadmindash-connrailway-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Podemos realizar una primera consulta <code class="docutils literal notranslate"><span class="pre">SQL</span></code> para verificar nuestra conexión a la base de datos creada en el server <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code>. Para esto usamos la consulta</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>version<span class="o">()</span><span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="firstquery-frompgadmin-fig">
<a class="reference internal image-reference" href="_images/firstquery_frompgadmin.png"><img alt="_images/firstquery_frompgadmin.png" src="_images/firstquery_frompgadmin.png" style="width: 672.0px; height: 356.65px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 41 </span><span class="caption-text">Primera consulta a la base de datos creada en <code class="docutils literal notranslate"><span class="pre">Docker</span></code>.</span><a class="headerlink" href="#firstquery-frompgadmin-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Procedemos ahora a cargar la base de datos <code class="docutils literal notranslate"><span class="pre">DVD</span> <span class="pre">Rental</span></code> en nuestro servidor <code class="docutils literal notranslate"><span class="pre">Docker</span></code> por medio del gestor <code class="docutils literal notranslate"><span class="pre">pgAdmin</span></code>. Para esto, haga clic derecho en <code class="docutils literal notranslate"><span class="pre">Databases</span></code> luego en <code class="docutils literal notranslate"><span class="pre">Create/Database</span></code>.</p></li>
</ul>
<figure class="align-center" id="database-creationpgadmin-fig">
<a class="reference internal image-reference" href="_images/database_creationpgadmin.png"><img alt="_images/database_creationpgadmin.png" src="_images/database_creationpgadmin.png" style="width: 672.0px; height: 228.54999999999998px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 42 </span><span class="caption-text">Creación de base de datos para importar <code class="docutils literal notranslate"><span class="pre">DVD</span> <span class="pre">Rental</span></code>.</span><a class="headerlink" href="#database-creationpgadmin-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Luego agregamos el nombre de la base de datos, en este caso <code class="docutils literal notranslate"><span class="pre">dvdrental</span></code>. Puede hacer click derecho sobre el nombre de la base de datos y luego seleccionar <code class="docutils literal notranslate"><span class="pre">Refresh</span></code> para actualizar cambios en la base de datos.</p></li>
</ul>
<figure class="align-center" id="adding-dvdrentalname-fig">
<a class="reference internal image-reference" href="_images/adding_dvdrentalname.png"><img alt="_images/adding_dvdrentalname.png" src="_images/adding_dvdrentalname.png" style="width: 672.0px; height: 289.09999999999997px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 43 </span><span class="caption-text">Agregar nombre de la base de datos a importar en <code class="docutils literal notranslate"><span class="pre">Docker</span></code>.</span><a class="headerlink" href="#adding-dvdrentalname-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Procedemos ahora a importa la base de datos de interés, descargada previamente (ver <a class="reference external" href="https://github.com/lihkir/Data/blob/main/dvdrental.tar">dvdrental.tar</a>). Para esto hacemos click derecho sobre la base de datos creada <code class="docutils literal notranslate"><span class="pre">dvdrental</span></code> y luego seleccionamos la opción <code class="docutils literal notranslate"><span class="pre">Restore</span></code> para cargar el archivo <code class="docutils literal notranslate"><span class="pre">.tar</span></code>.</p></li>
</ul>
<figure class="align-center" id="restoredb-inrailway-fig">
<a class="reference internal image-reference" href="_images/restoredb_inrailway.png"><img alt="_images/restoredb_inrailway.png" src="_images/restoredb_inrailway.png" style="width: 672.0px; height: 248.14999999999998px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 44 </span><span class="caption-text">Selección de opción de restauración de base de datos <code class="docutils literal notranslate"><span class="pre">dvdrental</span></code>.</span><a class="headerlink" href="#restoredb-inrailway-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Luego de esto, procedemos a cargar la dirección de ubicación para nuestro archivo <code class="docutils literal notranslate"><span class="pre">dvdvrental.tar</span></code> dentro de la opción <code class="docutils literal notranslate"><span class="pre">Filename</span></code>. Posteriormente hacemos click en <code class="docutils literal notranslate"><span class="pre">Restore</span></code>. Cuando se encuentre buscando el archivo debe seleccionar la opción <code class="docutils literal notranslate"><span class="pre">All</span> <span class="pre">files</span></code> para que pueda visualizar el archivo <code class="docutils literal notranslate"><span class="pre">dvdvrental.tar</span></code>.</p></li>
</ul>
<figure class="align-center" id="loadingdb-locationforpgadmin-fig">
<a class="reference internal image-reference" href="_images/loadingdb_locationforpgadmin.png"><img alt="_images/loadingdb_locationforpgadmin.png" src="_images/loadingdb_locationforpgadmin.png" style="width: 672.0px; height: 244.99999999999997px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 45 </span><span class="caption-text">Cargue de base de datos desde archivo <code class="docutils literal notranslate"><span class="pre">dvdrental.tar</span></code>.</span><a class="headerlink" href="#loadingdb-locationforpgadmin-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="processcomplet-restoredb-fig">
<a class="reference internal image-reference" href="_images/processcomplet_restoredb.png"><img alt="_images/processcomplet_restoredb.png" src="_images/processcomplet_restoredb.png" style="width: 310.05px; height: 169.65px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 46 </span><span class="caption-text">Mensaje de carga exitosa de la base de datos <code class="docutils literal notranslate"><span class="pre">dvdrental.tar</span></code>.</span><a class="headerlink" href="#processcomplet-restoredb-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Podrá visualizar la base de datos creada en <code class="docutils literal notranslate"><span class="pre">Schemes/public/Tables</span></code>. Nótese que la base de datos creada cuenta con 15 tablas, cada una de estas con las especificaciones mencionadas al inicio de la presente sección.</p></li>
</ul>
<figure class="align-center" id="databasesaved-inschemes-fig">
<a class="reference internal image-reference" href="_images/databasesaved_inschemes.png"><img alt="_images/databasesaved_inschemes.png" src="_images/databasesaved_inschemes.png" style="width: 254.70000000000002px; height: 459.45px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 47 </span><span class="caption-text">15 Tablas han sido cargadas en la sección <code class="docutils literal notranslate"><span class="pre">Tables</span></code> en <code class="docutils literal notranslate"><span class="pre">Schemes</span></code>.</span><a class="headerlink" href="#databasesaved-inschemes-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Procederemos ahora a estudiar algunas consultas básicas que podemos realizar a nuestras bases de datos de prueba. En este caso iniciaremos con <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>. Usaremos inicialmente la consola de consultas ofrecida por <code class="docutils literal notranslate"><span class="pre">pgAdmin</span></code>.</p></li>
</ul>
</section>
<section id="consultas-sql">
<h2>Consultas SQL<a class="headerlink" href="#consultas-sql" title="Permalink to this heading">#</a></h2>
<section id="select">
<h3>SELECT<a class="headerlink" href="#select" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Cuando se trabaja con bases de datos, una tarea común es consultar datos de las tablas utilizando la sentencia <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>. Esta sentencia es compleja y tiene muchas cláusulas que permiten formar consultas flexibles. Dividiremos su uso en varias partes más cortas y fáciles de entender</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SELECT</span></code> incluye las siguientes cláusulas:</p>
<ul>
<li><p>Utilizar el operador <code class="docutils literal notranslate"><span class="pre">DISTINCT</span></code> para seleccionar filas distintas.</p></li>
<li><p>Ordenar filas utilizando la cláusula <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code>.</p></li>
<li><p>Filtrar filas mediante la cláusula <code class="docutils literal notranslate"><span class="pre">WHERE</span></code>.</p></li>
<li><p>Seleccionar un subconjunto de filas de una tabla utilizando la cláusula <code class="docutils literal notranslate"><span class="pre">LIMIT</span></code> o <code class="docutils literal notranslate"><span class="pre">FETCH</span></code>.</p></li>
<li><p>Agrupar filas en grupos mediante la cláusula <code class="docutils literal notranslate"><span class="pre">GROUP</span> <span class="pre">BY</span></code>.</p></li>
<li><p>Filtrar grupos mediante la cláusula <code class="docutils literal notranslate"><span class="pre">HAVING</span></code>.</p></li>
<li><p>Unir tablas mediante las cláusulas <code class="docutils literal notranslate"><span class="pre">INNER</span> <span class="pre">JOIN,</span> <span class="pre">LEFT</span> <span class="pre">JOIN,</span> <span class="pre">FULL</span> <span class="pre">OUTER</span> <span class="pre">JOIN</span></code> y <code class="docutils literal notranslate"><span class="pre">CROSS</span> <span class="pre">JOIN</span></code>.</p></li>
<li><p>Realizar operaciones de conjunto utilizando <code class="docutils literal notranslate"><span class="pre">UNION,</span> <span class="pre">INTERSECT</span></code> y <code class="docutils literal notranslate"><span class="pre">EXCEPT</span></code>.</p></li>
</ul>
</li>
<li><p>En esta sección, nos centraremos en las cláusulas <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> y <code class="docutils literal notranslate"><span class="pre">FROM</span></code>.</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">Sintaxis</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">sentencia</span> <span class="pre">SELECT</span> <span class="pre">de</span> <span class="pre">PostgreSQL</span></code></strong></p>
<ul class="simple">
<li><p>Empecemos con la forma básica de la sentencia <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> que recupera datos de una única tabla. A continuación se ilustra la sintaxis de la sentencia <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">   </span>select_list
FROM
<span class="w">   </span>table_name<span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>En primer lugar, especifique una <code class="docutils literal notranslate"><span class="pre">lista</span> <span class="pre">de</span> <span class="pre">selección</span> <span class="pre">que</span> <span class="pre">puede</span> <span class="pre">ser</span> <span class="pre">una</span> <span class="pre">columna</span> <span class="pre">o</span> <span class="pre">una</span> <span class="pre">lista</span> <span class="pre">de</span> <span class="pre">columnas</span> <span class="pre">de</span> <span class="pre">una</span> <span class="pre">tabla</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">que</span> <span class="pre">desee</span> <span class="pre">recuperar</span> <span class="pre">datos</span></code>. Si especifica una lista de columnas, debe colocar una coma <code class="docutils literal notranslate"><span class="pre">(,)</span></code> entre dos columnas para separarlas. Si desea <code class="docutils literal notranslate"><span class="pre">seleccionar</span> <span class="pre">datos</span> <span class="pre">de</span> <span class="pre">todas</span> <span class="pre">las</span> <span class="pre">columnas</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">tabla</span></code>, puede utilizar la abreviatura asterisco <code class="docutils literal notranslate"><span class="pre">(*)</span></code> en lugar de especificar todos los nombres de las columnas. La lista de selección también puede contener expresiones o valores literales.</p></li>
<li><p>En segundo lugar, especifique el nombre de la tabla desde la que desea consultar los datos después de la palabra clave <code class="docutils literal notranslate"><span class="pre">FROM</span></code>. La cláusula <code class="docutils literal notranslate"><span class="pre">FROM</span></code> es opcional. Si no consulta datos de ninguna tabla, puede omitir la cláusula <code class="docutils literal notranslate"><span class="pre">FROM</span></code> en la sentencia <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>. <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> evalúa la cláusula <code class="docutils literal notranslate"><span class="pre">FROM</span></code> antes de la cláusula <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> en la sentencia <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>.</p></li>
<li><p>Tenga en cuenta que las palabras clave <code class="docutils literal notranslate"><span class="pre">SQL</span></code> no distinguen entre mayúsculas y minúsculas. Esto significa que <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> es equivalente a <code class="docutils literal notranslate"><span class="pre">select</span></code> o <code class="docutils literal notranslate"><span class="pre">Select</span></code>. <code class="docutils literal notranslate"><span class="pre">Por</span> <span class="pre">convención,</span> <span class="pre">utilizaremos</span> <span class="pre">todas</span> <span class="pre">las</span> <span class="pre">palabras</span> <span class="pre">clave</span> <span class="pre">SQL</span> <span class="pre">en</span> <span class="pre">mayúsculas</span> <span class="pre">para</span> <span class="pre">facilitar</span> <span class="pre">la</span> <span class="pre">lectura</span> <span class="pre">de</span> <span class="pre">las</span> <span class="pre">consultas</span></code>.</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">Ejemplos</span> <span class="pre">de</span> <span class="pre">SELECT</span> <span class="pre">PostgreSQL</span></code></strong></p>
<ul class="simple">
<li><p>Veamos algunos ejemplos del uso de la sentencia <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code>. Vamos a utilizar la tabla <code class="docutils literal notranslate"><span class="pre">customer</span></code> en la base de datos de ejemplo para la demostración.</p></li>
</ul>
<figure class="align-center" id="customer-table-fig">
<a class="reference internal image-reference" href="_images/customer_table.png"><img alt="_images/customer_table.png" src="_images/customer_table.png" style="width: 164.8px; height: 204.8px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 48 </span><span class="caption-text">Estructura de la tabla <code class="docutils literal notranslate"><span class="pre">customer</span></code>.</span><a class="headerlink" href="#customer-table-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Podemos utilizar la sentencia <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> para encontrar <code class="docutils literal notranslate"><span class="pre">first_name</span></code> dentro de todos los clientes de la tabla <code class="docutils literal notranslate"><span class="pre">customer</span></code>. Para esto utilizaremos la siguiente orden, la cual podemos ejecutar desde la consola de <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code>. Observe que hemos añadido un punto y coma <code class="docutils literal notranslate"><span class="pre">(;)</span></code> al final de la sentencia <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>. El punto y coma no es parte de la sentencia <code class="docutils literal notranslate"><span class="pre">SQL</span></code>. Se utiliza para indicar a <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> el final de una sentencia <code class="docutils literal notranslate"><span class="pre">SQL</span></code>. El punto y coma también se utiliza para separar dos sentencias <code class="docutils literal notranslate"><span class="pre">SQL</span></code>.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>first_name<span class="w"> </span>FROM<span class="w"> </span>customer<span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="selectfirstname-query-fig">
<a class="reference internal image-reference" href="_images/selectfirstname_query.png"><img alt="_images/selectfirstname_query.png" src="_images/selectfirstname_query.png" style="width: 672.0px; height: 356.29999999999995px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 49 </span><span class="caption-text">Consulta desde la consola de <code class="docutils literal notranslate"><span class="pre">pgAdmin</span></code> para el ejemplo: <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">first_name</span> <span class="pre">FROM</span> <span class="pre">customer;</span></code>.</span><a class="headerlink" href="#selectfirstname-query-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p><strong><code class="docutils literal notranslate"><span class="pre">Uso</span> <span class="pre">de</span> <span class="pre">sentencia</span> <span class="pre">SELECT</span> <span class="pre">de</span> <span class="pre">PostgreSQL</span> <span class="pre">para</span> <span class="pre">consultar</span> <span class="pre">datos</span> <span class="pre">de</span> <span class="pre">múltiples</span> <span class="pre">columnas</span></code></strong></p>
<ul class="simple">
<li><p>Supongamos que sólo desea conocer el nombre, apellido y correo electrónico de los clientes <code class="docutils literal notranslate"><span class="pre">(first_name,</span> <span class="pre">last_name,</span> <span class="pre">email)</span></code>, puede especificar estos nombres de columna en la cláusula <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> como se muestra en la siguiente consulta:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">   </span>first_name,
<span class="w">   </span>last_name,
<span class="w">   </span>email
FROM
<span class="w">   </span>customer<span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="firstlastnameemail-query-fig">
<a class="reference internal image-reference" href="_images/firstlastnameemail_query.png"><img alt="_images/firstlastnameemail_query.png" src="_images/firstlastnameemail_query.png" style="width: 516.15px; height: 457.2px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 50 </span><span class="caption-text">Consulta desde la consola de <code class="docutils literal notranslate"><span class="pre">pgAdmin</span></code> para el ejemplo: <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">first_name,</span> <span class="pre">last_name,</span> <span class="pre">email</span> <span class="pre">FROM</span> <span class="pre">customer;</span></code>.</span><a class="headerlink" href="#firstlastnameemail-query-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p><strong><code class="docutils literal notranslate"> <span class="pre">Uso</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">sentencia</span> <span class="pre">SELECT</span> <span class="pre">de</span> <span class="pre">PostgreSQL</span> <span class="pre">para</span> <span class="pre">consultar</span> <span class="pre">datos</span> <span class="pre">de</span> <span class="pre">todas</span> <span class="pre">las</span> <span class="pre">columnas</span> <span class="pre">de</span> <span class="pre">una</span> <span class="pre">tabla</span></code></strong></p>
<ul class="simple">
<li><p>La siguiente consulta utiliza la sentencia <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> para seleccionar datos de todas las columnas de la tabla <code class="docutils literal notranslate"><span class="pre">customer</span></code>. En este ejemplo, utilizamos asterisco <code class="docutils literal notranslate"><span class="pre">(*)</span></code> en la cláusula <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>, que es una abreviatura de todas las columnas.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span>customer<span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="allcolumnsquery-pgadmin-fig">
<a class="reference internal image-reference" href="_images/allcolumnsquery_pgadmin.png"><img alt="_images/allcolumnsquery_pgadmin.png" src="_images/allcolumnsquery_pgadmin.png" style="width: 612.0px; height: 458.1px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 51 </span><span class="caption-text">Consulta desde la consola de <code class="docutils literal notranslate"><span class="pre">pgAdmin</span></code> para el ejemplo: <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">customer;</span></code>.</span><a class="headerlink" href="#allcolumnsquery-pgadmin-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p><strong><code class="docutils literal notranslate"><span class="pre">Uso</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">sentencia</span> <span class="pre">SELECT</span> <span class="pre">de</span> <span class="pre">PostgreSQL</span> <span class="pre">con</span> <span class="pre">expresiones</span></code></strong></p>
<ul class="simple">
<li><p>El siguiente ejemplo utiliza la sentencia <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> para <code class="docutils literal notranslate"><span class="pre">devolver</span> <span class="pre">los</span> <span class="pre">nombres</span> <span class="pre">completos</span> <span class="pre">y</span> <span class="pre">correos</span> <span class="pre">electrónicos</span> <span class="pre">de</span> <span class="pre">todos</span> <span class="pre">los</span> <span class="pre">clientes</span></code>. Utilizamos el <code class="docutils literal notranslate"><span class="pre">operador</span> <span class="pre">de</span> <span class="pre">concatenación</span> <span class="pre">||</span></code> para concatenar: nombre, espacio y apellido de cada cliente.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>
<span class="w">   </span>first_name<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span>last_name,
<span class="w">   </span>email
FROM<span class="w"> </span>
<span class="w">   </span>customer<span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="columnconcatenation-pgadmin-fig">
<a class="reference internal image-reference" href="_images/columnconcatenation_pgadmin.png"><img alt="_images/columnconcatenation_pgadmin.png" src="_images/columnconcatenation_pgadmin.png" style="width: 475.99999999999994px; height: 356.65px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 52 </span><span class="caption-text">Consulta desde la consola de <code class="docutils literal notranslate"><span class="pre">pgAdmin</span></code> para el ejemplo de concatenación de nombre y apellido.</span><a class="headerlink" href="#columnconcatenation-pgadmin-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p><strong><code class="docutils literal notranslate"><span class="pre">Uso</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">sentencia</span> <span class="pre">SELECT</span> <span class="pre">de</span> <span class="pre">PostgreSQL</span> <span class="pre">con</span> <span class="pre">expresiones</span></code></strong></p>
<ul class="simple">
<li><p>El siguiente ejemplo utiliza la sentencia <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> con una expresión. Omite la cláusula <code class="docutils literal notranslate"><span class="pre">FROM</span></code></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span><span class="m">5</span><span class="w"> </span>*<span class="w"> </span><span class="m">3</span><span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="selectexpressions-pgadmin-fig">
<a class="reference internal image-reference" href="_images/selectexpressions_pgadmin.png"><img alt="_images/selectexpressions_pgadmin.png" src="_images/selectexpressions_pgadmin.png" style="width: 612.9px; height: 458.1px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 53 </span><span class="caption-text">Consulta desde la consola de <code class="docutils literal notranslate"><span class="pre">pgAdmin</span></code> para el ejemplo: <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">5</span> <span class="pre">*</span> <span class="pre">3;</span></code>.</span><a class="headerlink" href="#selectexpressions-pgadmin-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="alias">
<h3>Alias<a class="headerlink" href="#alias" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Un alias de columna <code class="docutils literal notranslate"><span class="pre">permite</span> <span class="pre">asignar</span> <span class="pre">un</span> <span class="pre">nombre</span> <span class="pre">temporal</span> <span class="pre">a</span> <span class="pre">una</span> <span class="pre">columna</span></code> o a una expresión de la lista de selección de una sentencia <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>. Si desea cambiar el nombre de forma permanente debe usar <code class="docutils literal notranslate"><span class="pre">RENAME</span> <span class="pre">COLUMN</span></code>. El alias de columna existe temporalmente durante la ejecución de la consulta.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>column_name<span class="w"> </span>AS<span class="w"> </span>alias_name
FROM<span class="w"> </span>table_name<span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>En esta sintaxis, a <code class="docutils literal notranslate"><span class="pre">column_name</span></code> se le asigna un alias <code class="docutils literal notranslate"><span class="pre">alias_name</span></code>. La palabra clave <code class="docutils literal notranslate"><span class="pre">AS</span></code> es opcional, por lo que puede omitirla. Veamos algunos ejemplos utilizando la tabla <code class="docutils literal notranslate"><span class="pre">customer</span></code> de la base de datos de ejemplo. Recordemos que La siguiente consulta devuelve los nombres y apellidos de todos los clientes de la tabla <code class="docutils literal notranslate"><span class="pre">customer</span></code></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>
<span class="w">   </span>first_name,<span class="w"> </span>
<span class="w">   </span>last_name
FROM<span class="w"> </span>customer<span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Si deseamos renombrar el encabezado <code class="docutils literal notranslate"><span class="pre">last_name</span></code>, podemos asignarle un nuevo nombre utilizando un alias de columna usando las siguientes dos opciones</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>
<span class="w">   </span>first_name,<span class="w"> </span>
<span class="w">   </span>last_name<span class="w"> </span>AS<span class="w"> </span>surname
FROM<span class="w"> </span>customer<span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="aliassurname-pgadmin-fig">
<a class="reference internal image-reference" href="_images/aliassurname_pgadmin.png"><img alt="_images/aliassurname_pgadmin.png" src="_images/aliassurname_pgadmin.png" style="width: 612.9px; height: 457.65000000000003px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 54 </span><span class="caption-text">Consulta desde la consola de <code class="docutils literal notranslate"><span class="pre">pgAdmin</span></code> para asignar alias en columnas de <code class="docutils literal notranslate"><span class="pre">dvdrental</span></code>.</span><a class="headerlink" href="#aliassurname-pgadmin-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p><strong><code class="docutils literal notranslate"><span class="pre">Asignación</span> <span class="pre">de</span> <span class="pre">un</span> <span class="pre">alias</span> <span class="pre">de</span> <span class="pre">columna</span> <span class="pre">a</span> <span class="pre">una</span> <span class="pre">expresión</span></code></strong></p>
<ul class="simple">
<li><p>La siguiente consulta devuelve los nombres completos de todos los clientes. Construye el nombre completo concatenando: nombre, espacio y apellido (<code class="docutils literal notranslate"><span class="pre">first_name,</span> <span class="pre">'</span> <span class="pre">',</span> <span class="pre">last_name</span></code>). Si un alias de columna contiene uno o más espacios, debe ser encerrado entre comillas dobles, como se indica en el ejemplo a continuación. Nótese que la palabra clave <code class="docutils literal notranslate"><span class="pre">AS</span></code> es opcional, por lo que puede ser omitida.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">    </span>first_name<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span>last_name<span class="w"> </span><span class="s2">&quot;full name&quot;</span>
FROM
<span class="w">    </span>customer<span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="columnalias-toexpression-fig">
<a class="reference internal image-reference" href="_images/columnalias_toexpression.png"><img alt="_images/columnalias_toexpression.png" src="_images/columnalias_toexpression.png" style="width: 611.5500000000001px; height: 458.1px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 55 </span><span class="caption-text">Asignación de alias a una expresión compuesta de <code class="docutils literal notranslate"><span class="pre">first_name,</span> <span class="pre">'</span> <span class="pre">',</span> <span class="pre">last_name</span></code>.</span><a class="headerlink" href="#columnalias-toexpression-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="order-by">
<h3>ORDER BY<a class="headerlink" href="#order-by" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Cuando se consultan datos de una tabla, la sentencia <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> devuelve filas en un orden no especificado. Para ordenar las filas del conjunto de resultados, se utiliza la cláusula <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> en la sentencia <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>.</p></li>
<li><p>La cláusula <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> permite ordenar las filas devueltas por una cláusula <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> en orden ascendente o descendente en función de una expresión de ordenación. A continuación se ilustra la sintaxis de la cláusula <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">	</span>select_list
FROM
<span class="w">	</span>table_name
ORDER<span class="w"> </span>BY
<span class="w">	</span>sort_expression1<span class="w"> </span><span class="o">[</span>ASC<span class="w"> </span><span class="p">|</span><span class="w"> </span>DESC<span class="o">]</span>,
<span class="w">        </span>...
<span class="w">	</span>sort_expressionN<span class="w"> </span><span class="o">[</span>ASC<span class="w"> </span><span class="p">|</span><span class="w"> </span>DESC<span class="o">]</span><span class="p">;</span>
</pre></div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">Cláusula</span> <span class="pre">ORDER</span> <span class="pre">BY</span> <span class="pre">de</span> <span class="pre">PostgreSQL</span> <span class="pre">para</span> <span class="pre">ordenar</span> <span class="pre">filas</span> <span class="pre">por</span> <span class="pre">una</span> <span class="pre">columna</span></code></strong></p>
<ul class="simple">
<li><p>La siguiente consulta utiliza la cláusula <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> para ordenar los clientes por su primer nombre en orden ascendente</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">	</span>first_name,
<span class="w">	</span>last_name
FROM
<span class="w">	</span>customer
ORDER<span class="w"> </span>BY
<span class="w">	</span>first_name<span class="w"> </span>ASC<span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Dado que la opción <code class="docutils literal notranslate"><span class="pre">ASC</span></code> es la predeterminada, puede omitirla en la cláusula <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> de la siguiente manera</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">	</span>first_name,
<span class="w">	</span>last_name
FROM
<span class="w">	</span>customer
ORDER<span class="w"> </span>BY
<span class="w">	</span>first_name<span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="firstname-ascorder-fig">
<a class="reference internal image-reference" href="_images/firstname_ascorder.png"><img alt="_images/firstname_ascorder.png" src="_images/firstname_ascorder.png" style="width: 612.45px; height: 459.0px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 56 </span><span class="caption-text">Consulta <code class="docutils literal notranslate"><span class="pre">SQL</span></code> para orden ascendente basada en el primer nombre de los clientes.</span><a class="headerlink" href="#firstname-ascorder-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p><strong><code class="docutils literal notranslate"><span class="pre">Cláusula</span> <span class="pre">ORDER</span> <span class="pre">BY</span> <span class="pre">de</span> <span class="pre">PostgreSQL</span> <span class="pre">para</span> <span class="pre">ordenar</span> <span class="pre">filas</span> <span class="pre">por</span> <span class="pre">varias</span> <span class="pre">columnas</span></code></strong></p>
<ul class="simple">
<li><p>La siguiente sentencia selecciona primer nombre y el apellido de la tabla de clientes y ordena las filas por primer nombre en orden ascendente y el apellido en orden descendente</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">	</span>first_name,
<span class="w">	</span>last_name
FROM
<span class="w">	</span>customer
ORDER<span class="w"> </span>BY
<span class="w">	</span>first_name<span class="w"> </span>ASC,
<span class="w">	</span>last_name<span class="w"> </span>DESC<span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>En este ejemplo, la cláusula <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> ordena primero las filas por los valores de la columna <code class="docutils literal notranslate"><span class="pre">first_name</span></code> y después ordena las filas ordenadas por los valores de la columna <code class="docutils literal notranslate"><span class="pre">last_name</span></code>.</p></li>
</ul>
<figure class="align-center" id="orderbytowcolumns-pgadmin-fig">
<a class="reference internal image-reference" href="_images/orderbytowcolumns_pgadmin.png"><img alt="_images/orderbytowcolumns_pgadmin.png" src="_images/orderbytowcolumns_pgadmin.png" style="width: 612.0px; height: 458.55px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 57 </span><span class="caption-text">Consulta <code class="docutils literal notranslate"><span class="pre">SQL</span></code> para ordenar dos columnas primero a ascendente seguida de la descendente.</span><a class="headerlink" href="#orderbytowcolumns-pgadmin-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p><strong><code class="docutils literal notranslate"><span class="pre">Cláusula</span> <span class="pre">ORDER</span> <span class="pre">BY</span> <span class="pre">de</span> <span class="pre">PostgreSQL</span> <span class="pre">para</span> <span class="pre">ordenar</span> <span class="pre">filas</span> <span class="pre">por</span> <span class="pre">expresiones</span></code></strong></p>
<ul class="simple">
<li><p>La función <code class="docutils literal notranslate"><span class="pre">LENGTH()</span></code> acepta una cadena y devuelve su longitud. La siguiente sentencia selecciona los nombres y sus longitudes. Ordena las filas por la longitud de los nombres</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>
<span class="w">	</span>first_name,
<span class="w">	</span>LENGTH<span class="o">(</span>first_name<span class="o">)</span><span class="w"> </span>len
FROM
<span class="w">	</span>customer
ORDER<span class="w"> </span>BY<span class="w"> </span>
<span class="w">	</span>len<span class="w"> </span>DESC<span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="rowsorderby-expresionpgadmin-fig">
<a class="reference internal image-reference" href="_images/rowsorderby_expresionpgadmin.png"><img alt="_images/rowsorderby_expresionpgadmin.png" src="_images/rowsorderby_expresionpgadmin.png" style="width: 612.0px; height: 459.0px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 58 </span><span class="caption-text">Filas ordenadas por columna  y expresión.</span><a class="headerlink" href="#rowsorderby-expresionpgadmin-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Como la cláusula <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> se evalúa después de la cláusula <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>, el alias <code class="docutils literal notranslate"><span class="pre">len</span></code> de la columna está disponible y se puede utilizar en la cláusula <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code></p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">Cláusula</span> <span class="pre">ORDER</span> <span class="pre">BY</span> <span class="pre">de</span> <span class="pre">PostgreSQL</span> <span class="pre">y</span> <span class="pre">NULL</span></code></strong></p>
<ul class="simple">
<li><p>En algunas bases de datos existen datos faltantes <code class="docutils literal notranslate"><span class="pre">NULL</span></code> los cuales debe ser tratados con técnicas estadísticas adecuadas. Usualmente este tipo de datos son desconocidos en el momento del registro.</p></li>
<li><p>Cuando se trata de ordenar filas que contienen valores <code class="docutils literal notranslate"><span class="pre">NULL</span></code>, existe la posibilidad de establecer el orden de los <code class="docutils literal notranslate"><span class="pre">NULL</span></code> en relación con los valores no nulos utilizando las opciones <code class="docutils literal notranslate"><span class="pre">NULLS</span> <span class="pre">FIRST</span></code> o <code class="docutils literal notranslate"><span class="pre">NULLS</span> <span class="pre">LAST</span></code> en la cláusula <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code>.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>ORDER<span class="w"> </span>BY<span class="w"> </span>sort_expresssion<span class="w"> </span><span class="o">[</span>ASC<span class="w"> </span><span class="p">|</span><span class="w"> </span>DESC<span class="o">]</span><span class="w"> </span><span class="o">[</span>NULLS<span class="w"> </span>FIRST<span class="w"> </span><span class="p">|</span><span class="w"> </span>NULLS<span class="w"> </span>LAST<span class="o">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>La opción <code class="docutils literal notranslate"><span class="pre">NULLS</span> <span class="pre">FIRST</span></code> coloca <code class="docutils literal notranslate"><span class="pre">NULL</span></code> antes de otros valores no nulos y la opción <code class="docutils literal notranslate"><span class="pre">NULL</span> <span class="pre">LAST</span></code> coloca <code class="docutils literal notranslate"><span class="pre">NULL</span></code> después de otros valores no nulos. Vamos a crear una tabla para la demostración.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>CREATE<span class="w"> </span>TABLE<span class="w"> </span>sort_demo<span class="o">(</span>
<span class="w">	</span>num<span class="w"> </span>INT
<span class="o">)</span><span class="p">;</span>

INSERT<span class="w"> </span>INTO<span class="w"> </span>sort_demo<span class="o">(</span>num<span class="o">)</span>
VALUES<span class="o">(</span><span class="m">1</span><span class="o">)</span>,<span class="o">(</span><span class="m">2</span><span class="o">)</span>,<span class="o">(</span><span class="m">3</span><span class="o">)</span>,<span class="o">(</span>null<span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="createtable-orderbypgadmin-fig">
<a class="reference internal image-reference" href="_images/createtable_orderbypgadmin.png"><img alt="_images/createtable_orderbypgadmin.png" src="_images/createtable_orderbypgadmin.png" style="width: 672.0px; height: 357.0px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 59 </span><span class="caption-text">Creación de tabla en la base de datos <code class="docutils literal notranslate"><span class="pre">dvdrental</span></code> en <code class="docutils literal notranslate"><span class="pre">Railway</span></code>.</span><a class="headerlink" href="#createtable-orderbypgadmin-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>La siguiente consulta devuelve datos de la tabla <code class="docutils literal notranslate"><span class="pre">sort_demo</span></code></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>num
FROM<span class="w"> </span>sort_demo
ORDER<span class="w"> </span>BY<span class="w"> </span>num<span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="orderby-newcolumnint-fig">
<a class="reference internal image-reference" href="_images/orderby_newcolumnint.png"><img alt="_images/orderby_newcolumnint.png" src="_images/orderby_newcolumnint.png" style="width: 611.5500000000001px; height: 458.55px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 60 </span><span class="caption-text">Orden ascendente de filas en <code class="docutils literal notranslate"><span class="pre">sort_demo</span></code> por medio de la columna <code class="docutils literal notranslate"><span class="pre">num</span></code>.</span><a class="headerlink" href="#orderby-newcolumnint-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>La cláusula <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> ordena los valores de la columna <code class="docutils literal notranslate"><span class="pre">num</span></code> de la tabla <code class="docutils literal notranslate"><span class="pre">sort_demo</span></code> en orden ascendente. Coloca <code class="docutils literal notranslate"><span class="pre">NULL</span></code> después de otros valores. Por lo tanto, si utiliza la opción <code class="docutils literal notranslate"><span class="pre">ASC</span></code>, la cláusula <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> utiliza por defecto la opción <code class="docutils literal notranslate"><span class="pre">NULLS</span> <span class="pre">LAST</span></code>. Por lo tanto, la siguiente consulta devuelve el mismo resultado</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>num
FROM<span class="w"> </span>sort_demo
ORDER<span class="w"> </span>BY<span class="w"> </span>num<span class="w"> </span>NULLS<span class="w"> </span>LAST<span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Para anteponer <code class="docutils literal notranslate"><span class="pre">NULL</span></code> a otros valores no nulos, se utiliza la opción <code class="docutils literal notranslate"><span class="pre">NULLS</span> <span class="pre">FIRST</span></code></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>num
FROM<span class="w"> </span>sort_demo
ORDER<span class="w"> </span>BY<span class="w"> </span>num<span class="w"> </span>NULLS<span class="w"> </span>FIRST<span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>La siguiente sentencia ordena los valores de la columna <code class="docutils literal notranslate"><span class="pre">num</span></code> de la tabla <code class="docutils literal notranslate"><span class="pre">sort_demo</span></code> en orden descendente</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>num
FROM<span class="w"> </span>sort_demo
ORDER<span class="w"> </span>BY<span class="w"> </span>num<span class="w"> </span>DESC<span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>La cláusula <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> con la opción <code class="docutils literal notranslate"><span class="pre">DESC</span></code> utiliza los <code class="docutils literal notranslate"><span class="pre">NULLS</span> <span class="pre">FIRST</span></code> por defecto. Para invertir el orden, puede utilizar la opción <code class="docutils literal notranslate"><span class="pre">NULLS</span> <span class="pre">LAST</span></code></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>num
FROM<span class="w"> </span>sort_demo
ORDER<span class="w"> </span>BY<span class="w"> </span>num<span class="w"> </span>DESC<span class="w"> </span>NULLS<span class="w"> </span>LAST<span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="orderby-nulllast-numcolumn-fig">
<a class="reference internal image-reference" href="_images/orderby_nulllast_numcolumn.png"><img alt="_images/orderby_nulllast_numcolumn.png" src="_images/orderby_nulllast_numcolumn.png" style="width: 611.1px; height: 457.2px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 61 </span><span class="caption-text">Opción <code class="docutils literal notranslate"><span class="pre">DESC</span></code> para ordenar filas en <code class="docutils literal notranslate"><span class="pre">sort_demo</span></code> en forma descendente, con <code class="docutils literal notranslate"><span class="pre">NULL</span></code> al final, usando la opción <code class="docutils literal notranslate"><span class="pre">NULL</span> <span class="pre">LAST</span></code>.</span><a class="headerlink" href="#orderby-nulllast-numcolumn-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="select-distinct">
<h3>SELECT DISTINCT<a class="headerlink" href="#select-distinct" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>La cláusula <code class="docutils literal notranslate"><span class="pre">DISTINCT</span></code> se emplea en la sentencia <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> para <code class="docutils literal notranslate"><span class="pre">eliminar</span> <span class="pre">filas</span> <span class="pre">repetidas</span> <span class="pre">de</span> <span class="pre">un</span> <span class="pre">conjunto</span> <span class="pre">de</span> <span class="pre">resultados</span></code>. Al utilizar esta cláusula, se conserva una única fila para cada grupo de duplicados. Es posible aplicarla a una o varias columnas de la lista de selección en la sentencia <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>. La sintaxis es la siguiente</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">   </span>DISTINCT<span class="w"> </span>column1
FROM
<span class="w">   </span>table_name<span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>En esta sentencia, se verifica si existen duplicados al evaluar los valores de la columna <code class="docutils literal notranslate"><span class="pre">&quot;column1&quot;</span></code>. Si se especifican <code class="docutils literal notranslate"><span class="pre">múltiples</span> <span class="pre">columnas</span></code>, la cláusula <code class="docutils literal notranslate"><span class="pre">DISTINCT</span></code> determinará si hay duplicados al considerar la combinación de valores de esas columnas. En resumen, la cláusula <code class="docutils literal notranslate"><span class="pre">DISTINCT</span></code> evalúa duplicados utilizando los valores de una o más columnas específicas.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">   </span>DISTINCT<span class="w"> </span>column1,<span class="w"> </span>column2
FROM
<span class="w">   </span>table_name<span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>En esta situación, se utilizará la combinación de valores en las columnas <code class="docutils literal notranslate"><span class="pre">&quot;columna1&quot;</span></code> y <code class="docutils literal notranslate"><span class="pre">&quot;columna2&quot;</span></code> para determinar si hay duplicados. Además, <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> ofrece la cláusula <code class="docutils literal notranslate"><span class="pre">DISTINCT</span> <span class="pre">ON</span> <span class="pre">(expresión)</span></code> para conservar únicamente la “primera” fila de cada grupo de duplicados, siguiendo la siguiente sintaxis:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">   </span>DISTINCT<span class="w"> </span>ON<span class="w"> </span><span class="o">(</span>column1<span class="o">)</span><span class="w"> </span>column_alias,
<span class="w">   </span>column2
FROM
<span class="w">   </span>table_name
ORDER<span class="w"> </span>BY
<span class="w">   </span>column1,
<span class="w">   </span>column2<span class="p">;</span>
</pre></div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">PostgreSQL</span> <span class="pre">SELECT</span> <span class="pre">DISTINCT</span></code></strong></p>
<ul class="simple">
<li><p>Para practicar el uso de la cláusula <code class="docutils literal notranslate"><span class="pre">DISTINCT</span></code>, crearemos una tabla llamada <code class="docutils literal notranslate"><span class="pre">distinct_demo</span></code> y realizaremos inserciones de datos en ella. Para crear la tabla <code class="docutils literal notranslate"><span class="pre">distinct_demo</span></code> con tres columnas <code class="docutils literal notranslate"><span class="pre">id,</span> <span class="pre">bcolor</span></code> y <code class="docutils literal notranslate"><span class="pre">fcolor</span></code>, utilice la siguiente sentencia <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>CREATE<span class="w"> </span>TABLE<span class="w"> </span>distinct_demo<span class="w"> </span><span class="o">(</span>
<span class="w">	</span>id<span class="w"> </span>serial<span class="w"> </span>NOT<span class="w"> </span>NULL<span class="w"> </span>PRIMARY<span class="w"> </span>KEY,
<span class="w">	</span>bcolor<span class="w"> </span>VARCHAR,
<span class="w">	</span>fcolor<span class="w"> </span>VARCHAR
<span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>A continuación, utilice la sentencia <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> para agregar algunas filas a la tabla <code class="docutils literal notranslate"><span class="pre">distinct_demo</span></code></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>INSERT<span class="w"> </span>INTO<span class="w"> </span>distinct_demo<span class="w"> </span><span class="o">(</span>bcolor,<span class="w"> </span>fcolor<span class="o">)</span>
VALUES
<span class="w">	</span><span class="o">(</span><span class="s1">&#39;red&#39;</span>,<span class="w"> </span><span class="s1">&#39;red&#39;</span><span class="o">)</span>,
<span class="w">	</span><span class="o">(</span><span class="s1">&#39;red&#39;</span>,<span class="w"> </span><span class="s1">&#39;red&#39;</span><span class="o">)</span>,
<span class="w">	</span><span class="o">(</span><span class="s1">&#39;red&#39;</span>,<span class="w"> </span>NULL<span class="o">)</span>,
<span class="w">	</span><span class="o">(</span>NULL,<span class="w"> </span><span class="s1">&#39;red&#39;</span><span class="o">)</span>,
<span class="w">	</span><span class="o">(</span><span class="s1">&#39;red&#39;</span>,<span class="w"> </span><span class="s1">&#39;green&#39;</span><span class="o">)</span>,
<span class="w">	</span><span class="o">(</span><span class="s1">&#39;red&#39;</span>,<span class="w"> </span><span class="s1">&#39;blue&#39;</span><span class="o">)</span>,
<span class="w">	</span><span class="o">(</span><span class="s1">&#39;green&#39;</span>,<span class="w"> </span><span class="s1">&#39;red&#39;</span><span class="o">)</span>,
<span class="w">	</span><span class="o">(</span><span class="s1">&#39;green&#39;</span>,<span class="w"> </span><span class="s1">&#39;blue&#39;</span><span class="o">)</span>,
<span class="w">	</span><span class="o">(</span><span class="s1">&#39;green&#39;</span>,<span class="w"> </span><span class="s1">&#39;green&#39;</span><span class="o">)</span>,
<span class="w">	</span><span class="o">(</span><span class="s1">&#39;blue&#39;</span>,<span class="w"> </span><span class="s1">&#39;red&#39;</span><span class="o">)</span>,
<span class="w">	</span><span class="o">(</span><span class="s1">&#39;blue&#39;</span>,<span class="w"> </span><span class="s1">&#39;green&#39;</span><span class="o">)</span>,
<span class="w">	</span><span class="o">(</span><span class="s1">&#39;blue&#39;</span>,<span class="w"> </span><span class="s1">&#39;blue&#39;</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="distinctdemo-pgadmin-fig">
<a class="reference internal image-reference" href="_images/distinctdemo_pgadmin.png"><img alt="_images/distinctdemo_pgadmin.png" src="_images/distinctdemo_pgadmin.png" style="width: 864.0px; height: 459.45px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 62 </span><span class="caption-text">Tabla <code class="docutils literal notranslate"><span class="pre">distinct_demo</span></code> creada en <code class="docutils literal notranslate"><span class="pre">Docker</span></code> mediante <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> e <code class="docutils literal notranslate"><span class="pre">INSERT</span> <span class="pre">INTO</span></code>.</span><a class="headerlink" href="#distinctdemo-pgadmin-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Posteriormente, recupera los datos de la tabla <code class="docutils literal notranslate"><span class="pre">distinct_demo</span></code> utilizando la sentencia <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">	</span>id,
<span class="w">	</span>bcolor,
<span class="w">	</span>fcolor
FROM
<span class="w">	</span>distinct_demo<span class="w"> </span><span class="p">;</span>
</pre></div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">PostgreSQL</span> <span class="pre">DISTINCT</span> <span class="pre">para</span> <span class="pre">una</span> <span class="pre">columna</span></code></strong></p>
<ul class="simple">
<li><p>La siguiente sentencia selecciona valores únicos en la columna <code class="docutils literal notranslate"><span class="pre">bcolor</span></code> de la tabla <code class="docutils literal notranslate"><span class="pre">t1</span></code> y los ordena de forma alfabética utilizando la cláusula <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code>.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">	</span>DISTINCT<span class="w"> </span>bcolor
FROM
<span class="w">	</span>distinct_demo
ORDER<span class="w"> </span>BY
<span class="w">	</span>bcolor<span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="distinctbcolor-pgadmin-fig">
<a class="reference internal image-reference" href="_images/distinctbcolor_pgadmin.png"><img alt="_images/distinctbcolor_pgadmin.png" src="_images/distinctbcolor_pgadmin.png" style="width: 864.0px; height: 459.45px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 63 </span><span class="caption-text">Selección de valores únicos en la columna <code class="docutils literal notranslate"><span class="pre">bcolor</span></code> ordenados alfabéticamente.</span><a class="headerlink" href="#distinctbcolor-pgadmin-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p><strong><code class="docutils literal notranslate"><span class="pre">PostgreSQL</span> <span class="pre">DISTINCT</span> <span class="pre">múltiples</span> <span class="pre">columnas</span></code></strong></p>
<ul class="simple">
<li><p>La siguiente sentencia ejemplifica el uso de la cláusula DISTINCT en múltiples columnas.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">	</span>DISTINCT<span class="w"> </span>bcolor,
<span class="w">	</span>fcolor
FROM
<span class="w">	</span>distinct_demo
ORDER<span class="w"> </span>BY
<span class="w">	</span>bcolor,
<span class="w">	</span>fcolor<span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="distinctmultiplecolumn-pgadmin-fig">
<a class="reference internal image-reference" href="_images/distinctmultiplecolumn_pgadmin.png"><img alt="_images/distinctmultiplecolumn_pgadmin.png" src="_images/distinctmultiplecolumn_pgadmin.png" style="width: 864.0px; height: 459.90000000000003px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 64 </span><span class="caption-text">Selección de valores únicos con base en las columnas: <code class="docutils literal notranslate"><span class="pre">bcolor</span></code> y <code class="docutils literal notranslate"><span class="pre">fcolor</span></code>.</span><a class="headerlink" href="#distinctmultiplecolumn-pgadmin-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Al incluir las columnas <code class="docutils literal notranslate"><span class="pre">bcolor</span></code> y <code class="docutils literal notranslate"><span class="pre">fcolor</span></code> en la cláusula <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">DISTINCT</span></code>, <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> combinó los valores de ambas columnas para determinar la unicidad de las filas.</p></li>
</ul>
</section>
<section id="where">
<h3>WHERE<a class="headerlink" href="#where" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>En esta sección estudiaremos como usar la consulta <code class="docutils literal notranslate"><span class="pre">WHERE</span></code>. La sentencia <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> recupera datos de una tabla, devolviendo filas y columnas. Si deseas filtrar los resultados según una condición, puedes utilizar la cláusula <code class="docutils literal notranslate"><span class="pre">WHERE</span></code>. La forma en que se escribe la cláusula WHERE en PostgreSQL es la siguiente:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>select_list
FROM<span class="w"> </span>table_name
WHERE<span class="w"> </span>condition
ORDER<span class="w"> </span>BY<span class="w"> </span>sort_expression
</pre></div>
</div>
<ul class="simple">
<li><p>La cláusula <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> se utiliza después de la cláusula <code class="docutils literal notranslate"><span class="pre">FROM</span></code> en una sentencia <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>. Su función es <code class="docutils literal notranslate"><span class="pre">filtrar</span> <span class="pre">las</span> <span class="pre">filas</span> <span class="pre">devueltas</span> <span class="pre">por</span> <span class="pre">la</span> <span class="pre">consulta</span> <span class="pre">en</span> <span class="pre">base</span> <span class="pre">a</span> <span class="pre">una</span> <span class="pre">condición</span></code>. La condición puede ser una <code class="docutils literal notranslate"><span class="pre">expresión</span> <span class="pre">booleana</span> <span class="pre">o</span> <span class="pre">una</span> <span class="pre">combinación</span> <span class="pre">de</span> <span class="pre">ellas</span></code> usando los operadores <code class="docutils literal notranslate"><span class="pre">AND</span></code> y <code class="docutils literal notranslate"><span class="pre">OR</span></code>. Solo las filas que cumplan con la condición se incluirán en el resultado de la consulta. Para otros operadores de comparación (ver <a class="reference external" href="https://www.postgresql.org/docs/current/functions-comparison.html">Funciones y operadores de comparación</a>)</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">Uso</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">cláusula</span> <span class="pre">WHERE</span> <span class="pre">con</span> <span class="pre">el</span> <span class="pre">operador</span> <span class="pre">igual</span> <span class="pre">(=)</span></code></strong></p>
<ul class="simple">
<li><p>Vamos a practicar con ejemplos de cómo utilizar la cláusula <code class="docutils literal notranslate"><span class="pre">WHERE</span></code>. Usaremos la tabla de <code class="docutils literal notranslate"><span class="pre">customer</span></code> de la base de datos de ejemplo para la demostración. La siguiente sentencia muestra cómo utilizar la cláusula <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> para seleccionar clientes cuyos nombres son <code class="docutils literal notranslate"><span class="pre">Jamie</span></code>:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">	</span>last_name,
<span class="w">	</span>first_name
FROM
<span class="w">	</span>customer
WHERE
<span class="w">	</span><span class="nv">first_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Jamie&#39;</span><span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="wherefirstname-pgadmin-fig">
<a class="reference internal image-reference" href="_images/wherefirstname_pgadmin.png"><img alt="_images/wherefirstname_pgadmin.png" src="_images/wherefirstname_pgadmin.png" style="width: 864.0px; height: 319.95px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 65 </span><span class="caption-text">Uso del condicional <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> para filtrar columna por operador <code class="docutils literal notranslate"><span class="pre">(=)</span></code>.</span><a class="headerlink" href="#wherefirstname-pgadmin-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p><strong><code class="docutils literal notranslate"><span class="pre">Uso</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">cláusula</span> <span class="pre">WHERE</span> <span class="pre">con</span> <span class="pre">el</span> <span class="pre">operador</span> <span class="pre">AND</span></code></strong></p>
<ul class="simple">
<li><p>En el siguiente ejemplo, se busca clientes que tengan tanto el nombre como los apellidos igual a <code class="docutils literal notranslate"><span class="pre">Jamie</span></code> y <code class="docutils literal notranslate"><span class="pre">Rice</span></code>, respectivamente. Esto se logra utilizando el operador lógico <code class="docutils literal notranslate"><span class="pre">AND</span></code> para combinar las dos expresiones booleanas.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">	</span>last_name,
<span class="w">	</span>first_name
FROM
<span class="w">	</span>customer
WHERE
<span class="w">	</span><span class="nv">first_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Jamie&#39;</span><span class="w"> </span>AND<span class="w"> </span>
<span class="w">        </span><span class="nv">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Rice&#39;</span><span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="raicejamiewhere-pgadmin-fig">
<a class="reference internal image-reference" href="_images/raicejamiewhere_pgadmin.png"><img alt="_images/raicejamiewhere_pgadmin.png" src="_images/raicejamiewhere_pgadmin.png" style="width: 864.0px; height: 304.65000000000003px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 66 </span><span class="caption-text">Uso de cláusula <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> con el operador <code class="docutils literal notranslate"><span class="pre">AND</span></code>.</span><a class="headerlink" href="#raicejamiewhere-pgadmin-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p><strong><code class="docutils literal notranslate"><span class="pre">Uso</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">cláusula</span> <span class="pre">WHERE</span> <span class="pre">con</span> <span class="pre">el</span> <span class="pre">operador</span> <span class="pre">OR</span></code></strong></p>
<ul class="simple">
<li><p>En este ejemplo, se buscan clientes que tengan como apellido <code class="docutils literal notranslate"><span class="pre">Rodríguez</span></code> o como nombre <code class="docutils literal notranslate"><span class="pre">Adán</span></code>. Esto se logra utilizando el operador <code class="docutils literal notranslate"><span class="pre">OR</span></code> para combinar las dos condiciones.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">	</span>first_name,
<span class="w">	</span>last_name
FROM
<span class="w">	</span>customer
WHERE
<span class="w">	</span><span class="nv">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Rodriguez&#39;</span><span class="w"> </span>OR<span class="w"> </span>
<span class="w">	</span><span class="nv">first_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Adam&#39;</span><span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="firstlastnameor-pgadmin-fig">
<a class="reference internal image-reference" href="_images/firstlastnameor_pgadmin.png"><img alt="_images/firstlastnameor_pgadmin.png" src="_images/firstlastnameor_pgadmin.png" style="width: 864.0px; height: 319.05px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 67 </span><span class="caption-text">Ejemplo de uso de <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> con el operador <code class="docutils literal notranslate"><span class="pre">OR</span></code>.</span><a class="headerlink" href="#firstlastnameor-pgadmin-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p><strong><code class="docutils literal notranslate"><span class="pre">Uso</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">cláusula</span> <span class="pre">WHERE</span> <span class="pre">con</span> <span class="pre">el</span> <span class="pre">operador</span> <span class="pre">IN</span></code></strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Si</span> <span class="pre">deseas</span> <span class="pre">que</span> <span class="pre">una</span> <span class="pre">cadena</span> <span class="pre">coincida</span> <span class="pre">con</span> <span class="pre">cualquiera</span> <span class="pre">de</span> <span class="pre">las</span> <span class="pre">cadenas</span> <span class="pre">de</span> <span class="pre">una</span> <span class="pre">lista</span></code>, puedes utilizar el operador <code class="docutils literal notranslate"><span class="pre">IN</span></code>. Por ejemplo, la siguiente sentencia selecciona clientes cuyo primer nombre puede ser <code class="docutils literal notranslate"><span class="pre">Ann,</span> <span class="pre">Anne</span> <span class="pre">o</span> <span class="pre">Annie</span></code>.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">	</span>first_name,
<span class="w">	</span>last_name
FROM
<span class="w">	</span>customer
WHERE<span class="w"> </span>
<span class="w">	</span>first_name<span class="w"> </span>IN<span class="w"> </span><span class="o">(</span><span class="s1">&#39;Ann&#39;</span>,<span class="s1">&#39;Anne&#39;</span>,<span class="s1">&#39;Annie&#39;</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="firstnameininterval-pgadmin-fig">
<a class="reference internal image-reference" href="_images/firstnameininterval_pgadmin.png"><img alt="_images/firstnameininterval_pgadmin.png" src="_images/firstnameininterval_pgadmin.png" style="width: 864.0px; height: 333.0px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 68 </span><span class="caption-text">Ejemplo de uso de cláusula <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> con operador <code class="docutils literal notranslate"><span class="pre">IN</span></code>.</span><a class="headerlink" href="#firstnameininterval-pgadmin-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p><strong><code class="docutils literal notranslate"><span class="pre">Uso</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">cláusula</span> <span class="pre">WHERE</span> <span class="pre">con</span> <span class="pre">el</span> <span class="pre">operador</span> <span class="pre">LIKE</span></code></strong></p>
<ul class="simple">
<li><p>Para buscar una cadena que cumpla con un patrón específico, se utiliza el operador <code class="docutils literal notranslate"><span class="pre">LIKE</span></code>. En el siguiente ejemplo, se muestran todos los clientes cuyo nombre comienza con la cadena <code class="docutils literal notranslate"><span class="pre">Ann</span></code>.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">	</span>first_name,
<span class="w">	</span>last_name
FROM
<span class="w">	</span>customer
WHERE<span class="w"> </span>
<span class="w">	</span>first_name<span class="w"> </span>LIKE<span class="w"> </span><span class="s1">&#39;Ann%&#39;</span>
</pre></div>
</div>
<figure class="align-center" id="firstnamelike-pgadmin-fig">
<a class="reference internal image-reference" href="_images/firstnamelike_pgadmin.png"><img alt="_images/firstnamelike_pgadmin.png" src="_images/firstnamelike_pgadmin.png" style="width: 864.0px; height: 360.0px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 69 </span><span class="caption-text">Ejemplo de cláusula <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> con el operador <code class="docutils literal notranslate"><span class="pre">LIKE</span></code>.</span><a class="headerlink" href="#firstnamelike-pgadmin-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p><strong><code class="docutils literal notranslate"><span class="pre">Uso</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">cláusula</span> <span class="pre">WHERE</span> <span class="pre">con</span> <span class="pre">el</span> <span class="pre">operador</span> <span class="pre">BETWEEN</span></code></strong></p>
<ul class="simple">
<li><p>En el siguiente ejemplo, se buscan clientes cuyo <code class="docutils literal notranslate"><span class="pre">nombre</span> <span class="pre">comienza</span> <span class="pre">con</span> <span class="pre">la</span> <span class="pre">letra</span> <span class="pre">A</span> <span class="pre">y</span> <span class="pre">tiene</span> <span class="pre">entre</span> <span class="pre">3</span> <span class="pre">y</span> <span class="pre">5</span> <span class="pre">caracteres</span> <span class="pre">de</span> <span class="pre">longitud</span></code>. Esto se logra utilizando el operador <code class="docutils literal notranslate"><span class="pre">BETWEEN</span></code>. El operador <code class="docutils literal notranslate"><span class="pre">BETWEEN</span></code> devuelve verdadero si un valor se encuentra dentro de un rango de valores específico.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">	</span>first_name,
<span class="w">	</span>LENGTH<span class="o">(</span>first_name<span class="o">)</span><span class="w"> </span>name_length
FROM
<span class="w">	</span>customer
WHERE<span class="w"> </span>
<span class="w">	</span>first_name<span class="w"> </span>LIKE<span class="w"> </span><span class="s1">&#39;A%&#39;</span><span class="w"> </span>AND
<span class="w">	</span>LENGTH<span class="o">(</span>first_name<span class="o">)</span><span class="w"> </span>BETWEEN<span class="w"> </span><span class="m">3</span><span class="w"> </span>AND<span class="w"> </span><span class="m">5</span>
ORDER<span class="w"> </span>BY
<span class="w">	</span>name_length<span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="whereandbetwen-pgadmin-fig">
<a class="reference internal image-reference" href="_images/whereandbetwen_pgadmin.png"><img alt="_images/whereandbetwen_pgadmin.png" src="_images/whereandbetwen_pgadmin.png" style="width: 864.0px; height: 458.1px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 70 </span><span class="caption-text">Ejemplo de uso de <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> con el operador <code class="docutils literal notranslate"><span class="pre">BETWEEN</span></code>.</span><a class="headerlink" href="#whereandbetwen-pgadmin-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p><strong><code class="docutils literal notranslate"><span class="pre">Uso</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">cláusula</span> <span class="pre">WHERE</span> <span class="pre">con</span> <span class="pre">el</span> <span class="pre">operador</span> <span class="pre">no</span> <span class="pre">igual</span> <span class="pre">(&lt;&gt;)</span></code></strong></p>
<ul class="simple">
<li><p>En este ejemplo, se buscan clientes cuyo nombre comienza con <code class="docutils literal notranslate"><span class="pre">Bra</span></code> y cuyos apellidos no son <code class="docutils literal notranslate"><span class="pre">Motley</span></code>. Tenga en cuenta que puede utilizar el operador <code class="docutils literal notranslate"><span class="pre">!=</span></code> y el operador <code class="docutils literal notranslate"><span class="pre">&lt;&gt;</span></code> indistintamente porque son equivalentes.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>
<span class="w">	</span>first_name,<span class="w"> </span>
<span class="w">	</span>last_name
FROM<span class="w"> </span>
<span class="w">	</span>customer<span class="w"> </span>
WHERE<span class="w"> </span>
<span class="w">	</span>first_name<span class="w"> </span>LIKE<span class="w"> </span><span class="s1">&#39;Bra%&#39;</span><span class="w"> </span>AND<span class="w"> </span>
<span class="w">	</span>last_name<span class="w"> </span>&lt;&gt;<span class="w"> </span><span class="s1">&#39;Motley&#39;</span><span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="likenotequal-pgadmin-fig">
<a class="reference internal image-reference" href="_images/likenotequal_pgadmin.png"><img alt="_images/likenotequal_pgadmin.png" src="_images/likenotequal_pgadmin.png" style="width: 864.0px; height: 341.1px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 71 </span><span class="caption-text">Ejemplo de uso de la sentencia <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> con el operador <code class="docutils literal notranslate"><span class="pre">&lt;&gt;</span></code>.</span><a class="headerlink" href="#likenotequal-pgadmin-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>En la siguiente sección realizaremos consultas de este tipo desde <code class="docutils literal notranslate"><span class="pre">Python</span></code>, utilizando al <code class="docutils literal notranslate"><span class="pre">API</span></code> que ofrece <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> para esta tarea. Existen muchas mas consultas <code class="docutils literal notranslate"><span class="pre">SQL</span></code> que puede realizar, dependiendo de cual sea su objetivo. En este taller se abordaron algunas de las mas utilizadas, pero, puede encontrar mas de estas en <a class="reference external" href="https://www.postgresql.org/docs/current/queries.html">Queries PostgreSQL</a>.</p></li>
</ul>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="configuracion-de-su-entorno-usando-python-jupyterlab-y-vs-code">
<h1>Configuración de su entorno usando Python, JupyterLab y VS Code<a class="headerlink" href="#configuracion-de-su-entorno-usando-python-jupyterlab-y-vs-code" title="Permalink to this heading">#</a></h1>
<ul class="simple">
<li><p>Para la instalación de cada una de las librerías que usaremos en esta sección. Crearemos un <code class="docutils literal notranslate"><span class="pre">entorno</span> <span class="pre">virtual</span></code> aislado de <code class="docutils literal notranslate"><span class="pre">Python</span></code> en el cual instalaremos cada una de las dependencias que serán utilizadas, en especial la instalación de <code class="docutils literal notranslate"><span class="pre">jupyter-book</span></code> y <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> mediante la orden:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>jupyter-book
pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>psycopg2
</pre></div>
</div>
<ul class="simple">
<li><p>En su esencia, el propósito principal de los <code class="docutils literal notranslate"><span class="pre">entornos</span> <span class="pre">virtuales</span></code> (virtual environment) de <code class="docutils literal notranslate"><span class="pre">Python</span></code> es crear un entorno aislado para sus proyectos de <code class="docutils literal notranslate"><span class="pre">Python</span></code>. Esto significa que <code class="docutils literal notranslate"><span class="pre">cada</span> <span class="pre">proyecto</span> <span class="pre">puede</span> <span class="pre">tener</span> <span class="pre">sus</span> <span class="pre">propias</span> <span class="pre">dependencias,</span> <span class="pre">independientemente</span> <span class="pre">de</span> <span class="pre">las</span> <span class="pre">que</span> <span class="pre">tengan</span> <span class="pre">los</span> <span class="pre">demás</span> <span class="pre">proyectos</span></code>. Lo bueno de esto, es que no hay límites en el número de entornos que puedes tener, ya que sólo son directorios que contienen unos pocos scripts. Además, son fácilmente creados usando las herramientas de línea de comandos <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> o <code class="docutils literal notranslate"><span class="pre">pyenv</span></code>, en el caso de <code class="docutils literal notranslate"><span class="pre">anaconda</span></code> por medio de <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">create</span></code>.</p></li>
</ul>
<ul class="simple">
<li><p>Para crear un <code class="docutils literal notranslate"><span class="pre">environment</span></code> de <code class="docutils literal notranslate"><span class="pre">Python</span></code> con el nombre <code class="docutils literal notranslate"><span class="pre">psqlpy_venv</span></code>, por ejemplo, escriba la siguiente orden un su terminal, en el caso de <code class="docutils literal notranslate"><span class="pre">Windows</span></code> en el <code class="docutils literal notranslate"><span class="pre">Windows</span> <span class="pre">PowerShell</span></code> el cual tiene un aspecto muy parecido al de <code class="docutils literal notranslate"><span class="pre">Ubuntu</span></code>.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>psqlpy_venv
</pre></div>
</div>
<ul class="simple">
<li><p>Es una buena costumbre crear los <code class="docutils literal notranslate"><span class="pre">environment</span></code> en una carpeta aislada de sincronizaciones en la nube, del tipo: <code class="docutils literal notranslate"><span class="pre">OneDrive,</span> <span class="pre">Dropbox,</span> <span class="pre">Mega,</span> <span class="pre">etc,...</span></code>. Es recomendable crear un carpeta nombrada por ejemplo: <code class="docutils literal notranslate"><span class="pre">python_venv</span></code> en el disco local <code class="docutils literal notranslate"><span class="pre">PS</span> <span class="pre">C:\python_venv&gt;</span></code> donde van a reposar todos sus <code class="docutils literal notranslate"><span class="pre">entornos</span> <span class="pre">virtuales</span></code> y acceder a esta para activarlos.</p></li>
<li><p>Al final de la ejecución del comando anterior, se creará una nueva carpeta con el nombre del entorno, en este caso <code class="docutils literal notranslate"><span class="pre">psqlpy_venv</span></code>. Para visualizar esta carpeta puede presionar ejecutar en la consola <code class="docutils literal notranslate"><span class="pre">ls</span></code></p></li>
</ul>
<ul class="simple">
<li><p>Luego nos vamos a mover a la carpeta asociada a nuestro nuevo entorno virtual <code class="docutils literal notranslate"><span class="pre">psqlpy_venv</span></code> usando el comando <code class="docutils literal notranslate"><span class="pre">cd</span></code>, y dentro de esta vamos a ejecutar la siguiente orden para activar el <code class="docutils literal notranslate"><span class="pre">environment</span></code>:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>.<span class="se">\p</span>sqlpy_venv<span class="se">\S</span>cripts<span class="se">\a</span>ctivate
</pre></div>
</div>
<ul class="simple">
<li><p>Nótese que en la parte izquierda de la linea de comandos, aparece el <code class="docutils literal notranslate"><span class="pre">nombre</span> <span class="pre">del</span> <span class="pre">environment</span> <span class="pre">en</span> <span class="pre">color</span> <span class="pre">verde</span></code>, indicando que ha sido activado correctamente el entorno creado. Luego de activado el environment se puede mover al directorio donde desea realizar el desarrollo de esta sección. <code class="docutils literal notranslate"><span class="pre">¡No</span> <span class="pre">necesita</span> <span class="pre">estar</span> <span class="pre">parado</span> <span class="pre">dentro</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">carpeta</span> <span class="pre">asociada</span> <span class="pre">al</span> <span class="pre">environment!</span></code></p></li>
</ul>
<figure class="align-center" id="activatevenv-python-fig">
<a class="reference internal image-reference" href="_images/activatevenv_python.png"><img alt="_images/activatevenv_python.png" src="_images/activatevenv_python.png" style="width: 768.0px; height: 53.6px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 72 </span><span class="caption-text">Activación de <code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">environment</span></code> de <code class="docutils literal notranslate"><span class="pre">Python</span></code>.</span><a class="headerlink" href="#activatevenv-python-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul>
<li><p>Cuando se trata de activar entornos virtuales por primera vez, algunas maquinas pueden generar <code class="docutils literal notranslate"><span class="pre">mensajes</span> <span class="pre">de</span> <span class="pre">error</span> <span class="pre">similares</span> <span class="pre">al</span> <span class="pre">que</span> <span class="pre">se</span> <span class="pre">muestra</span> <span class="pre">a</span> <span class="pre">continuación</span></code></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>venv<span class="se">\S</span>cripts<span class="se">\a</span>ctivate<span class="w"> </span>:<span class="w"> </span>File<span class="w"> </span>C:<span class="se">\U</span>sers<span class="se">\D</span>ell<span class="se">\D</span>esktop<span class="se">\f</span>lask<span class="se">\m</span>icroblog<span class="se">\v</span>env<span class="se">\S</span>cripts<span class="se">\A</span>ctivate.ps1
cannot<span class="w"> </span>be<span class="w"> </span>loaded<span class="w"> </span>because<span class="w"> </span>running<span class="w"> </span>scripts<span class="w"> </span>is<span class="w"> </span>disabled<span class="w"> </span>on<span class="w"> </span>this<span class="w"> </span>system.<span class="w"> </span>For<span class="w"> </span>more<span class="w"> </span>information,<span class="w"> </span>see<span class="w">    </span>
about_Execution_Policies<span class="w"> </span>at<span class="w"> </span>https:/go.microsoft.com/fwlink/?LinkID<span class="o">=</span><span class="m">135170</span>.
At<span class="w"> </span>line:1<span class="w"> </span>char:1
+<span class="w"> </span>venv<span class="se">\S</span>cripts<span class="se">\a</span>ctivate
+<span class="w"> </span>~~~~~~~~~~~~~~~~~~~~~
<span class="w">    </span>+<span class="w"> </span>CategoryInfo<span class="w">          </span>:<span class="w"> </span>SecurityError:<span class="w"> </span><span class="o">(</span>:<span class="o">)</span><span class="w"> </span><span class="o">[]</span>,<span class="w"> </span>PSSecurityException
<span class="w">    </span>+<span class="w"> </span>FullyQualifiedErrorId<span class="w"> </span>:<span class="w"> </span>UnauthorizedAccess
</pre></div>
</div>
<p>Para solucionar este problema, ejecute en su terminal <code class="docutils literal notranslate"><span class="pre">Windows</span> <span class="pre">PowerShell</span></code> la siguiente orden para solucionarlo:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Set-ExecutionPolicy<span class="w"> </span>-ExecutionPolicy<span class="w"> </span>RemoteSigned<span class="w"> </span>-Scope<span class="w"> </span>Process
</pre></div>
</div>
<p>En algunos casos, cuando se trabaja con <code class="docutils literal notranslate"><span class="pre">máquinas</span> <span class="pre">que</span> <span class="pre">requieren</span> <span class="pre">de</span> <span class="pre">permisos</span> <span class="pre">específicos,</span> <span class="pre">por</span> <span class="pre">ejemplo,</span> <span class="pre">aquellas</span> <span class="pre">utilizadas</span> <span class="pre">en</span> <span class="pre">universidades</span> <span class="pre">y</span> <span class="pre">centros</span> <span class="pre">de</span> <span class="pre">investigación</span></code>, debe usar la siguiente orden</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Set-ExecutionPolicy<span class="w"> </span>RemoteSigned<span class="w"> </span>-Scope<span class="w"> </span>CurrentUser
</pre></div>
</div>
</li>
</ul>
<ul class="simple">
<li><p>Puede instalar dentro del entorno librerías útiles en <code class="docutils literal notranslate"><span class="pre">Ciencia</span> <span class="pre">de</span> <span class="pre">Datos</span></code> tales como:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>numpy
pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>scipy
pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>pandas
pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>matplotlib
pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>scikit-learn
</pre></div>
</div>
<ul class="simple">
<li><p>Cada una de estas librerías pueden ser instaladas a traves de un archivo de requerimientos, el cual podemos crear con el nombre: <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> y copiar en éste sin espacio a la izquierda el nombre de cada librería, una debajo de la otra, así:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>numpy
scipy
pandas
matplotlib
scikit-learn
</pre></div>
</div>
<ul class="simple">
<li><p>Luego desde la línea de comando solo debe ejecutar</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</pre></div>
</div>
<ul class="simple">
<li><p>Estaremos usando en esta sección <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">lab</span></code> y <code class="docutils literal notranslate"><span class="pre">VS</span> <span class="pre">Code</span></code> debido a que son editores gratuitos. Otras opciones son: <code class="docutils literal notranslate"><span class="pre">Sublime,</span> <span class="pre">Atom,</span> <span class="pre">IDLE,</span> <span class="pre">PyCharm,</span> <span class="pre">Sublime</span> <span class="pre">Text</span> <span class="pre">3,</span> <span class="pre">Jupyter,</span> <span class="pre">Spyder,</span> <span class="pre">PyDev,</span> <span class="pre">Vim,</span> <span class="pre">GNU/Emacs</span></code> entre otros. Seleccione aquel editor con el que se sienta más cómodo. Para instalar <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">lab</span></code> escriba dentro del mismo environment</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>jupyterlab
</pre></div>
</div>
<figure class="align-center" id="fig-dash4">
<img alt="_images/dash4.png" src="_images/dash4.png" />
</figure>
<ul class="simple">
<li><p>Iniciamos <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">lab</span></code> para crear el archivo <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> con las librerías a instalar. Éste archivo podemos ir actualizándolo en el transcurso de la sección a medida que una nueva librería va siendo necesaria.</p></li>
</ul>
<figure class="align-center" id="fig-dash5">
<img alt="_images/dash5.png" src="_images/dash5.png" />
</figure>
<figure class="align-center" id="fig-dash6">
<img alt="_images/dash6.png" src="_images/dash6.png" />
</figure>
<ul class="simple">
<li><p>Crea el archivo <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> con librerías a instalar. Nótese que <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">lab</span></code> cuenta también con una terminal integrada, por lo tanto, luego de crear el archivo, puede abrir una terminal dentro de <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">lab</span></code>, activar el environment y luego instalar las librerías usando <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-r</span> <span class="pre">requirements.txt</span></code></p></li>
</ul>
<figure class="align-center" id="fig-dash7">
<img alt="_images/dash7.png" src="_images/dash7.png" />
</figure>
<ul class="simple">
<li><p>Si deseas utilizar un <code class="docutils literal notranslate"><span class="pre">entorno</span> <span class="pre">virtual</span> <span class="pre">específico</span> <span class="pre">en</span> <span class="pre">JupyterLab</span></code>, debes seguir algunos pasos adicionales. Primero, <code class="docutils literal notranslate"><span class="pre">activa</span> <span class="pre">tu</span> <span class="pre">entorno</span> <span class="pre">virtual</span></code>, luego, instala el paquete <code class="docutils literal notranslate"><span class="pre">ipykernel</span></code> que proporciona el <code class="docutils literal notranslate"><span class="pre">kernel</span> <span class="pre">IPython</span></code> necesario para <code class="docutils literal notranslate"><span class="pre">Jupyter</span></code>. Esto <code class="docutils literal notranslate"><span class="pre">te</span> <span class="pre">permitirá</span> <span class="pre">agregar</span> <span class="pre">y</span> <span class="pre">utilizar</span> <span class="pre">el</span> <span class="pre">entorno</span> <span class="pre">virtual</span> <span class="pre">dentro</span> <span class="pre">de</span> <span class="pre">JupyterLab</span></code></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>ipykernel
</pre></div>
</div>
<ul class="simple">
<li><p>A continuación puede añadir su entorno virtual a <code class="docutils literal notranslate"><span class="pre">JupyterLab</span></code> escribiendo:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>ipykernel<span class="w"> </span>install<span class="w"> </span>--user<span class="w"> </span>--name<span class="o">=</span>psqlpy_venv
</pre></div>
</div>
<figure class="align-center" id="kernelreadytouse-python-fig">
<a class="reference internal image-reference" href="_images/kernelreadytouse_python.png"><img alt="_images/kernelreadytouse_python.png" src="_images/kernelreadytouse_python.png" style="width: 864.0px; height: 399.15000000000003px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 73 </span><span class="caption-text">Kernel <code class="docutils literal notranslate"><span class="pre">psqlpy_venv</span></code> listado dentro de <code class="docutils literal notranslate"><span class="pre">JupyterLab</span></code>.</span><a class="headerlink" href="#kernelreadytouse-python-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Si deseamos agregar el environment creado a <code class="docutils literal notranslate"><span class="pre">VS</span> <span class="pre">Code</span></code>, debemos seguir las siguientes instrucciones:</p>
<ul>
<li><p>Presionar <code class="docutils literal notranslate"><span class="pre">Ctrl</span> <span class="pre">+</span> <span class="pre">Shit</span> <span class="pre">+</span> <span class="pre">P</span></code></p></li>
<li><p>Hacer click en: <code class="docutils literal notranslate"><span class="pre">Python:</span> <span class="pre">Select</span> <span class="pre">Interpreter</span></code></p></li>
<li><p>Haga click en: <code class="docutils literal notranslate"><span class="pre">+</span> <span class="pre">Enter</span> <span class="pre">interpreter</span> <span class="pre">path...</span></code></p></li>
<li><p>Haga click en: <code class="docutils literal notranslate"><span class="pre">Find...</span></code></p></li>
<li><p>Agregque la capreta donde se encuentra su environment, Ej: <code class="docutils literal notranslate"><span class="pre">C:\python_venv\psqlpy_venv\Scripts\python</span></code></p></li>
<li><p>Haga click en <code class="docutils literal notranslate"><span class="pre">Select</span> <span class="pre">Interpreter</span></code></p></li>
</ul>
</li>
</ul>
<ul class="simple">
<li><p>En la parte superior derecha de su editor de <code class="docutils literal notranslate"><span class="pre">VS</span> <span class="pre">Code</span></code> aparecerá la opción <code class="docutils literal notranslate"><span class="pre">Select</span> <span class="pre">Kernel</span></code>. Haga click sobre esta opción y luego en <code class="docutils literal notranslate"><span class="pre">Python</span> <span class="pre">Environments....</span></code>. Seleccione el <code class="docutils literal notranslate"><span class="pre">environment</span></code> creado.</p></li>
</ul>
<figure class="align-center" id="pyvenvtovscode-test-fig">
<a class="reference internal image-reference" href="_images/pyvenvtovscode_test.png"><img alt="_images/pyvenvtovscode_test.png" src="_images/pyvenvtovscode_test.png" style="width: 864.0px; height: 99.0px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 74 </span><span class="caption-text">Selección de <code class="docutils literal notranslate"><span class="pre">Python</span> <span class="pre">Environment</span></code> desde <code class="docutils literal notranslate"><span class="pre">VS</span> <span class="pre">Code</span></code>.</span><a class="headerlink" href="#pyvenvtovscode-test-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Luego de seleccionar el <code class="docutils literal notranslate"><span class="pre">environment</span></code> deberá aparece en la parte superior derecha de <code class="docutils literal notranslate"><span class="pre">VS</span> <span class="pre">Code</span></code>, con el nombre creado inicialmente. El entorno estará listo para ser usado.</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="python-api-for-postgresql">
<h1>Python API for PostgreSQL<a class="headerlink" href="#python-api-for-postgresql" title="Permalink to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> puede ser integrado con <code class="docutils literal notranslate"><span class="pre">Python</span></code> usando el módulo <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code>. <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> es un adaptador de base de datos <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> para el lenguaje de programación <code class="docutils literal notranslate"><span class="pre">Python</span></code>. <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> fue escrito con el objetivo de ser muy <code class="docutils literal notranslate"><span class="pre">pequeño,</span> <span class="pre">rápido</span> <span class="pre">y</span> <span class="pre">estable</span></code>. No necesitas instalar este módulo por separado porque se entrega, por defecto, junto con la versión <code class="docutils literal notranslate"><span class="pre">2.5.x</span></code> de <code class="docutils literal notranslate"><span class="pre">Python</span></code> en adelante. Sin embargo, si no lo tienes instalado en tu máquina, puedes usar los siguientes comandos según tu preferencia de gestor de instalación de paquetes</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>psycopg2
</pre></div>
</div>
<ul class="simple">
<li><p>Para aquellos que tienen instalado <code class="docutils literal notranslate"><span class="pre">Anaconda</span></code> en sus computadoras</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>anaconda<span class="w"> </span>psycopg2
</pre></div>
</div>
<ul class="simple">
<li><p>Para utilizar el módulo <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code>, primero debe <code class="docutils literal notranslate"><span class="pre">crear</span> <span class="pre">un</span> <span class="pre">objeto</span> <span class="pre">connection</span> <span class="pre">que</span> <span class="pre">represente</span> <span class="pre">la</span> <span class="pre">base</span> <span class="pre">de</span> <span class="pre">datos</span></code> y luego, opcionalmente, puede crear un objeto <code class="docutils literal notranslate"><span class="pre">cursor</span></code> que le ayudará a ejecutar todas las sentencias <code class="docutils literal notranslate"><span class="pre">SQL</span></code>.</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">APIs</span> <span class="pre">del</span> <span class="pre">módulo</span> <span class="pre">Python</span> <span class="pre">psycopg2</span></code></strong></p>
<ul class="simple">
<li><p>Las siguientes son rutinas importantes del módulo <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code>, que pueden satisfacer su necesidad de trabajar con la base de datos <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> desde su programa <code class="docutils literal notranslate"><span class="pre">Python</span></code>. Si usted está buscando una aplicación más sofisticada, entonces usted puede mirar en la documentación oficial del módulo <code class="docutils literal notranslate"><span class="pre">Python</span> <span class="pre">psycopg2</span></code>.</p></li>
<li><p>Esta <code class="docutils literal notranslate"><span class="pre">API</span></code> abre una conexión a la base de datos <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code>. Si la base de datos se abre con éxito, devuelve un objeto de conexión</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="s2">&quot;testdb&quot;</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s2">&quot;postgres&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;cohondob&quot;</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="s2">&quot;5432&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Esta rutina <code class="docutils literal notranslate"><span class="pre">crea</span> <span class="pre">un</span> <span class="pre">cursor</span></code> que se utilizará durante toda la programación de la base de datos con <code class="docutils literal notranslate"><span class="pre">Python</span></code></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Esta rutina ejecuta una sentencia <code class="docutils literal notranslate"><span class="pre">SQL</span></code>. La sentencia <code class="docutils literal notranslate"><span class="pre">SQL</span></code> puede ser parametrizada (es decir, marcadores de posición en lugar de literales <code class="docutils literal notranslate"><span class="pre">SQL</span></code>). El módulo <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> soporta <code class="docutils literal notranslate"><span class="pre">marcadores</span> <span class="pre">de</span> <span class="pre">posición</span></code> utilizando el signo <code class="docutils literal notranslate"><span class="pre">%</span></code>. Por ejemplo: <code class="docutils literal notranslate"><span class="pre">cursor.execute(&quot;INSERT</span> <span class="pre">INTO</span> <span class="pre">people</span> <span class="pre">VALUES</span> <span class="pre">(%s,</span> <span class="pre">%s)&quot;,</span> <span class="pre">(who,</span> <span class="pre">age))</span></code></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span> <span class="p">[,</span> <span class="n">optional</span> <span class="n">parameters</span><span class="p">])</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Esta rutina ejecuta un comando <code class="docutils literal notranslate"><span class="pre">SQL</span></code> contra <code class="docutils literal notranslate"><span class="pre">todas</span> <span class="pre">las</span> <span class="pre">secuencias</span> <span class="pre">de</span> <span class="pre">parámetros</span></code> o mapeos encontrados en la secuencia <code class="docutils literal notranslate"><span class="pre">SQL</span></code></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cursor</span><span class="o">.</span><span class="n">executemany</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">seq_of_parameters</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Este es un atributo de solo lectura, el cual <code class="docutils literal notranslate"><span class="pre">devuelve</span> <span class="pre">el</span> <span class="pre">número</span> <span class="pre">total</span> <span class="pre">de</span> <span class="pre">filas</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">base</span> <span class="pre">de</span> <span class="pre">datos</span></code> que han sido modificadas, insertadas o eliminadas por la última ejecución</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Este método <code class="docutils literal notranslate"><span class="pre">consigna</span> <span class="pre">la</span> <span class="pre">transacción</span> <span class="pre">actual</span></code>. Si no se llama a este método, cualquier cosa que se haya hecho desde la última llamada a <code class="docutils literal notranslate"><span class="pre">commit()</span></code> no es visible desde otras conexiones de la base de datos</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Este método <code class="docutils literal notranslate"><span class="pre">revierte</span> <span class="pre">cualquier</span> <span class="pre">cambio</span> <span class="pre">en</span> <span class="pre">la</span> <span class="pre">base</span> <span class="pre">de</span> <span class="pre">datos</span></code> desde la última llamada a <code class="docutils literal notranslate"><span class="pre">commit()</span></code></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Este método <code class="docutils literal notranslate"><span class="pre">cierra</span> <span class="pre">la</span> <span class="pre">conexión</span> <span class="pre">a</span> <span class="pre">la</span> <span class="pre">base</span> <span class="pre">de</span> <span class="pre">datos</span></code>. Tenga en cuenta que esto no llama automáticamente a <code class="docutils literal notranslate"><span class="pre">commit()</span></code>. <code class="docutils literal notranslate"><span class="pre">Si</span> <span class="pre">simplemente</span> <span class="pre">cierra</span> <span class="pre">la</span> <span class="pre">conexión</span> <span class="pre">a</span> <span class="pre">la</span> <span class="pre">base</span> <span class="pre">de</span> <span class="pre">datos</span> <span class="pre">sin</span> <span class="pre">llamar</span> <span class="pre">primero</span> <span class="pre">a</span> </code>commit()<code class="docutils literal notranslate"><span class="pre">,</span> <span class="pre">¡los</span> <span class="pre">cambios</span> <span class="pre">se</span> <span class="pre">perderán!</span></code></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Este método <code class="docutils literal notranslate"><span class="pre">obtiene</span> <span class="pre">la</span> <span class="pre">siguiente</span> <span class="pre">fila</span> <span class="pre">de</span> <span class="pre">un</span> <span class="pre">conjunto</span> <span class="pre">de</span> <span class="pre">resultados</span> <span class="pre">de</span> <span class="pre">consulta</span></code>, devolviendo una única secuencia, o <code class="docutils literal notranslate"><span class="pre">None</span></code> cuando no hay más datos disponibles</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Ejemplo</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Usando while loop</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM employees&quot;</span><span class="p">)</span>
<span class="n">row</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
<span class="k">while</span> <span class="n">row</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
  <span class="n">row</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>

<span class="c1"># Usando el cursor como iterator</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM employees&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Esta rutina <code class="docutils literal notranslate"><span class="pre">obtiene</span> <span class="pre">el</span> <span class="pre">siguiente</span> <span class="pre">conjunto</span> <span class="pre">de</span> <span class="pre">filas</span> <span class="pre">de</span> <span class="pre">un</span> <span class="pre">resultado</span> <span class="pre">de</span> <span class="pre">consulta</span></code>, devolviendo una lista. Se devuelve una lista vacía cuando no hay más filas disponibles. El método intenta obtener tantas filas como indique el parámetro de tamaño.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchmany</span><span class="p">([</span><span class="n">size</span><span class="o">=</span><span class="n">cursor</span><span class="o">.</span><span class="n">arraysize</span><span class="p">])</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Esta rutina <code class="docutils literal notranslate"><span class="pre">recupera</span> <span class="pre">todas</span> <span class="pre">las</span> <span class="pre">filas</span> <span class="pre">(restantes)</span> <span class="pre">de</span> <span class="pre">un</span> <span class="pre">resultado</span> <span class="pre">de</span> <span class="pre">consulta</span></code>, devolviendo una lista. Se devuelve una lista vacía cuando no hay filas disponibles.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
</pre></div>
</div>
<figure class="align-center" id="python-postgresql-api-fig">
<a class="reference internal image-reference" href="_images/python_postgresql_api.png"><img alt="_images/python_postgresql_api.png" src="_images/python_postgresql_api.png" style="width: 473.40000000000003px; height: 294.3px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 75 </span><span class="caption-text">Descripción del funcionamiento de la <code class="docutils literal notranslate"><span class="pre">API</span> <span class="pre">psycopg2</span></code>.</span><a class="headerlink" href="#python-postgresql-api-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p><strong><code class="docutils literal notranslate"><span class="pre">Conexión</span> <span class="pre">a</span> <span class="pre">la</span> <span class="pre">base</span> <span class="pre">de</span> <span class="pre">datos</span></code></strong></p>
<ul class="simple">
<li><p>El siguiente código de <code class="docutils literal notranslate"><span class="pre">Python</span></code> muestra cómo conectarse a una base de datos existente. Para conectarse a la base de datos <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> y realizar consultas <code class="docutils literal notranslate"><span class="pre">SQL</span></code>, <code class="docutils literal notranslate"><span class="pre">debe</span> <span class="pre">conocer</span> <span class="pre">las</span> <span class="pre">credenciales</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">base</span> <span class="pre">de</span> <span class="pre">datos</span> <span class="pre">a</span> <span class="pre">la</span> <span class="pre">que</span> <span class="pre">se</span> <span class="pre">desea</span> <span class="pre">conectar</span></code>. En éste caso la información de la base de datos creada la encontramos en <strong><code class="docutils literal notranslate"><span class="pre">Docker</span></code></strong>. Importamos primero las librerías necesarias para usar <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">psycopg2</span>
<span class="kn">from</span> <span class="nn">psycopg2</span> <span class="kn">import</span> <span class="n">Error</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">connection</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s2">&quot;undatascience-user&quot;</span><span class="p">,</span>
                                  <span class="n">password</span><span class="o">=</span><span class="s2">&quot;undatascience-password&quot;</span><span class="p">,</span>
                                  <span class="n">host</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
                                  <span class="n">port</span><span class="o">=</span><span class="s2">&quot;5432&quot;</span><span class="p">,</span>
                                  <span class="n">database</span><span class="o">=</span><span class="s2">&quot;undatascience-db&quot;</span><span class="p">)</span>

    <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;PostgreSQL server information&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">connection</span><span class="o">.</span><span class="n">get_dsn_parameters</span><span class="p">(),</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT version();&quot;</span><span class="p">)</span>
    <span class="n">record</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You are connected to - &quot;</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">except</span> <span class="p">(</span><span class="ne">Exception</span><span class="p">,</span> <span class="n">Error</span><span class="p">)</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error while connecting to PostgreSQL&quot;</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">connection</span><span class="p">):</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;PostgreSQL connection is closed&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Error while connecting to PostgreSQL connection to server at &quot;localhost&quot; (::1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
connection to server at &quot;localhost&quot; (127.0.0.1), port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">line</span> <span class="mi">19</span>
<span class="g g-Whitespace">     </span><span class="mi">17</span>     <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error while connecting to PostgreSQL&quot;</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">18</span> <span class="k">finally</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">19</span>     <span class="k">if</span> <span class="p">(</span><span class="n">connection</span><span class="p">):</span>
<span class="g g-Whitespace">     </span><span class="mi">20</span>         <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="g g-Whitespace">     </span><span class="mi">21</span>         <span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="ne">NameError</span>: name &#39;connection&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">Crear</span> <span class="pre">una</span> <span class="pre">tabla</span></code></strong></p>
<ul class="simple">
<li><p>El siguiente programa de Python se utilizará para <code class="docutils literal notranslate"><span class="pre">crear</span> <span class="pre">una</span> <span class="pre">tabla</span> <span class="pre">en</span> <span class="pre">la</span> <span class="pre">base</span> <span class="pre">de</span> <span class="pre">datos</span></code> previamente creada</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">psycopg2</span>

<span class="n">connection</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s2">&quot;undatascience-user&quot;</span><span class="p">,</span>
                                  <span class="n">password</span><span class="o">=</span><span class="s2">&quot;undatascience-password&quot;</span><span class="p">,</span>
                                  <span class="n">host</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
                                  <span class="n">port</span><span class="o">=</span><span class="s2">&quot;5432&quot;</span><span class="p">,</span>
                                  <span class="n">database</span><span class="o">=</span><span class="s2">&quot;undatascience-db&quot;</span><span class="p">)</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;DROP TABLE IF EXISTS company&#39;&#39;&#39;</span><span class="p">)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;CREATE TABLE company(</span>
<span class="s1">id SERIAL PRIMARY KEY NOT NULL,</span>
<span class="s1">name TEXT NOT NULL,</span>
<span class="s1">age INT NOT NULL,</span>
<span class="s1">address CHAR(50),</span>
<span class="s1">salary REAL);</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Table created successfully&quot;</span><span class="p">)</span>

<span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Nótese en <code class="docutils literal notranslate"><span class="pre">pgAdmin</span></code> que la tabla fué creada exitosamente, dentro de la base de datos nombrada <code class="docutils literal notranslate"><span class="pre">dvdrental</span></code>. También puede visualizar los cambios ocurridos en el dashboard de <code class="docutils literal notranslate"><span class="pre">pgAdmin</span></code>.</p></li>
</ul>
<figure class="align-center" id="companytable-createdinrailway">
<a class="reference internal image-reference" href="_images/companytable_createdinrailway.png"><img alt="_images/companytable_createdinrailway.png" src="_images/companytable_createdinrailway.png" style="width: 253.8px; height: 453.6px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 76 </span><span class="caption-text">Creación de tabla en base de datos PostgreSQL en <code class="docutils literal notranslate"><span class="pre">Docker</span></code>.</span><a class="headerlink" href="#companytable-createdinrailway" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p><strong><code class="docutils literal notranslate"><span class="pre">Operación</span> <span class="pre">INSERT</span></code></strong></p>
<ul class="simple">
<li><p>El siguiente programa de <code class="docutils literal notranslate"><span class="pre">Python</span></code> muestra cómo podemos crear registros en nuestra tabla <code class="docutils literal notranslate"><span class="pre">company</span></code> creada en el ejemplo anterior</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">psycopg2</span>

<span class="n">connection</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s2">&quot;undatascience-user&quot;</span><span class="p">,</span>
                                  <span class="n">password</span><span class="o">=</span><span class="s2">&quot;undatascience-password&quot;</span><span class="p">,</span>
                                  <span class="n">host</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
                                  <span class="n">port</span><span class="o">=</span><span class="s2">&quot;5432&quot;</span><span class="p">,</span>
                                  <span class="n">database</span><span class="o">=</span><span class="s2">&quot;undatascience-db&quot;</span><span class="p">)</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO company (name, age, address, salary) VALUES (&#39;Paul&#39;, 32, &#39;California&#39;, 20000.00 )&quot;</span><span class="p">);</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO company (name, age, address, salary) VALUES (&#39;Allen&#39;, 25, &#39;Texas&#39;, 15000.00 )&quot;</span><span class="p">);</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO company (name, age, address, salary) VALUES (&#39;Teddy&#39;, 23, &#39;Norway&#39;, 20000.00 )&quot;</span><span class="p">);</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO company (name, age, address, salary) </span><span class="se">\</span>
<span class="s2">                VALUES (&#39;Mark&#39;, 25, &#39;Rich-Mond &#39;, 65000.00 )&quot;</span><span class="p">);</span>

<span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Records created successfully&quot;</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Observe desde <code class="docutils literal notranslate"><span class="pre">pgAdmin</span></code> que los registros han sido actualizados efectivamente, con los valores insertados en la tabla creada</p></li>
</ul>
<figure class="align-center" id="insertedvaluesin-companytable-fig">
<a class="reference internal image-reference" href="_images/insertedvaluesin_companytable.png"><img alt="_images/insertedvaluesin_companytable.png" src="_images/insertedvaluesin_companytable.png" style="width: 864.0px; height: 448.65000000000003px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 77 </span><span class="caption-text">Filas agregadas a la base de datos usando <code class="docutils literal notranslate"><span class="pre">INSERT</span> <span class="pre">INTO</span></code>.</span><a class="headerlink" href="#insertedvaluesin-companytable-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p><strong><code class="docutils literal notranslate"><span class="pre">Operación</span> <span class="pre">SELECT</span></code></strong></p>
<ul class="simple">
<li><p>El siguiente programa de <code class="docutils literal notranslate"><span class="pre">Python</span></code> muestra cómo podemos obtener y mostrar registros de nuestra tabla <code class="docutils literal notranslate"><span class="pre">company</span></code> creada en el ejemplo anterior</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">psycopg2</span>

<span class="n">connection</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s2">&quot;undatascience-user&quot;</span><span class="p">,</span>
                                  <span class="n">password</span><span class="o">=</span><span class="s2">&quot;undatascience-password&quot;</span><span class="p">,</span>
                                  <span class="n">host</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
                                  <span class="n">port</span><span class="o">=</span><span class="s2">&quot;5432&quot;</span><span class="p">,</span>
                                  <span class="n">database</span><span class="o">=</span><span class="s2">&quot;undatascience-db&quot;</span><span class="p">)</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT id, name, address, salary FROM company&quot;</span><span class="p">)</span>
<span class="n">rows</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;id = &quot;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;name = &quot;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;address = &quot;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;salary = &quot;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Operation done successfully&quot;</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">Operación</span> <span class="pre">UPDATE</span></code></strong></p>
<ul class="simple">
<li><p>El siguiente código de <code class="docutils literal notranslate"><span class="pre">Python</span></code> muestra cómo podemos utilizar la sentencia <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> para actualizar cualquier registro y luego obtener y mostrar los registros actualizados de nuestra tabla <code class="docutils literal notranslate"><span class="pre">company</span></code></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">psycopg2</span>

<span class="n">connection</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s2">&quot;undatascience-user&quot;</span><span class="p">,</span>
                                  <span class="n">password</span><span class="o">=</span><span class="s2">&quot;undatascience-password&quot;</span><span class="p">,</span>
                                  <span class="n">host</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
                                  <span class="n">port</span><span class="o">=</span><span class="s2">&quot;5432&quot;</span><span class="p">,</span>
                                  <span class="n">database</span><span class="o">=</span><span class="s2">&quot;undatascience-db&quot;</span><span class="p">)</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE company set salary = 25000.00 where id = 1&quot;</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Total number of rows updated :&quot;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT id, name, address, salary FROM company&quot;</span><span class="p">)</span>
<span class="n">rows</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;id = &quot;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;name = &quot;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;address = &quot;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;salary = &quot;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Operation done successfully&quot;</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">Operación</span> <span class="pre">DELETE</span></code></strong></p>
<ul class="simple">
<li><p>El siguiente código de <code class="docutils literal notranslate"><span class="pre">Python</span></code> muestra cómo podemos utilizar la sentencia <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> para eliminar cualquier registro y luego obtener y mostrar los registros restantes de nuestra tabla <code class="docutils literal notranslate"><span class="pre">company</span></code></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">psycopg2</span>

<span class="n">connection</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s2">&quot;undatascience-user&quot;</span><span class="p">,</span>
                                  <span class="n">password</span><span class="o">=</span><span class="s2">&quot;undatascience-password&quot;</span><span class="p">,</span>
                                  <span class="n">host</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
                                  <span class="n">port</span><span class="o">=</span><span class="s2">&quot;5432&quot;</span><span class="p">,</span>
                                  <span class="n">database</span><span class="o">=</span><span class="s2">&quot;undatascience-db&quot;</span><span class="p">)</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM company where id = 2;&quot;</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Total number of rows deleted :&quot;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT id, name, address, salary FROM company&quot;</span><span class="p">)</span>
<span class="n">rows</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;id = &quot;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;name = &quot;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;address = &quot;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;salary = &quot;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Operation done successfully&quot;</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<section id="importar-un-archivo-csv-o-un-pandas-dataframe-en-sqlite">
<h2>Importar un archivo CSV o un pandas DataFrame en SQLite<a class="headerlink" href="#importar-un-archivo-csv-o-un-pandas-dataframe-en-sqlite" title="Permalink to this heading">#</a></h2>
<div class="admonition-introduccion admonition">
<p class="admonition-title">Introducción</p>
<ul class="simple">
<li><p>Una alternativa a PostgreSQL es <code class="docutils literal notranslate"><span class="pre">SQLite</span></code>. <code class="docutils literal notranslate"><span class="pre">SQLite</span></code> es una herramienta de software de código abierto que posibilita el <code class="docutils literal notranslate"><span class="pre">almacenamiento</span> <span class="pre">de</span> <span class="pre">datos</span> <span class="pre">en</span> <span class="pre">dispositivos</span> <span class="pre">integrados</span> <span class="pre">de</span> <span class="pre">manera</span> <span class="pre">simple,</span> <span class="pre">eficiente</span> <span class="pre">y</span> <span class="pre">rápida</span></code>, incluso en dispositivos con recursos de hardware limitados, como PDAs o teléfonos móviles. <code class="docutils literal notranslate"><span class="pre">SQLite</span> <span class="pre">es</span> <span class="pre">capaz</span> <span class="pre">de</span> <span class="pre">respaldar</span> <span class="pre">desde</span> <span class="pre">las</span> <span class="pre">consultas</span> <span class="pre">SQL</span> <span class="pre">más</span> <span class="pre">básicas</span> <span class="pre">hasta</span> <span class="pre">las</span> <span class="pre">más</span> <span class="pre">complejas,</span> <span class="pre">y</span> <span class="pre">lo</span> <span class="pre">más</span> <span class="pre">destacado</span> <span class="pre">es</span> <span class="pre">que</span> <span class="pre">se</span> <span class="pre">integra</span> <span class="pre">sin</span> <span class="pre">dificultades</span> <span class="pre">tanto</span> <span class="pre">en</span> <span class="pre">dispositivos</span> <span class="pre">móviles</span> <span class="pre">como</span> <span class="pre">en</span> <span class="pre">sistemas</span> <span class="pre">de</span> <span class="pre">escritorio</span></code>, sin necesidad de procesos complicados de importación y exportación de datos. La compatibilidad total entre diversas plataformas garantiza que la portabilidad entre dispositivos y sistemas sea sin inconvenientes.</p></li>
</ul>
</div>
<ul class="simple">
<li><p>Para instalar SQLite debe visitar el sitio web oficial (ver <a class="reference external" href="https://www.sqlite.org/download.html">SQLite download</a>). <code class="docutils literal notranslate"><span class="pre">SQLite</span></code> ofrece varias herramientas para trabajar en distintas plataformas, como <code class="docutils literal notranslate"><span class="pre">Windows,</span> <span class="pre">Linux</span></code> y <code class="docutils literal notranslate"><span class="pre">Mac</span></code>. Debe seleccionar la versión adecuada para descargarla. Por ejemplo, para trabajar con <code class="docutils literal notranslate"><span class="pre">SQLite</span> <span class="pre">en</span> <span class="pre">Windows</span></code>, debe descargar el programa de shell de línea de comandos como se muestra en la siguiente captura de pantalla.</p></li>
</ul>
<figure class="align-center" id="sqlite-download-fig">
<img alt="_images/sqlite_download.png" src="_images/sqlite_download.png" />
</figure>
<ul class="simple">
<li><p>El archivo <code class="docutils literal notranslate"><span class="pre">sqlite-tools-win32-x86-3430200.zip</span></code> descargado del sitio web de <code class="docutils literal notranslate"><span class="pre">SQLite</span></code> debe ser descomprimido en en una carpeta que puede nombrar como <code class="docutils literal notranslate"><span class="pre">sqlite</span></code> dentro del disco local <code class="docutils literal notranslate"><span class="pre">C</span></code> (<code class="docutils literal notranslate"><span class="pre">C:\&gt;sqlite</span></code>). Luego agregue la ruta de esta carpeta a las variables de entorno (<code class="docutils literal notranslate"><span class="pre">PATH</span> <span class="pre">environment</span> <span class="pre">variable</span></code>) de windows.</p></li>
</ul>
<figure class="align-center" id="pathenv-windows-fig">
<a class="reference internal image-reference" href="_images/pathenv_windows.png"><img alt="_images/pathenv_windows.png" src="_images/pathenv_windows.png" style="width: 556.8000000000001px; height: 612.8000000000001px;" /></a>
</figure>
<ul class="simple">
<li><p>Para verificar que la instalación fue realizada correctamente, debe ejecutar desde la consola de <code class="docutils literal notranslate"><span class="pre">PowerShell</span></code> la orden <code class="docutils literal notranslate"><span class="pre">sqlite3</span></code></p></li>
</ul>
<figure class="align-center" id="sqlite3-test-fig">
<img alt="_images/sqlite3_test.png" src="_images/sqlite3_test.png" />
</figure>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="kn">from</span> <span class="nn">sqlite3</span> <span class="kn">import</span> <span class="n">Error</span>

<span class="k">def</span> <span class="nf">create_connection</span><span class="p">(</span><span class="n">db_file</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; create a database connection to a SQLite database &quot;&quot;&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_file</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">sqlite3</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Error</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">conn</span><span class="p">:</span>
            <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">create_connection</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;sqlitedb.db&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>En éste ejemplo vamos a importar un archivo <code class="docutils literal notranslate"><span class="pre">CSV</span></code> en <code class="docutils literal notranslate"><span class="pre">SQLite</span></code> utilizando la función <code class="docutils literal notranslate"><span class="pre">to_sql()</span></code> de la clase <code class="docutils literal notranslate"><span class="pre">sqlalchemy</span></code>. El <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> a usar corresponde al precio de <code class="docutils literal notranslate"><span class="pre">Ethereum</span></code> en <code class="docutils literal notranslate"><span class="pre">USD</span></code>. Vamos a importar el archivo en una tabla en nuestra base de datos y luego vamos a utilizar esta tabla para realizar un gráfico de <code class="docutils literal notranslate"><span class="pre">candlesticks</span></code>. Si desea ver los distinto tipos de variables numéricas y formatos de fechas en <code class="docutils literal notranslate"><span class="pre">SQLite</span></code> ver el siguiente par de links: <a class="reference external" href="https://www.postgresql.org/docs/9.5/datatype-numeric.html">Formatos numéricos</a>, <a class="reference external" href="https://www.postgresql.org/docs/9.1/datatype-datetime.html">Formatos fechas</a></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_ETH</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/lihkir/Data/main/ETH-USD.csv&quot;</span><span class="p">)</span>
<span class="n">df_ETH</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_ETH</span> <span class="o">=</span> <span class="n">df_ETH</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s1">&#39;Date&#39;</span><span class="p">:</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> 
               <span class="s1">&#39;Open&#39;</span><span class="p">:</span> <span class="s1">&#39;open&#39;</span><span class="p">,</span> 
               <span class="s1">&#39;High&#39;</span><span class="p">:</span> <span class="s1">&#39;high&#39;</span><span class="p">,</span> 
               <span class="s1">&#39;Low&#39;</span><span class="p">:</span> <span class="s1">&#39;low&#39;</span><span class="p">,</span> 
               <span class="s1">&#39;Close&#39;</span><span class="p">:</span> <span class="s1">&#39;close&#39;</span><span class="p">,</span> 
               <span class="s1">&#39;Adj Close&#39;</span><span class="p">:</span> <span class="s1">&#39;adj_close&#39;</span><span class="p">,</span> 
               <span class="s1">&#39;Volume&#39;</span><span class="p">:</span> <span class="s1">&#39;volume&#39;</span><span class="p">},</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df_ETH</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">names_list</span> <span class="o">=</span> <span class="n">df_ETH</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite:///sqlitedb.db&#39;</span><span class="p">)</span>
<span class="n">df_ETH</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s1">&#39;ethereum&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="p">,</span> <span class="n">if_exists</span> <span class="o">=</span> <span class="s1">&#39;replace&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;multi&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<figure class="align-center" id="queryethedata-railway-fig">
<a class="reference internal image-reference" href="_images/queryethedata_railway.png"><img alt="_images/queryethedata_railway.png" src="_images/queryethedata_railway.png" style="width: 863.5500000000001px; height: 462.15000000000003px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 78 </span><span class="caption-text">Visualización de la tabla <code class="docutils literal notranslate"><span class="pre">ethereum</span></code> creada en <code class="docutils literal notranslate"><span class="pre">SQLite</span></code>, usando el gestor <code class="docutils literal notranslate"><span class="pre">DBeaver</span></code>.</span><a class="headerlink" href="#queryethedata-railway-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;sqlitedb.db&#39;</span><span class="p">)</span>

<span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM ethereum;&quot;</span><span class="p">)</span>
<span class="n">close</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">ETH_sql</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">close</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">ETH_sql</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>

<span class="n">ETH_names</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">cnames_list</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;SELECT * FROM ethereum&#39;&#39;&#39;</span><span class="p">)</span> 
<span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">cnames_list</span><span class="o">.</span><span class="n">description</span><span class="p">:</span> 
    <span class="n">ETH_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">column</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    
<span class="n">display</span><span class="p">(</span><span class="n">ETH_names</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Operation done successfully&quot;</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ETH_sql</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">names_list</span> 
<span class="n">ETH_sql</span> <span class="o">=</span> <span class="n">ETH_sql</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span> <span class="o">=</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
<span class="n">ETH_sql</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Para realizar la siguiente figura necesitará instalar las siguientes librerías</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>plotly
pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>kaleido
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">plotly.graph_objects</span> <span class="k">as</span> <span class="nn">go</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="n">go</span><span class="o">.</span><span class="n">Candlestick</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">ETH_sql</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">],</span>
                                     <span class="nb">open</span> <span class="o">=</span> <span class="n">ETH_sql</span><span class="p">[</span><span class="s1">&#39;open&#39;</span><span class="p">],</span> 
                                     <span class="n">high</span> <span class="o">=</span> <span class="n">ETH_sql</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
                                     <span class="n">low</span> <span class="o">=</span> <span class="n">ETH_sql</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span> 
                                     <span class="n">close</span> <span class="o">=</span> <span class="n">ETH_sql</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">])</span>
                     <span class="p">])</span>
<span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Ethereum USD (ETH-USD)&quot;</span><span class="p">,</span>
    <span class="n">xaxis_title</span><span class="o">=</span><span class="s2">&quot;Day&quot;</span><span class="p">,</span>
    <span class="n">yaxis_title</span><span class="o">=</span><span class="s2">&quot;ETH-USD&quot;</span><span class="p">,</span>
    <span class="n">font</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">family</span><span class="o">=</span><span class="s2">&quot;Courier New, monospace&quot;</span><span class="p">,</span>
        <span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="s2">&quot;RebeccaPurple&quot;</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">xaxis_rangeslider_visible</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="ejercicio-para-entregar">
<h1>Ejercicio para entregar<a class="headerlink" href="#ejercicio-para-entregar" title="Permalink to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>El siguiente informe debe ser presentado usando <code class="docutils literal notranslate"><span class="pre">Jupyter</span> <span class="pre">Book</span></code>. Por lo tanto, la entrega realizada corresponde a un link de una página de <code class="docutils literal notranslate"><span class="pre">GitHub</span></code> similar a la del presente curso. Debe crear una conexión con <code class="docutils literal notranslate"><span class="pre">pgAdmin</span></code> para mostrar las tablas creadas, <code class="docutils literal notranslate"><span class="pre">agregar</span> <span class="pre">imágenes</span></code>.</p></li>
</ol>
<ol class="arabic simple" start="2">
<li><p>Crear una instancia de base de datos en <code class="docutils literal notranslate"><span class="pre">Docker</span></code> la cual utilizará para la solución de los siguientes ejercicios. Luego de finalizar con cada una de las consultas requeridas, deberá exportar la imagen de la base de datos a un archivo nombrado como, <code class="docutils literal notranslate"><span class="pre">primernombre_primerapellido_imagendocker.tar</span></code>, ejemplo: <code class="docutils literal notranslate"><span class="pre">lihki_rubio_imagendocker.tar</span></code>.</p></li>
</ol>
<ol class="arabic simple" start="3">
<li><p>La imagen <code class="docutils literal notranslate"><span class="pre">Docker</span></code> y la base de datos que debe crear debe contar con la siguiente información de conexión. Nótese que debe usar la contraseña <code class="docutils literal notranslate"><span class="pre">password</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Host</span></code>: localhost</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Port</span></code>: 5342</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Database</span> <span class="pre">Name</span></code>: myname_db</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">User</span> <span class="pre">Name</span></code>: myname_user</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Password</span></code>: password</p></li>
</ul>
</li>
</ol>
<ol class="arabic simple" start="4">
<li><p>Cada una de las siguientes consultas deben ser realizadas desde <code class="docutils literal notranslate"><span class="pre">Python</span></code> usando la <code class="docutils literal notranslate"><span class="pre">API</span> <span class="pre">psycopg2</span></code>. Por lo tanto, debe crear una <code class="docutils literal notranslate"><span class="pre">conexión</span></code> y un <code class="docutils literal notranslate"><span class="pre">cursor</span></code> previamente para realizar cada una de las siguientes consultas:</p></li>
</ol>
<p>I) Crear la tabla nombrada: <code class="docutils literal notranslate"><span class="pre">employees</span></code> y explicar que tarea realiza la consulta realizada y mostrar en pantalla la tabla</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">employees</span>
<span class="w">   </span><span class="p">(</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="nb">INTEGER</span>
<span class="w">   </span><span class="p">,</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="w">   </span><span class="p">,</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
<span class="w">   </span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
<span class="w">   </span><span class="p">,</span><span class="w"> </span><span class="n">phone_number</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="w">   </span><span class="p">,</span><span class="w"> </span><span class="n">hire_date</span><span class="w"> </span><span class="nb">DATE</span>
<span class="w">   </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="w">   </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="nb">NUMERIC</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="w">   </span><span class="p">,</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="nb">NUMERIC</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="w">   </span><span class="p">,</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="nb">INTEGER</span>
<span class="w">   </span><span class="p">,</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="nb">INTEGER</span>
<span class="w">   </span><span class="p">)</span><span class="w"> </span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">emp_emp_id_pk</span>
<span class="w">         </span><span class="k">ON</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">(</span><span class="n">employee_id</span><span class="p">)</span><span class="w"> </span><span class="p">;</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">ADD</span>
<span class="w">   </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">employee_id</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<span class="k">SELECT</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="p">;</span>
</pre></div>
</div>
<p>II) Crear la tabla <code class="docutils literal notranslate"><span class="pre">courses</span></code> con las siguientes columnas:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">course_id</span></code> - integer y primary key</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">course_name</span></code> - valores alfanuméricos o de cadena de hasta 60 caracteres</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">course_author</span></code> - nombre del autor de hasta 40 caracteres</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">course_status</span></code> - published, draft, inactive.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">course_published_dt</span></code> - valor de tipo fecha.</p></li>
</ul>
<p>III) Insertar datos</p>
<p>Inserte los datos en <code class="docutils literal notranslate"><span class="pre">courses</span></code> utilizando los datos proporcionados. Asegúrese de que el <code class="docutils literal notranslate"><span class="pre">id</span></code> es generado por el sistema. No olvide refrescar la información de la base de datos.</p>
<figure class="align-center" id="tableforexercise-python-fig">
<a class="reference internal image-reference" href="_images/tableforexercise_python.png"><img alt="_images/tableforexercise_python.png" src="_images/tableforexercise_python.png" style="width: 531.2px; height: 660.8000000000001px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 79 </span><span class="caption-text">Filas a insertar en la tabla <code class="docutils literal notranslate"><span class="pre">courses</span></code></span><a class="headerlink" href="#tableforexercise-python-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>IV) Borre todos los cursos que <code class="docutils literal notranslate"><span class="pre">no</span> <span class="pre">estén</span> <span class="pre">en</span> <span class="pre">modo</span> <span class="pre">borrador</span> <span class="pre">ni</span> <span class="pre">publicados</span></code>. Proporcione la sentencia de borrado como respuesta para este ejercicio en el <code class="docutils literal notranslate"><span class="pre">Jupyter</span> <span class="pre">Book</span></code>. Para validar, obtenga el recuento de todos los cursos publicados por autor y asegúrese de que la salida está ordenada en forma descendente por recuento.</p>
<p>VI) Crear la base de datos <code class="docutils literal notranslate"><span class="pre">users</span></code></p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">users</span><span class="p">(</span>
<span class="w">    </span><span class="n">user_id</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="n">user_first_name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
<span class="w">    </span><span class="n">user_last_name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
<span class="w">    </span><span class="n">user_email_id</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="n">user_gender</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
<span class="w">    </span><span class="n">user_unique_id</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span>
<span class="w">    </span><span class="n">user_phone_no</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
<span class="w">    </span><span class="n">user_dob</span><span class="w"> </span><span class="nb">DATE</span><span class="p">,</span>
<span class="w">    </span><span class="n">created_ts</span><span class="w"> </span><span class="k">TIMESTAMP</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Inserte los siguientes valores</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">user_first_name</span><span class="p">,</span><span class="w"> </span><span class="n">user_last_name</span><span class="p">,</span><span class="w"> </span><span class="n">user_email_id</span><span class="p">,</span><span class="w"> </span><span class="n">user_gender</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">user_unique_id</span><span class="p">,</span><span class="w"> </span><span class="n">user_phone_no</span><span class="p">,</span><span class="w"> </span><span class="n">user_dob</span><span class="p">,</span><span class="w"> </span><span class="n">created_ts</span>
<span class="p">)</span><span class="w"> </span><span class="k">VALUES</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Giuseppe&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Bode&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gbode0@imgur.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;M&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;88833-8759&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+86 (764) 443-1967&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1973-05-31&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2018-04-15 12:13:38&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Lexy&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Gisbey&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;lgisbey1@mail.ru&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;F&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;262501-029&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+86 (751) 160-3742&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2003-05-31&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2020-12-29 06:44:09&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Karel&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Claringbold&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;kclaringbold2@yale.edu&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;F&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;391-33-2823&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+62 (445) 471-2682&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1985-11-28&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2018-11-19 00:04:08&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Marv&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Tanswill&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;mtanswill3@dedecms.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;F&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1195413-80&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+62 (497) 736-6802&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1998-05-24&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2018-11-19 16:29:43&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Gertie&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Espinoza&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gespinoza4@nationalgeographic.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;M&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;471-24-6869&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+249 (687) 506-2960&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1997-10-30&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2020-01-25 21:31:10&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Saleem&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Danneil&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;sdanneil5@guardian.co.uk&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;F&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;192374-933&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+63 (810) 321-0331&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1992-03-08&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2020-11-07 19:01:14&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Rickert&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;O&#39;&#39;Shiels&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;roshiels6@wikispaces.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;M&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;749-27-47-52&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+86 (184) 759-3933&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1972-11-01&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2018-03-20 10:53:24&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Cybil&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Lissimore&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;clissimore7@pinterest.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;M&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;461-75-4198&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+54 (613) 939-6976&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1978-03-03&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2019-12-09 14:08:30&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Melita&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Rimington&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;mrimington8@mozilla.org&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;F&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;892-36-676-2&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+48 (322) 829-8638&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1995-12-15&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2018-04-03 04:21:33&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Benetta&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Nana&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;bnana9@google.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;M&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;197-54-1646&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+420 (934) 611-0020&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1971-12-07&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2018-10-17 21:02:51&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Gregorius&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Gullane&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ggullanea@prnewswire.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;F&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;232-55-52-58&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+62 (780) 859-1578&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1973-09-18&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2020-01-14 23:38:53&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Una&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Glayzer&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;uglayzerb@pinterest.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;M&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;898-84-336-6&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+380 (840) 437-3981&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1983-05-26&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2019-09-17 03:24:21&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Jamie&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Vosper&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;jvosperc@umich.edu&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;M&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;247-95-68-44&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+81 (205) 723-1942&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1972-03-18&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2020-07-23 16:39:33&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Calley&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Tilson&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ctilsond@issuu.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;F&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;415-48-894-3&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+229 (698) 777-4904&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1987-06-12&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2020-06-05 12:10:50&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Peadar&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Gregorowicz&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;pgregorowicze@omniture.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;M&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;403-39-5-869&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+7 (267) 853-3262&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1996-09-21&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2018-05-29 23:51:31&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Jeanie&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Webling&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;jweblingf@booking.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;F&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;399-83-05-03&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+351 (684) 413-0550&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1994-12-27&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2018-02-09 01:31:11&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Yankee&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Jelf&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;yjelfg@wufoo.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;F&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;607-99-0411&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+1 (864) 112-7432&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1988-11-13&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2019-09-16 16:09:12&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Blair&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Aumerle&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;baumerleh@toplist.cz&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;F&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;430-01-578-5&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+7 (393) 232-1860&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1979-11-09&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2018-10-28 19:25:35&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Pavlov&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Steljes&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;psteljesi@macromedia.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;F&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;571-09-6181&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+598 (877) 881-3236&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1991-06-24&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2020-09-18 05:34:31&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Darn&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Hadeke&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;dhadekej@last.fm&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;M&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;478-32-02-87&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+370 (347) 110-4270&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1984-09-04&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2018-02-10 12:56:00&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Wendell&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Spanton&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;wspantonk@de.vu&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;F&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+84 (301) 762-1316&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1973-07-24&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2018-01-30 01:20:11&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Carlo&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Yearby&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;cyearbyl@comcast.net&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;F&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+55 (288) 623-4067&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1974-11-11&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2018-06-24 03:18:40&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Sheila&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Evitts&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;sevittsm@webmd.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;830-40-5287&#39;</span><span class="p">,</span>
<span class="w">     </span><span class="k">null</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1977-03-01&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2020-07-20 09:59:41&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Sianna&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Lowdham&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;slowdhamn@stanford.edu&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;778-0845&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="k">null</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1985-12-23&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2018-06-29 02:42:49&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="p">(</span><span class="s1">&#39;Phylys&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Aslie&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;paslieo@qq.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;M&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;368-44-4478&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">     </span><span class="s1">&#39;+86 (765) 152-8654&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1984-03-22&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2019-10-01 01:34:28&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>VII) Obtenga el número de usuarios creados por año. Utilice la tabla de usuarios para este ejercicio.</p>
<ul class="simple">
<li><p>La salida debe contener el año de 4 dígitos y el recuento.</p></li>
<li><p>Use funciones específicas de fecha para obtener el año usando <code class="docutils literal notranslate"><span class="pre">created_ts</span></code>.</p></li>
<li><p>Asegúrese de definir <code class="docutils literal notranslate"><span class="pre">alias</span></code> a las columnas como <code class="docutils literal notranslate"><span class="pre">created_year</span></code> y <code class="docutils literal notranslate"><span class="pre">user_count</span></code> respectivamente.</p></li>
<li><p>Los datos deben ordenarse de forma ascendente por <code class="docutils literal notranslate"><span class="pre">created_year</span></code>.</p></li>
<li><p>Cuando ejecutes la consulta usando el entorno <code class="docutils literal notranslate"><span class="pre">Jupyter</span></code>, puede que tenga decimales para los enteros. Por lo tanto, puede mostrar los resultados incluso con decimales.</p></li>
</ul>
<figure class="align-center" id="outputexercisevii-python-fig">
<a class="reference internal image-reference" href="_images/outputexercisevii_python.png"><img alt="_images/outputexercisevii_python.png" src="_images/outputexercisevii_python.png" style="width: 151.79999999999998px; height: 178.2px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 80 </span><span class="caption-text">Ejemplo de salida que debe obtener a partir de este ejercicio.</span><a class="headerlink" href="#outputexercisevii-python-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>VIII) Obtenga los días de nacimiento de todos los usuarios nacidos en el mes <code class="docutils literal notranslate"><span class="pre">May</span></code>.</p>
<ul class="simple">
<li><p>Utilice la tabla <code class="docutils literal notranslate"><span class="pre">users</span></code> para este ejercicio.</p></li>
<li><p>La salida debe contener <code class="docutils literal notranslate"><span class="pre">user_id,</span> <span class="pre">user_dob,</span> <span class="pre">user_email_id</span></code> y <code class="docutils literal notranslate"><span class="pre">user_day_of_birth</span></code>.</p></li>
<li><p>Utilice funciones específicas de fecha para obtener el mes utilizando <code class="docutils literal notranslate"><span class="pre">user_dob</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">user_day_of_birth</span></code> debe ser un día completo con el primer carácter en mayúsculas, por ejemplo <code class="docutils literal notranslate"><span class="pre">Tuesday</span></code>.</p></li>
<li><p>Los datos deben ordenarse por día dentro del mes <code class="docutils literal notranslate"><span class="pre">May</span></code>.</p></li>
</ul>
<figure class="align-center" id="maybirths-exercise-fig">
<a class="reference internal image-reference" href="_images/maybirths_exercise.png"><img alt="_images/maybirths_exercise.png" src="_images/maybirths_exercise.png" style="width: 382.8px; height: 238.2px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 81 </span><span class="caption-text">Ejemplo de salida para nacimientos en el mes de mayo.</span><a class="headerlink" href="#maybirths-exercise-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>IX) Obtenga los nombres e ids de correo electrónico de los usuarios añadidos en el año 2019.</p>
<ul class="simple">
<li><p>Utilice la tabla <code class="docutils literal notranslate"><span class="pre">users</span></code> para este ejercicio.</p></li>
<li><p>La salida debe contener <code class="docutils literal notranslate"><span class="pre">user_id,</span> <span class="pre">user_name,</span> <span class="pre">user_email_id,</span> <span class="pre">created_ts,</span> <span class="pre">created_year</span></code>.</p></li>
<li><p>Utilice funciones específicas de fecha para obtener el año utilizando <code class="docutils literal notranslate"><span class="pre">created_ts</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">user_name</span></code> es una columna derivada de concatenar <code class="docutils literal notranslate"><span class="pre">user_first_name</span></code> y <code class="docutils literal notranslate"><span class="pre">user_last_name</span></code> con un espacio en medio.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">user_name</span></code> debe tener valores en mayúsculas.</p></li>
<li><p>Los datos deben ordenarse en forma ascendente por <code class="docutils literal notranslate"><span class="pre">user_name</span></code></p></li>
</ul>
<figure class="align-center" id="usernameorder-exercise-fig">
<a class="reference internal image-reference" href="_images/usernameorder_exercise.png"><img alt="_images/usernameorder_exercise.png" src="_images/usernameorder_exercise.png" style="width: 520.1999999999999px; height: 231.6px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 82 </span><span class="caption-text">Ejemplo de salida para nombres, ids, correo electrónico y fechas.</span><a class="headerlink" href="#usernameorder-exercise-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>X) Obtenga el número de usuarios por género. Utilice la tabla de <code class="docutils literal notranslate"><span class="pre">users</span></code> para este ejercicio.</p>
<ul class="simple">
<li><p>La salida debe contener el <code class="docutils literal notranslate"><span class="pre">gender</span></code> y <code class="docutils literal notranslate"><span class="pre">user_count</span></code>.</p></li>
<li><p>Para los hombres la salida debe mostrar <code class="docutils literal notranslate"><span class="pre">Male</span></code> y para las mujeres la salida debe mostrar <code class="docutils literal notranslate"><span class="pre">Female</span></code>.</p></li>
<li><p>Si no se especifica el sexo, se mostrará <code class="docutils literal notranslate"><span class="pre">Not</span> <span class="pre">Specified</span></code></p></li>
<li><p>Los datos deben ordenarse en forma descendente por <code class="docutils literal notranslate"><span class="pre">user_count</span></code>.</p></li>
</ul>
<figure class="align-center" id="outputexercisex-python-fig">
<a class="reference internal image-reference" href="_images/outputexercisex_python.png"><img alt="_images/outputexercisex_python.png" src="_images/outputexercisex_python.png" style="width: 163.79999999999998px; height: 180.6px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 83 </span><span class="caption-text">Ejemplo de salida para el ejercicio X.</span><a class="headerlink" href="#outputexercisex-python-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>XII) Obtenga los 4 últimos dígitos de los ids únicos.</p>
<ul class="simple">
<li><p>Utilice la tabla <code class="docutils literal notranslate"><span class="pre">users</span></code> para este ejercicio.</p></li>
<li><p>El resultado debe contener <code class="docutils literal notranslate"><span class="pre">user_id,</span> <span class="pre">user_unique_id</span></code> y <code class="docutils literal notranslate"><span class="pre">user_unique_id_last4</span></code>.</p></li>
<li><p>Los identificadores únicos son <code class="docutils literal notranslate"><span class="pre">null</span></code> o <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">null</span></code>.</p></li>
<li><p>Los identificadores únicos contienen números y guiones y son de diferente longitud.</p></li>
<li><p>Necesitamos obtener los últimos 4 dígitos descartando los guiones sólo cuando el número de dígitos es al menos 9.</p></li>
<li><p>Si el identificador único es nulo, debe mostrarse <code class="docutils literal notranslate"><span class="pre">Not</span> <span class="pre">Specified</span></code>.</p></li>
<li><p>Después de descartar los guiones, si el identificador único tiene menos de 9 dígitos, debe mostrar <code class="docutils literal notranslate"> <span class="pre">Invalid</span> <span class="pre">Unique</span> <span class="pre">Id</span></code>.</p></li>
<li><p>Los datos deben ordenarse por <code class="docutils literal notranslate"><span class="pre">user_id</span></code>. Es posible que aparezca <code class="docutils literal notranslate"><span class="pre">None</span></code> o <code class="docutils literal notranslate"><span class="pre">null</span></code> para aquellos identificadores de usuario en los que no haya un identificador único para <code class="docutils literal notranslate"><span class="pre">user_unique_id</span></code>.</p></li>
</ul>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="_images/exercisexii_python.png"><img alt="_images/exercisexii_python.png" src="_images/exercisexii_python.png" style="width: 271.8px; height: 252.0px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 84 </span><span class="caption-text">Ejemplo de output para Ejercicio XII.</span><a class="headerlink" href="#id1" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>XIII) Obtenga el recuento de usuarios en función del código de país.</p>
<ul class="simple">
<li><p>Utilice la tabla <code class="docutils literal notranslate"><span class="pre">users</span></code> para este ejercicio.</p></li>
<li><p>La salida debe contener el código de país y el recuento.</p></li>
<li><p>No debe haber ningún <code class="docutils literal notranslate"><span class="pre">+</span></code> en el código de país. Sólo debe contener dígitos.</p></li>
<li><p>Los datos deben ordenarse como números por código de país.</p></li>
<li><p>Debemos descartar <code class="docutils literal notranslate"><span class="pre">user_phone_no</span></code> con valores <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p></li>
</ul>
<figure class="align-center" id="usercountexercisexiii-python-fig">
<a class="reference internal image-reference" href="_images/usercountexercisexiii_python.png"><img alt="_images/usercountexercisexiii_python.png" src="_images/usercountexercisexiii_python.png" style="width: 162.6px; height: 277.2px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 85 </span><span class="caption-text">Ejemplo de output para ejercicio de recuento de usuarios en función del código de país.</span><a class="headerlink" href="#usercountexercisexiii-python-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<ol class="arabic simple" start="5">
<li><p>Importe los datos del precio de <strong><code class="docutils literal notranslate"><span class="pre">Cardano</span> <span class="pre">USD</span> <span class="pre">(ADA-USD)</span></code></strong> en su instancia de base de datos <strong><code class="docutils literal notranslate"><span class="pre">Docker</span></code></strong>, teniendo en cuenta lo explicado durante esta sección. Luego dibuje un <code class="docutils literal notranslate"><span class="pre">gráfico</span> <span class="pre">de</span> <span class="pre">candlestick</span></code> para la criptomoneda. En el siguiente link encontrará el <strong><code class="docutils literal notranslate"><span class="pre">CSV</span></code></strong> de <strong><code class="docutils literal notranslate"><span class="pre">Cardano</span></code></strong>: <a class="reference external" href="https://raw.githubusercontent.com/lihkir/Uninorte/main/AppliedStatisticMS/DataVisualizationRPython/Lectures/Python/PythonDataSets/ADA-USD.csv">Cardano USD (ADA-USD)</a>. Describa lo que puede observar en la serie de tiempo. Realice un análisis exploratorio de datos <code class="docutils literal notranslate"><span class="pre">(EDA)</span></code> para la serie de tiempo.</p></li>
</ol>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "ml_tf"
        },
        kernelOptions: {
            name: "ml_tf",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'ml_tf'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="predictive_model.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Predicción de series de tiempo</p>
      </div>
    </a>
    <a class="right-next"
       href="dash_dataviz.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Introducción a <code class="docutils literal notranslate"><span class="pre">Dash</span></code></p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Introducción a PostreSQL y Docker</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#herramienta-de-administracion-de-bases-de-datos-dbeaver">Herramienta de administración de bases de datos: DBeaver</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instalacion-y-uso-de-docker">Instalación y uso de Docker</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#despliegue-de-base-de-datos-en-railway">Despliegue de Base de Datos en Railway</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#introduccion-a-consultas-sql">Introducción a consultas <code class="docutils literal notranslate"><span class="pre">SQL</span></code></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#restauracion-de-bases-de-datos-dvdrental">Restauración de bases de datos <code class="docutils literal notranslate"><span class="pre">dvdrental</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#consultas-sql">Consultas SQL</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#select">SELECT</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#alias">Alias</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#order-by">ORDER BY</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#select-distinct">SELECT DISTINCT</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#where">WHERE</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#configuracion-de-su-entorno-usando-python-jupyterlab-y-vs-code">Configuración de su entorno usando Python, JupyterLab y VS Code</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#python-api-for-postgresql">Python API for PostgreSQL</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#importar-un-archivo-csv-o-un-pandas-dataframe-en-sqlite">Importar un archivo CSV o un pandas DataFrame en SQLite</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ejercicio-para-entregar">Ejercicio para entregar</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Lihki Rubio PhD in Mathematical Engineering
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright Department of Mathematics and Statistics.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>