

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Introducción a Dash &#8212; Visualización de Datos con Python y R</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'dash_dataviz';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Introducción a PostreSQL y Docker" href="postgresql.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
    
    
      
    
    
    <img src="_static/logo_uninorte.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="_static/logo_uninorte.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    <no title>
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="dataviz_intro.html">Introducción a la visualización de datos con Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="static_dataviz.html">Visualización estática</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive_dataviz.html">De la visualización estática a la interactiva</a></li>
<li class="toctree-l1"><a class="reference internal" href="stratified_dataviz.html">Visualización de datos a través de estratos</a></li>
<li class="toctree-l1"><a class="reference internal" href="geo_dataviz.html">Visualización interactiva de datos geográficos</a></li>
<li class="toctree-l1"><a class="reference internal" href="common_errors.html">Errores comunes al crear visualizaciones interactivas</a></li>
<li class="toctree-l1"><a class="reference internal" href="predictive_model.html">Modelo predictivo con series de tiempo</a></li>
<li class="toctree-l1"><a class="reference internal" href="postgresql.html">Introducción a PostreSQL y Docker</a></li>



<li class="toctree-l1 current active"><a class="current reference internal" href="#">Introducción a <code class="docutils literal notranslate"><span class="pre">Dash</span></code></a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fdash_dataviz.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/dash_dataviz.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Introducción a Dash</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduccion">Introducción</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuracion-de-su-entorno">Configuración de su entorno</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#usando-python-no-miniconda">Usando Python. No Miniconda</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instalacion-de-librerias">Instalación de Librerías</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#diseno-de-dash">Diseño de Dash</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mas-informacion-sobre-los-componentes-html">Más información sobre los componentes HTML</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#componentes-reutilizables">Componentes reutilizables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mas-informacion-sobre-la-visualizacion">Más información sobre la visualización</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#markdown">Markdown</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#componentes-principales">Componentes principales</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#callbacks-basicos-dash">Callbacks básicos Dash</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dash-app-layout-con-figura-y-sliderm">Dash App Layout con Figura y Sliderm</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aplicacion-dash-con-multiples-entradas">Aplicación Dash con múltiples entradas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aplicacion-dash-con-multiples-salidas">Aplicación Dash con múltiples salidas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dash-app-con-callbacks-encadenados">Dash App con callbacks encadenados</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dash-app-con-estado">Dash App con Estado</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#actualizar-graficos-al-deslizar-el-cursor">Actualizar gráficos al deslizar el cursor</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dos-ejemplos-de-dash">Dos ejemplos de Dash</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dash-app-para-mapas">Dash App para Mapas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dash-app-financiera">Dash App Financiera</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#despliegue-de-dash-app-usando-docker">Despliegue de Dash App usando Docker</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lista-de-dockerfiles">Lista de Dockerfiles</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejercicio-para-entregar">Ejercicio para entregar</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="introduccion-a-dash">
<h1>Introducción a <code class="docutils literal notranslate"><span class="pre">Dash</span></code><a class="headerlink" href="#introduccion-a-dash" title="Permalink to this heading">#</a></h1>
<section id="introduccion">
<h2>Introducción<a class="headerlink" href="#introduccion" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Descargado 600.000 veces al mes, Dash es el marco original de bajo código para construir rápidamente aplicaciones de datos en <code class="docutils literal notranslate"><span class="pre">Python,</span> <span class="pre">R,</span> <span class="pre">Julia</span> <span class="pre">y</span> <span class="pre">F#.</span></code></p></li>
<li><p>Escrito sobre <code class="docutils literal notranslate"><span class="pre">Plotly.js</span></code> y <code class="docutils literal notranslate"><span class="pre">React.js</span></code>, <code class="docutils literal notranslate"><span class="pre">Dash</span></code> es ideal para construir y desplegar aplicaciones de datos con interfaces de usuario personalizadas en <code class="docutils literal notranslate"><span class="pre">Python,</span> <span class="pre">R,</span> <span class="pre">Julia</span></code> o <code class="docutils literal notranslate"><span class="pre">F#</span></code>. Es particularmente adecuado para cualquiera que trabaje con datos.</p></li>
<li><p>A través de un par de patrones simples, <code class="docutils literal notranslate"><span class="pre">Dash</span></code> abstrae todas las tecnologías y protocolos que se requieren para construir una aplicación web full-stack con visualización de datos interactivos.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Dash</span></code> es lo suficientemente sencillo como para que puedas vincular una interfaz de usuario a tu código <code class="docutils literal notranslate"><span class="pre">Python,</span> <span class="pre">R,</span> <span class="pre">Julia</span></code> o <code class="docutils literal notranslate"><span class="pre">F#</span></code> en menos de 10 minutos.</p></li>
<li><p>Las aplicaciones de <code class="docutils literal notranslate"><span class="pre">Dash</span></code> se muestran en el navegador web. Puedes desplegar tus aplicaciones en máquinas virtuales o clusters Kubernetes y luego compartirlas a través de URLs. Dado que las aplicaciones de <code class="docutils literal notranslate"><span class="pre">Dash</span></code> se ven en el navegador web, <code class="docutils literal notranslate"><span class="pre">Dash</span></code> es intrínsecamente multiplataforma y está preparado para los dispositivos móviles.</p></li>
<li><p>Hay mucho detrás del framework. Para saber más sobre cómo está construido y qué motivó a <code class="docutils literal notranslate"><span class="pre">Dash</span></code>, lea el post <a class="reference external" href="https://medium.com/plotly/dash-is-react-for-python-r-and-julia-c75822d1cc24">Dash es React para Python</a>. Puede encontrar distintos templates de <code class="docutils literal notranslate"><span class="pre">Dash</span></code> en el siguiente link, los cuales puedes utlizar para tus proyectos: <a class="reference external" href="https://dash.gallery/Portal/">Dash Enterprise App Gallery</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Dash</span></code> es una librería de código abierto liberada bajo la permisiva licencia MIT. <code class="docutils literal notranslate"><span class="pre">Plotly</span></code> desarrolla <code class="docutils literal notranslate"><span class="pre">Dash</span></code> y también ofrece una plataforma para escribir y desplegar aplicaciones <code class="docutils literal notranslate"><span class="pre">Dash</span></code> en un entorno empresarial.</p></li>
</ul>
<figure class="align-center" id="dash1-fig">
<a class="reference internal image-reference" href="_images/dash1.png"><img alt="_images/dash1.png" src="_images/dash1.png" style="width: 828.0px; height: 124.19999999999999px;" /></a>
</figure>
</section>
<section id="configuracion-de-su-entorno">
<h2>Configuración de su entorno<a class="headerlink" href="#configuracion-de-su-entorno" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Para la instalación de <code class="docutils literal notranslate"><span class="pre">Dash</span></code> crearemos un entorno especial, en el cual instalaremos cada una de las librerías que necesitaremos en el transcurso de esta sección, en especial la instalación de <code class="docutils literal notranslate"><span class="pre">Dash</span></code> mediante la orden</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>dash
</pre></div>
</div>
<ul class="simple">
<li><p>En su esencia, el propósito principal de los entornos virtuales (virtual enviroment) de <code class="docutils literal notranslate"><span class="pre">Python</span></code> es crear un espacio aislado para cada proyecto particular de <code class="docutils literal notranslate"><span class="pre">Python</span></code>. Esto significa que, cada proyecto puede tener sus propias dependencias, independientemente de las dependencias que tengan los demás proyectos.</p></li>
<li><p>Lo bueno de esto es que no hay límites en el número de entornos que puedes tener, ya que sólo son directorios que contienen unos pocos scripts. Además, son fácilmente creados usando las herramientas de línea de comandos <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> o <code class="docutils literal notranslate"><span class="pre">pyenv</span></code>, en el caso de <code class="docutils literal notranslate"><span class="pre">anaconda</span></code> por medio de <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">create</span></code></p></li>
</ul>
<ul class="simple">
<li><p>En el presente curso, para facilitar la creación de un entorno de desarrollo para <code class="docutils literal notranslate"><span class="pre">TensorFlow</span></code>, se recomienda utilizar <code class="docutils literal notranslate"><span class="pre">Miniconda/Anaconda</span></code>. El sitio web oficial de <code class="docutils literal notranslate"><span class="pre">TensorFlow</span></code> directamente realiza la recomendación que se hace en el presente curso. Además de utilizar la <code class="docutils literal notranslate"><span class="pre">versión</span> <span class="pre">3.9</span> <span class="pre">de</span> <span class="pre">Python</span></code>.</p></li>
</ul>
<figure class="align-center">
<img alt="_images/python_version_tf.png" src="_images/python_version_tf.png" />
</figure>
<ul class="simple">
<li><p>Para crear el entorno virtual usando <code class="docutils literal notranslate"><span class="pre">Miniconda</span></code>, puede utilizar la siguiente orden</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span>dash_project<span class="w"> </span><span class="nv">python</span><span class="o">=</span><span class="m">3</span>.9
</pre></div>
</div>
<figure class="align-center">
<img alt="_images/dash_project_venv.png" src="_images/dash_project_venv.png" />
</figure>
<ul class="simple">
<li><p>Para activar y/o desactivar el entorno virtual de <code class="docutils literal notranslate"><span class="pre">Miniconda</span></code> creado, basta con utilizar las siguientes ordenes. Nótese que no es necesario usar el nombre del entorno virtual para desactivarlo</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>activate<span class="w"> </span>dash_project
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>deactivate
</pre></div>
</div>
</section>
<section id="usando-python-no-miniconda">
<h2>Usando Python. No Miniconda<a class="headerlink" href="#usando-python-no-miniconda" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Solo</span> <span class="pre">en</span> <span class="pre">el</span> <span class="pre">caso</span> <span class="pre">que</span> <span class="pre">no</span> <span class="pre">desee</span> <span class="pre">utilizar</span> <span class="pre">Miniconda</span></code>. Para crear un entorno virtual usando solo <code class="docutils literal notranslate"><span class="pre">Python</span></code>, debe crear una carpeta llamada por ejemplo, <code class="docutils literal notranslate"><span class="pre">python_enviroments</span></code> (o con cualquier otro nombre) en su <code class="docutils literal notranslate"><span class="pre">disco</span> <span class="pre">local</span> <span class="pre">C</span></code> para evitar problemas de sincronización, la cual va a contener todos sus entornos virtuales.</p></li>
<li><p>Escriba la siguiente orden un su terminal, en el caso de <code class="docutils literal notranslate"><span class="pre">Windows</span></code>, en el <strong>Command Prompt</strong> o en el <strong>Windows PowerShell</strong> que tiene un aspecto muy parecido al de <code class="docutils literal notranslate"><span class="pre">Ubuntu</span></code>. Puede elegir la carpeta donde van a reposar todos sus <code class="docutils literal notranslate"><span class="pre">enviroments</span></code>, en este caso <code class="docutils literal notranslate"><span class="pre">python_enviroments</span></code>, y el entorno virtual creado recibe el nombre <code class="docutils literal notranslate"><span class="pre">dash_project</span></code> a manera de ejemplo</p></li>
</ul>
<figure class="align-center" id="dash2-fig">
<img alt="_images/dash2.png" src="_images/dash2.png" />
</figure>
<ul class="simple">
<li><p>Luego debe ubicarse dentro de la carpeta que se creó con el enviroment: <strong>dash_project</strong> usando el comando <code class="docutils literal notranslate"><span class="pre">cd</span></code>, y dentro de esta ubicación debe ejecutar la siguiente orden para activar el enviroment:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span>\<span class="n">Scripts</span>\<span class="n">activate</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Tal como se muestra en la figura. Nótese que en la parte izquierda de la línea de comandos, aparece el <code class="docutils literal notranslate"><span class="pre">nombre</span> <span class="pre">del</span> <span class="pre">enviroment</span> <span class="pre">en</span> <span class="pre">color</span> <span class="pre">verde,</span> <span class="pre">indicando</span> <span class="pre">que</span> <span class="pre">ha</span> <span class="pre">sido</span> <span class="pre">creado</span> <span class="pre">correctamente</span> <span class="pre">y</span> <span class="pre">está</span> <span class="pre">activado</span></code>. Luego de activado el enviroment se puede mover al directorio donde desea realizar el desarrollo de esta sección. Procedemos ahora a instalar algunas librerías, el procedimiento es el mismo cuando usa <code class="docutils literal notranslate"><span class="pre">Miniconda</span></code> o <code class="docutils literal notranslate"><span class="pre">Python</span></code> puro.</p></li>
</ul>
<figure class="align-center" id="dash3-fig">
<img alt="_images/dash3.png" src="_images/dash3.png" />
</figure>
</section>
<section id="instalacion-de-librerias">
<h2>Instalación de Librerías<a class="headerlink" href="#instalacion-de-librerias" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Independientemente de si decidió usar solo <code class="docutils literal notranslate"><span class="pre">Python</span></code> directamente, o <code class="docutils literal notranslate"><span class="pre">Miniconda</span></code> como recomienda <code class="docutils literal notranslate"><span class="pre">TensorFlow</span></code>, el procedimiento de instalación de librerías es el mismo. En su terminal, instale dash.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>dash
</pre></div>
</div>
<ul class="simple">
<li><p>Esto también trae consigo la <code class="docutils literal notranslate"><span class="pre">biblioteca</span> <span class="pre">de</span> <span class="pre">gráficos</span> <span class="pre">plotly</span></code>. Esta biblioteca está en desarrollo activo, así que instala y actualiza con frecuencia. Si prefieres <code class="docutils literal notranslate"><span class="pre">Jupyter</span> <span class="pre">Notebook</span></code> o <code class="docutils literal notranslate"><span class="pre">JupyterLab</span></code> como entorno de desarrollo, te recomendamos instalar jupyter-dash:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>jupyter-dash
</pre></div>
</div>
<ul class="simple">
<li><p>También recomendamos instalar <code class="docutils literal notranslate"><span class="pre">Pandas</span></code>, que es requerido por <code class="docutils literal notranslate"><span class="pre">Plotly</span> <span class="pre">Express</span></code> y utilizado en muchos de nuestros ejemplos.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>pandas
</pre></div>
</div>
<ul class="simple">
<li><p>Estamos listos para crear nuestra primera <code class="docutils literal notranslate"><span class="pre">aplicación</span> <span class="pre">Dash</span></code>. Cada una de estas librerías pueden ser instaladas también a traves de un archivo con requerimientos, el cual podemos crear con el nombre: <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> y copiar en éste sin espacio a la izquierda el nombre de cada librería, así:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>dash
jupyter-dash
pandas
</pre></div>
</div>
<ul class="simple">
<li><p>Luego desde la línea de comando ejecutar</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</pre></div>
</div>
<ul class="simple">
<li><p>Estaremos usando en esta sección <code class="docutils literal notranslate"><span class="pre">JupyterLab</span></code> debido a que es un editor gratuito, que proporciona una <code class="docutils literal notranslate"><span class="pre">interfaz</span> <span class="pre">basada</span> <span class="pre">en</span> <span class="pre">navegador</span></code> que le permite utilizar varios cuadernos juntos de forma eficaz, así como también usar <code class="docutils literal notranslate"><span class="pre">Markdown</span></code>. También estaremos usando el edito <code class="docutils literal notranslate"><span class="pre">VS</span> <span class="pre">Code</span></code>, el cual ofrece soporte para una <code class="docutils literal notranslate"><span class="pre">amplia</span> <span class="pre">variedad</span> <span class="pre">de</span> <span class="pre">lenguajes</span> <span class="pre">de</span> <span class="pre">programación</span></code> y marcos de trabajo, lo que lo hace ideal para proyectos multiplataforma, esto es, puedes <code class="docutils literal notranslate"><span class="pre">usarlo</span> <span class="pre">en</span> <span class="pre">Windows,</span> <span class="pre">Mac</span> <span class="pre">y</span> <span class="pre">Linux</span></code>. Seleccione aquel editor con el que se sienta más cómodo. Para instalar <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">lab</span></code> escriba dentro del mismo enviroment</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>jupyterlab
</pre></div>
</div>
<figure class="align-center" id="dash4-fig">
<img alt="_images/dash4.png" src="_images/dash4.png" />
</figure>
<ul class="simple">
<li><p>Iniciamos <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">lab</span></code> para crear el archivo <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> con las librerías a instalar. Este archivo podemos ir actualizándolo en el transcurso de la sección a medida que una nueva librería va siendo necesaria.</p></li>
</ul>
<figure class="align-center" id="dash5-fig">
<img alt="_images/dash5.png" src="_images/dash5.png" />
</figure>
<figure class="align-center" id="dash6-fig">
<img alt="_images/dash6.png" src="_images/dash6.png" />
</figure>
<ul class="simple">
<li><p>Crea el archivo <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> con librerías a instalar. Nótese que <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">lab</span></code> cuenta también con una terminal integrada, por lo tanto, luego de crear el archivo, puede abrir una terminal dentro de <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">lab</span></code>, activar el enviroment y luego instalar las librerías usando <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-r</span> <span class="pre">requirements.txt</span></code></p></li>
</ul>
<figure class="align-center" id="dash7-fig">
<img alt="_images/dash7.png" src="_images/dash7.png" />
</figure>
</section>
<section id="diseno-de-dash">
<h2>Diseño de Dash<a class="headerlink" href="#diseno-de-dash" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Estudiaremos el diseño a través de seis aplicaciones autónomas. El diseño de las aplicaciones <code class="docutils literal notranslate"><span class="pre">Dash</span></code> de producción puede ser estilizado con <a class="reference external" href="https://plotly.com/dash/design-kit/?tab=templates">Dash Enterprise Design Kit</a>. Las aplicaciones <code class="docutils literal notranslate"><span class="pre">Dash</span></code> se componen de dos partes. La primera parte es el <code class="docutils literal notranslate"><span class="pre">diseño</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">aplicación</span></code> y describe el aspecto de la misma. La segunda parte describe la <code class="docutils literal notranslate"><span class="pre">interactividad</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">aplicación</span></code> y será cubierta más adelante.</p></li>
<li><p>Mantenemos un conjunto de componentes en la biblioteca <code class="docutils literal notranslate"><span class="pre">dash_core_components</span></code> y <code class="docutils literal notranslate"><span class="pre">dash_html_components</span></code> (<code class="docutils literal notranslate"><span class="pre">dash.html</span></code> a partir de <code class="docutils literal notranslate"><span class="pre">Dash</span> <span class="pre">v2.0</span></code>) pero también puedes construir los suyos con <code class="docutils literal notranslate"><span class="pre">JavaScript</span></code> y <code class="docutils literal notranslate"><span class="pre">React.js</span></code>. A lo largo de esta sección, los ejemplos de código <code class="docutils literal notranslate"><span class="pre">Python</span></code> están pensados para ser guardados como archivos y ejecutados usando <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">app.py</span></code>. También puedes usar <code class="docutils literal notranslate"><span class="pre">Jupyter</span></code> con la biblioteca <code class="docutils literal notranslate"><span class="pre">JupyterDash</span></code>.</p></li>
<li><p>Para empezar, crea un archivo llamado <code class="docutils literal notranslate"><span class="pre">app.py</span></code>, copia el código de abajo en él y ejecútalo con <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">app.py</span></code> luego visite <a class="reference external" href="http://127.0.0.1:8050/">http://127.0.0.1:8050/</a> en su navegador web para ver la aplicación</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">html</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">&quot;Fruit&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Apples&quot;</span><span class="p">,</span> <span class="s2">&quot;Oranges&quot;</span><span class="p">,</span> <span class="s2">&quot;Bananas&quot;</span><span class="p">,</span> <span class="s2">&quot;Apples&quot;</span><span class="p">,</span> <span class="s2">&quot;Oranges&quot;</span><span class="p">,</span> <span class="s2">&quot;Bananas&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Amount&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
    <span class="s2">&quot;City&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;SF&quot;</span><span class="p">,</span> <span class="s2">&quot;SF&quot;</span><span class="p">,</span> <span class="s2">&quot;SF&quot;</span><span class="p">,</span> <span class="s2">&quot;Montreal&quot;</span><span class="p">,</span> <span class="s2">&quot;Montreal&quot;</span><span class="p">,</span> <span class="s2">&quot;Montreal&quot;</span><span class="p">]</span>
<span class="p">})</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;Fruit&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;Amount&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;City&quot;</span><span class="p">,</span> <span class="n">barmode</span><span class="o">=</span><span class="s2">&quot;group&quot;</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span>
    <span class="n">html</span><span class="o">.</span><span class="n">H1</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="s1">&#39;Hello Dash&#39;</span><span class="p">),</span>

    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        Dash: A web application framework for your data.</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">),</span>

    <span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;example-graph&#39;</span><span class="p">,</span>
        <span class="n">figure</span><span class="o">=</span><span class="n">fig</span>
    <span class="p">)</span>
<span class="p">])</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="dash8-fig">
<img alt="_images/dash8.png" src="_images/dash8.png" />
</figure>
<figure class="align-center" id="dash9-fig">
<img alt="_images/dash9.png" src="_images/dash9.png" />
</figure>
<figure class="align-center" id="dash10-fig">
<img alt="_images/dash10.png" src="_images/dash10.png" />
</figure>
<figure class="align-center" id="dash11-fig">
<img alt="_images/dash11.png" src="_images/dash11.png" />
</figure>
<ul class="simple">
<li><p>Para tener otro estilo de visualización puede diseñar su propio archivo <code class="docutils literal notranslate"><span class="pre">style.css</span></code> por ejemplo, o utilizar algunos libres que puede solo importar, como por ejemplo <a class="reference external" href="https://www.bootstrapcdn.com/bootswatch/">BootstrapCDN</a> y <a class="reference external" href="https://plotly.com/python/templates/">Plotly themes</a>. Para importar los estilos de temas en tu app debe importar la librería en el archivo <code class="docutils literal notranslate"><span class="pre">.py</span></code> principal de tu app: <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">dash_bootstrap_components</span> <span class="pre">as</span> <span class="pre">dbc</span></code>, además de usar la siguiente línea para seleccionar el tema de interés</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="n">external_stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">dbc</span><span class="o">.</span><span class="n">themes</span><span class="o">.</span><span class="n">BOOTSTRAP</span><span class="p">])</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Antes debe instalarlo en el enviroment usando: <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">dash-bootstrap-components</span></code></p></li>
</ul>
<figure class="align-center" id="dash12-fig">
<img alt="_images/dash12.png" src="_images/dash12.png" />
</figure>
<figure class="align-center" id="dash13-fig">
<img alt="_images/dash13.png" src="_images/dash13.png" />
</figure>
<p><strong>Observaciones</strong></p>
<ul class="simple">
<li><p>El diseño está compuesto por un árbol de “componentes” como <code class="docutils literal notranslate"><span class="pre">html.Div</span></code> y <code class="docutils literal notranslate"><span class="pre">dcc.Graph</span></code>.</p></li>
<li><p>La biblioteca <code class="docutils literal notranslate"><span class="pre">dash_html_components</span></code> (<code class="docutils literal notranslate"><span class="pre">dash.html</span></code> a partir de <code class="docutils literal notranslate"><span class="pre">Dash</span> <span class="pre">v2.0</span></code>) tiene un componente para cada etiqueta <code class="docutils literal notranslate"><span class="pre">HTML</span></code>. El componente <code class="docutils literal notranslate"><span class="pre">html.H1(children</span> <span class="pre">=</span> <span class="pre">'Hola</span> <span class="pre">Dash')</span></code> genera un elemento <code class="docutils literal notranslate"><span class="pre">HTML</span> <span class="pre">&lt;h1&gt;Hola</span> <span class="pre">Dash&lt;/h1&gt;</span></code> en tu aplicación. <code class="docutils literal notranslate"><span class="pre">h1</span></code> en <code class="docutils literal notranslate"><span class="pre">HTML</span></code> es el primer nivel de encabezado en una página web.</p></li>
<li><p>No todos los componentes son <code class="docutils literal notranslate"><span class="pre">HTML</span></code> puro. Los <code class="docutils literal notranslate"><span class="pre">dash_core_components</span></code> describen componentes de nivel superior que son interactivos y se generan con <code class="docutils literal notranslate"><span class="pre">JavaScript,</span> <span class="pre">HTML</span></code> y <code class="docutils literal notranslate"><span class="pre">CSS</span></code> a través de la biblioteca <code class="docutils literal notranslate"><span class="pre">React.js</span></code>.</p></li>
<li><p>Cada componente se describe completamente a través de atributos de palabras clave. <code class="docutils literal notranslate"><span class="pre">Dash</span></code> es declarativo: usted describirá principalmente su aplicación a través de estos atributos.</p></li>
<li><p>La propiedad <code class="docutils literal notranslate"><span class="pre">children</span></code> es especial. Por convención, siempre es el primer atributo, lo que significa que puedes omitirlo: <code class="docutils literal notranslate"><span class="pre">html.H1(children</span> <span class="pre">=</span> <span class="pre">'Hello</span> <span class="pre">Dash')</span></code> es lo mismo que <code class="docutils literal notranslate"><span class="pre">html.H1('Hello</span> <span class="pre">Dash')</span></code>. Puede contener una cadena, un número, un solo componente o una lista de componentes.</p></li>
<li><p>Las fuentes en su aplicación se verán un poco diferentes de lo que se muestra en la imágen de arriba a menos que cambie el estilo de la hoja y de <code class="docutils literal notranslate"><span class="pre">Plotly</span></code>. Esta aplicación está utilizando una hoja de estilos <code class="docutils literal notranslate"><span class="pre">BootstrapCDN</span></code> y temas <code class="docutils literal notranslate"><span class="pre">Plotly</span></code></p></li>
</ul>
<p><strong>Realizar tu primer cambio</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Dash</span></code> incluye “hot-reloading”, esta característica se activa por defecto cuando ejecutas tu aplicación con <code class="docutils literal notranslate"><span class="pre">app.run_server(debug=True)</span></code>. Esto significa que <code class="docutils literal notranslate"><span class="pre">Dash</span></code> refrescará automáticamente tu navegador cuando hagas un cambio en tu código. Pruébalo: cambia el título “Hello Dash” en tu aplicación o cambia los datos <span class="math notranslate nohighlight">\(x\)</span> o <span class="math notranslate nohighlight">\(y\)</span>. Tu aplicación debería refrescarse automáticamente con tu cambio.</p></li>
</ul>
</section>
<section id="mas-informacion-sobre-los-componentes-html">
<h2>Más información sobre los componentes HTML<a class="headerlink" href="#mas-informacion-sobre-los-componentes-html" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dash_html_components</span></code> (<code class="docutils literal notranslate"><span class="pre">dash.html</span></code> a partir de <code class="docutils literal notranslate"><span class="pre">Dash</span> <span class="pre">v2.0</span></code>) contiene una clase de componente para cada etiqueta <code class="docutils literal notranslate"><span class="pre">HTML</span></code>, así como argumentos de palabras clave para todos los argumentos <code class="docutils literal notranslate"><span class="pre">HTML</span></code>. Vamos a personalizar el texto de nuestra aplicación modificando los estilos en línea de los componentes. Crea un archivo llamado <code class="docutils literal notranslate"><span class="pre">app.py</span></code> con el siguiente código</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">html</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">colors</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;background&#39;</span><span class="p">:</span> <span class="s1">&#39;#111111&#39;</span><span class="p">,</span>
    <span class="s1">&#39;text&#39;</span><span class="p">:</span> <span class="s1">&#39;#7FDBFF&#39;</span>
<span class="p">}</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">&quot;Fruit&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Apples&quot;</span><span class="p">,</span> <span class="s2">&quot;Oranges&quot;</span><span class="p">,</span> <span class="s2">&quot;Bananas&quot;</span><span class="p">,</span> <span class="s2">&quot;Apples&quot;</span><span class="p">,</span> <span class="s2">&quot;Oranges&quot;</span><span class="p">,</span> <span class="s2">&quot;Bananas&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Amount&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
    <span class="s2">&quot;City&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;SF&quot;</span><span class="p">,</span> <span class="s2">&quot;SF&quot;</span><span class="p">,</span> <span class="s2">&quot;SF&quot;</span><span class="p">,</span> <span class="s2">&quot;Montreal&quot;</span><span class="p">,</span> <span class="s2">&quot;Montreal&quot;</span><span class="p">,</span> <span class="s2">&quot;Montreal&quot;</span><span class="p">]</span>
<span class="p">})</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;Fruit&quot;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;Amount&quot;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;City&quot;</span><span class="p">,</span> <span class="n">barmode</span> <span class="o">=</span> <span class="s2">&quot;group&quot;</span><span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
    <span class="n">plot_bgcolor</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="s1">&#39;background&#39;</span><span class="p">],</span>
    <span class="n">paper_bgcolor</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="s1">&#39;background&#39;</span><span class="p">],</span>
    <span class="n">font_color</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;backgroundColor&#39;</span><span class="p">:</span> <span class="n">colors</span><span class="p">[</span><span class="s1">&#39;background&#39;</span><span class="p">]},</span> <span class="n">children</span><span class="o">=</span><span class="p">[</span>
    <span class="n">html</span><span class="o">.</span><span class="n">H1</span><span class="p">(</span>
        <span class="n">children</span> <span class="o">=</span> <span class="s1">&#39;Hello Dash&#39;</span><span class="p">,</span>
        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;textAlign&#39;</span><span class="p">:</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span>
            <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">colors</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">),</span>
    
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="n">children</span> <span class="o">=</span> <span class="s1">&#39;Dash: A web application framework for your data.&#39;</span><span class="p">,</span> <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;textAlign&#39;</span><span class="p">:</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span>
        <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">colors</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span>
    <span class="p">}),</span>
    
    <span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;example-graph-2&#39;</span><span class="p">,</span>
        <span class="n">figure</span><span class="o">=</span><span class="n">fig</span>
    <span class="p">)</span>
<span class="p">])</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="dash14-fig">
<img alt="_images/dash14.png" src="_images/dash14.png" />
</figure>
<ul class="simple">
<li><p>En este ejemplo, hemos modificado los estilos inline de los componentes <code class="docutils literal notranslate"><span class="pre">html.Div</span></code> y <code class="docutils literal notranslate"><span class="pre">html.H1</span></code> con la propiedad style.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">html</span><span class="o">.</span><span class="n">H1</span><span class="p">(</span><span class="s1">&#39;Hello Dash&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;textAlign&#39;</span><span class="p">:</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;#7FDBFF&#39;</span><span class="p">})</span>
</pre></div>
</div>
<ul class="simple">
<li><p>El código anterior se muestra en la aplicación <code class="docutils literal notranslate"><span class="pre">Dash</span></code> como</p></li>
</ul>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">h1</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;text-align: center; color: #7FDBFF&quot;</span><span class="p">&gt;</span>Hola Dash<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>.
</pre></div>
</div>
<ul class="simple">
<li><p>Hay algunas diferencias importantes entre los componentes <code class="docutils literal notranslate"><span class="pre">dash_html_</span></code> (<code class="docutils literal notranslate"><span class="pre">dash.html</span></code> a partir de <code class="docutils literal notranslate"><span class="pre">Dash</span> <span class="pre">v2.0</span></code>) y los atributos <code class="docutils literal notranslate"><span class="pre">HTML</span></code>:</p>
<ul>
<li><p>La propiedad de estilo en <code class="docutils literal notranslate"><span class="pre">HTML</span></code> es una cadena separada por punto y coma. En <code class="docutils literal notranslate"><span class="pre">Dash</span></code>, sólo se puede proporcionar un diccionario.</p></li>
<li><p>Las claves (keys) en el diccionario de estilo son <a class="reference external" href="https://en.wikipedia.org/wiki/Camel_case">camelCased</a>. Así, en lugar de <code class="docutils literal notranslate"><span class="pre">text-align</span></code>, es <code class="docutils literal notranslate"><span class="pre">textAlign</span></code>. El atributo de clase <code class="docutils literal notranslate"><span class="pre">HTML</span></code> es <code class="docutils literal notranslate"><span class="pre">className</span></code> en <code class="docutils literal notranslate"><span class="pre">Dash</span></code>.</p></li>
<li><p>Los hijos (children) de la etiqueta <code class="docutils literal notranslate"><span class="pre">HTML</span></code> se especifican a través del argumento de la palabra clave children. Por convención, éste es siempre el primer argumento, por lo que a menudo se omite.</p></li>
<li><p>Además de esto, todos los atributos y etiquetas <code class="docutils literal notranslate"><span class="pre">HTML</span></code> disponibles están a tu disposición dentro del contexto de <code class="docutils literal notranslate"><span class="pre">Python</span></code>.</p></li>
</ul>
</li>
</ul>
</section>
<section id="componentes-reutilizables">
<h2>Componentes reutilizables<a class="headerlink" href="#componentes-reutilizables" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Escribiendo nuestro markup en <code class="docutils literal notranslate"><span class="pre">Python</span></code>, podemos crear componentes complejos reutilizables como tablas sin cambiar de contexto o de lenguaje. Aquí hay un ejemplo rápido que genera una tabla <code class="docutils literal notranslate"><span class="pre">Table</span></code> a partir de un dataframe de <code class="docutils literal notranslate"><span class="pre">Pandas</span></code> (ver <a class="reference external" href="https://dash.plotly.com/dash-html-components/tr">html.Tr</a>, <a class="reference external" href="https://dash.plotly.com/dash-html-components/td">html.Td</a>, <a class="reference external" href="https://dash.plotly.com/dash-html-components/thead">html.Thead
</a>). Crea un archivo llamado <code class="docutils literal notranslate"><span class="pre">app.py</span></code> con el siguiente código</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">html</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/lihkir/Uninorte/main/AppliedStatisticMS/DataVisualizationRPython/Lectures/Python/PythonDataSets/usa-agricultural-exports-2011.csv&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">generate_table</span><span class="p">(</span><span class="n">dataframe</span><span class="p">,</span> <span class="n">max_rows</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">html</span><span class="o">.</span><span class="n">Table</span><span class="p">([</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Thead</span><span class="p">(</span>
            <span class="n">html</span><span class="o">.</span><span class="n">Tr</span><span class="p">([</span><span class="n">html</span><span class="o">.</span><span class="n">Th</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">dataframe</span><span class="o">.</span><span class="n">columns</span><span class="p">])</span>
        <span class="p">),</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Tbody</span><span class="p">([</span>
            <span class="n">html</span><span class="o">.</span><span class="n">Tr</span><span class="p">([</span>
                <span class="n">html</span><span class="o">.</span><span class="n">Td</span><span class="p">(</span><span class="n">dataframe</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">col</span><span class="p">])</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">dataframe</span><span class="o">.</span><span class="n">columns</span>
            <span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dataframe</span><span class="p">),</span> <span class="n">max_rows</span><span class="p">))</span>
        <span class="p">])</span>
    <span class="p">])</span>


<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">html</span><span class="o">.</span><span class="n">H4</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="s1">&#39;US Agriculture Exports (2011)&#39;</span><span class="p">),</span>
    <span class="n">generate_table</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="p">])</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

</pre></div>
</div>
<figure class="align-center" id="dash15-fig">
<img alt="_images/dash15.png" src="_images/dash15.png" />
</figure>
</section>
<section id="mas-informacion-sobre-la-visualizacion">
<h2>Más información sobre la visualización<a class="headerlink" href="#mas-informacion-sobre-la-visualizacion" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>La librería <code class="docutils literal notranslate"><span class="pre">dash_core_components</span></code> incluye un componente llamado <code class="docutils literal notranslate"><span class="pre">Graph</span></code>. <code class="docutils literal notranslate"><span class="pre">Graph</span></code> muestra visualizaciones de datos interactivas utilizando la librería de gráficos de código abierto <code class="docutils literal notranslate"><span class="pre">plotly.js</span></code>. <code class="docutils literal notranslate"><span class="pre">Plotly.js</span></code> admite más de <code class="docutils literal notranslate"><span class="pre">35</span> <span class="pre">tipos</span> <span class="pre">de</span> <span class="pre">gráficos</span></code> y los representa tanto en <code class="docutils literal notranslate"><span class="pre">SVG</span></code> de calidad vectorial como en <code class="docutils literal notranslate"><span class="pre">WebGL</span></code> de alto rendimiento.</p></li>
<li><p>El argumento de figura en el <code class="docutils literal notranslate"><span class="pre">componenteGraph</span></code> es el mismo argumento de figura que utiliza <code class="docutils literal notranslate"><span class="pre">plotly.py</span></code>, la biblioteca de gráficos <code class="docutils literal notranslate"><span class="pre">Python</span></code> de código abierto de <code class="docutils literal notranslate"><span class="pre">Plotly</span></code>. Consulte la documentación y la galería de <a class="reference external" href="https://plotly.com/python/">plotly.py para obtener más información</a>. Aquí presentamos un ejemplo que crea un gráfico de dispersión a partir de un marco de datos de <code class="docutils literal notranslate"><span class="pre">Pandas</span></code>. Crear un archivo llamado <code class="docutils literal notranslate"><span class="pre">app.py</span></code> con el siguiente código</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">html</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/lihkir/Uninorte/main/AppliedStatisticMS/DataVisualizationRPython/Lectures/Python/PythonDataSets/gdp-life-exp-2007.csv&#39;</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;gdp per capita&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;life expectancy&quot;</span><span class="p">,</span>
                 <span class="n">size</span><span class="o">=</span><span class="s2">&quot;population&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;continent&quot;</span><span class="p">,</span> <span class="n">hover_name</span><span class="o">=</span><span class="s2">&quot;country&quot;</span><span class="p">,</span>
                 <span class="n">log_x</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">size_max</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;life-exp-vs-gdp&#39;</span><span class="p">,</span>
        <span class="n">figure</span><span class="o">=</span><span class="n">fig</span>
    <span class="p">)</span>
<span class="p">])</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="dash16-fig">
<img alt="_images/dash16.png" src="_images/dash16.png" />
</figure>
</section>
<section id="markdown">
<h2>Markdown<a class="headerlink" href="#markdown" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Aunque <code class="docutils literal notranslate"><span class="pre">Dash</span></code> expone <code class="docutils literal notranslate"><span class="pre">HTML</span></code> a través de <code class="docutils literal notranslate"><span class="pre">dash_html_components</span></code> (<code class="docutils literal notranslate"><span class="pre">dash.html</span></code> a partir de <code class="docutils literal notranslate"><span class="pre">Dash</span> <span class="pre">v2.0</span></code>) , puede ser tedioso escribir tu copia en <code class="docutils literal notranslate"><span class="pre">HTML</span></code>. Para escribir bloques de texto, puedes utilizar el componente <code class="docutils literal notranslate"><span class="pre">Markdown</span></code> en <code class="docutils literal notranslate"><span class="pre">dash_core_components</span></code>. Crear un archivo llamado <a class="reference external" href="http://app.py">app.py</a> con el siguiente código:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">html</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">markdown_text</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">##Dash and Markdown</span>

<span class="s1">- Dash apps can be written in Markdown. </span>
<span class="s1">- Dash uses the [CommonMark](http://commonmark.org/) specification of Markdown. </span>
<span class="s1">- Check out their [60 Second Markdown Tutorial](http://commonmark.org/help/) if this is your first introduction to Markdown!</span>
<span class="s1">&#39;&#39;&#39;</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Markdown</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="n">markdown_text</span><span class="p">)</span>
<span class="p">])</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="dash17-fig">
<img alt="_images/dash17.png" src="_images/dash17.png" />
</figure>
</section>
<section id="componentes-principales">
<h2>Componentes principales<a class="headerlink" href="#componentes-principales" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dash_core_components</span></code> incluye un conjunto de componentes de alto nivel como los desplegables, los gráficos, los bloques markdown, etc.</p></li>
<li><p>Como todos los componentes de <code class="docutils literal notranslate"><span class="pre">Dash</span></code>, se describen de forma totalmente declarativa. Cada opción configurable está disponible como un argumento de palabra clave del componente.</p></li>
<li><p>Veremos muchos de estos componentes a lo largo de la sección. Puedes ver todos los componentes disponibles en la <a class="reference external" href="https://dash.plotly.com/dash-core-components">Galería de componentes del núcleo de Dash</a>.</p></li>
<li><p>Aquí están algunos de los componentes disponibles. Crea un archivo llamado <code class="docutils literal notranslate"><span class="pre">app.py</span></code> con el siguiente código:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">html</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Dropdown&#39;</span><span class="p">),</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;New York City&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;NYC&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;Montréal&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;MTL&#39;</span><span class="p">},</span> 
            <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;San Francisco&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;SF&#39;</span><span class="p">}</span>
        <span class="p">],</span>
        <span class="n">value</span><span class="o">=</span><span class="s1">&#39;MTL&#39;</span>
    <span class="p">),</span>

    <span class="n">html</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Multi-Select Dropdown&#39;</span><span class="p">),</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;New York City&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;NYC&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;Montréal&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;MTL&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;San Francisco&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;SF&#39;</span><span class="p">}</span>
        <span class="p">],</span>
        <span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;MTL&#39;</span><span class="p">,</span> <span class="s1">&#39;SF&#39;</span><span class="p">],</span>
        <span class="n">multi</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">),</span>

    <span class="n">html</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Radio Items&#39;</span><span class="p">),</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">RadioItems</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;New York City&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;NYC&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;Montréal&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;MTL&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;San Francisco&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;SF&#39;</span><span class="p">}</span>
        <span class="p">],</span>
        <span class="n">value</span><span class="o">=</span><span class="s1">&#39;MTL&#39;</span>
    <span class="p">),</span>

    <span class="n">html</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Checkboxes&#39;</span><span class="p">),</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Checklist</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;New York City&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;NYC&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;Montréal&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;MTL&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;San Francisco&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;SF&#39;</span><span class="p">}</span>
        <span class="p">],</span>
        <span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;MTL&#39;</span><span class="p">,</span> <span class="s1">&#39;SF&#39;</span><span class="p">]</span>
    <span class="p">),</span>

    <span class="n">html</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Text Input&#39;</span><span class="p">),</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s1">&#39;MTL&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="p">),</span>

    <span class="n">html</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Slider&#39;</span><span class="p">),</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Slider</span><span class="p">(</span>
        <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="nb">max</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span>
        <span class="n">marks</span><span class="o">=</span><span class="p">{</span><span class="n">i</span><span class="p">:</span> <span class="s1">&#39;Label </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)},</span>
        <span class="n">value</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">],</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;columnCount&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="dash18-fig">
<img alt="_images/dash18.png" src="_images/dash18.png" />
</figure>
<p><strong>Resumen</strong></p>
<ul class="simple">
<li><p>El diseño de una aplicación <code class="docutils literal notranslate"><span class="pre">Dash</span></code> describe el aspecto de la aplicación. El diseño es un árbol jerárquico de componentes. La librería <code class="docutils literal notranslate"><span class="pre">dash_html_components</span></code> (<code class="docutils literal notranslate"><span class="pre">dash.html</span></code> a partir de <code class="docutils literal notranslate"><span class="pre">Dash</span> <span class="pre">v2.0</span></code>) proporciona clases para todas las etiquetas <code class="docutils literal notranslate"><span class="pre">HTML</span></code> y los argumentos de las palabras clave describen los atributos <code class="docutils literal notranslate"><span class="pre">HTML</span></code> como <code class="docutils literal notranslate"><span class="pre">style,</span> <span class="pre">class</span></code> e <code class="docutils literal notranslate"><span class="pre">id</span></code>. La biblioteca <code class="docutils literal notranslate"><span class="pre">dash_core_components</span></code> genera componentes de nivel superior como controles y gráficos.</p></li>
<li><p>Para consultar la referencia, ver:</p>
<ul>
<li><p><a class="reference external" href="https://dash.plotly.com/dash-core-components">Galería de componentes del núcleo de Dash</a></p></li>
<li><p><a class="reference external" href="https://dash.plotly.com/dash-html-components">Galería de componentes HTML de Dash</a></p></li>
</ul>
</li>
</ul>
<p>La siguiente parte de esta seccíon cubre cómo hacer estas aplicaciones interactivas. Luego estudiaremos con más profundidad algunos <code class="docutils literal notranslate"><span class="pre">Callbacks</span></code> básicos</p>
</section>
<section id="callbacks-basicos-dash">
<h2>Callbacks básicos Dash<a class="headerlink" href="#callbacks-basicos-dash" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Como se ha visto, <code class="docutils literal notranslate"><span class="pre">app.layout</span></code> describe el aspecto de la aplicación y es un árbol jerárquico de componentes. La biblioteca <code class="docutils literal notranslate"><span class="pre">dash_html_components</span></code> proporciona clases para todas las etiquetas <code class="docutils literal notranslate"><span class="pre">HTML</span></code>, y los argumentos de las palabras clave describen los atributos <code class="docutils literal notranslate"><span class="pre">HTML</span></code> como style, <code class="docutils literal notranslate"><span class="pre">className</span></code> e <code class="docutils literal notranslate"><span class="pre">id</span></code>. La biblioteca <code class="docutils literal notranslate"><span class="pre">dash_core_components</span></code> genera componentes de nivel superior como controles y gráficos.</p></li>
<li><p>Ahora se describirá cómo hacer que tus aplicaciones <code class="docutils literal notranslate"><span class="pre">Dash</span></code> utilicen funciones de devolución de llamada (<code class="docutils literal notranslate"><span class="pre">callbacks</span></code>): funciones que son llamadas automáticamente por <code class="docutils literal notranslate"><span class="pre">Dash</span></code> cada vez que la propiedad de un componente de entrada cambia. Comencemos con un ejemplo sencillo de una aplicación Dash interactiva.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">html</span>
<span class="kn">from</span> <span class="nn">dash.dependencies</span> <span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">html</span><span class="o">.</span><span class="n">H6</span><span class="p">(</span><span class="s2">&quot;Change the value in the text box to see callbacks in action!&quot;</span><span class="p">),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
        <span class="s2">&quot;Input: &quot;</span><span class="p">,</span>
        <span class="n">dcc</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;my-input&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;initial value&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="p">)</span>
    <span class="p">]),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Br</span><span class="p">(),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;my-output&#39;</span><span class="p">),</span>

<span class="p">])</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="n">component_id</span><span class="o">=</span><span class="s1">&#39;my-output&#39;</span><span class="p">,</span> <span class="n">component_property</span><span class="o">=</span><span class="s1">&#39;children&#39;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="n">component_id</span><span class="o">=</span><span class="s1">&#39;my-input&#39;</span><span class="p">,</span> <span class="n">component_property</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">update_output_div</span><span class="p">(</span><span class="n">input_value</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;Output: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">input_value</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="initialvalue-callback-fig">
<img alt="_images/initialvalue_callback.png" src="_images/initialvalue_callback.png" />
</figure>
<p><strong>Observaciones</strong></p>
<ul>
<li><p>Las “<code class="docutils literal notranslate"><span class="pre">inputs</span></code>” y “<code class="docutils literal notranslate"><span class="pre">outputs</span></code>” de la interfaz de nuestra aplicación se describen declarativamente como argumentos del decorador <code class="docutils literal notranslate"><span class="pre">&#64;app.callback</span></code>.</p>
<p>a. Al escribir este decorador, le estamos diciendo a <code class="docutils literal notranslate"><span class="pre">Dash</span></code> que llame a esta función por nosotros cada vez que el valor del componente “<code class="docutils literal notranslate"><span class="pre">input</span></code>” (<code class="docutils literal notranslate"><span class="pre">la</span> <span class="pre">caja</span> <span class="pre">de</span> <span class="pre">texto</span></code>) cambie para actualizar los <code class="docutils literal notranslate"><span class="pre">children</span></code> del componente “<code class="docutils literal notranslate"><span class="pre">output</span></code>” en la página (el <code class="docutils literal notranslate"><span class="pre">div</span> <span class="pre">HTML</span></code>).</p>
<p>b. Puedes usar cualquier nombre para la función que está envuelta por el decorador <code class="docutils literal notranslate"><span class="pre">&#64;app.callback</span></code>. La convención es que el nombre describa la(s) salida(s) del <code class="docutils literal notranslate"><span class="pre">callback</span></code>.</p>
<p>c. Puede utilizar cualquier nombre para los argumentos de la función, pero debe utilizar los mismos nombres dentro de la función de devolución de llamada que en su definición, al igual que en una función normal de <code class="docutils literal notranslate"><span class="pre">Python</span></code>. Los argumentos son posicionales por defecto: primero los elementos de entrada y luego los elementos de estado se dan en el mismo orden que en el decorador. También tiene la opción de utilizar argumentos de palabra clave con nombre, en lugar de posicionales.</p>
<p>d. Debes utilizar el mismo <code class="docutils literal notranslate"><span class="pre">id</span></code> que le diste a un componente <code class="docutils literal notranslate"><span class="pre">Dash</span></code> en el <code class="docutils literal notranslate"><span class="pre">app.layout</span></code> cuando te refieras a él como entrada o salida del decorador <code class="docutils literal notranslate"><span class="pre">&#64;app.callback</span></code>.</p>
<p>e. El decorador <code class="docutils literal notranslate"><span class="pre">&#64;app.callback</span></code> debe estar directamente encima de la declaración de la función <code class="docutils literal notranslate"><span class="pre">callback</span></code>. Si hay una línea en blanco entre el decorador y la definición de la función, el registro de la devolución de llamada no tendrá éxito.</p>
</li>
<li><p>En <code class="docutils literal notranslate"><span class="pre">Dash</span></code>, los <code class="docutils literal notranslate"><span class="pre">inputs</span></code> y <code class="docutils literal notranslate"><span class="pre">outputs</span></code> de nuestra aplicación son simplemente las propiedades de un componente en particular. En este ejemplo, nuestro <code class="docutils literal notranslate"><span class="pre">input</span></code> es la propiedad “<code class="docutils literal notranslate"><span class="pre">value</span></code>” del componente que tiene el <code class="docutils literal notranslate"><span class="pre">ID</span></code> “<code class="docutils literal notranslate"><span class="pre">my-input</span></code>”. Nuestra salida es la propiedad “<code class="docutils literal notranslate"><span class="pre">children</span></code>” del componente con el <code class="docutils literal notranslate"><span class="pre">ID</span></code> “<code class="docutils literal notranslate"><span class="pre">my-input</span></code>”.</p></li>
<li><p>Cada vez que una propiedad de entrada cambia, la función que el decorador <code class="docutils literal notranslate"><span class="pre">callback</span></code> envuelve será llamada automáticamente. <code class="docutils literal notranslate"><span class="pre">Dash</span></code> proporciona a la función el nuevo valor de la propiedad de entrada como argumento de entrada y <code class="docutils literal notranslate"> <span class="pre">Dash</span></code> actualiza la propiedad del componente de salida con lo que haya devuelto la función.</p></li>
<li><p>Las palabras clave <code class="docutils literal notranslate"><span class="pre">component_id</span></code> y <code class="docutils literal notranslate"><span class="pre">component_property</span></code> son opcionales (sólo hay dos argumentos para cada uno de esos objetos). Se incluyen en este ejemplo para mayor claridad, pero se omitirán en el resto de la sección en aras de la brevedad y la legibilidad.</p></li>
<li><p>No confunda el objeto <code class="docutils literal notranslate"><span class="pre">dash.dependencies.Input</span></code> con el objeto <code class="docutils literal notranslate"><span class="pre">dcc.Input</span></code>. El primero sólo se utiliza en estas definiciones de <code class="docutils literal notranslate"><span class="pre">callback</span></code> y el segundo es un componente real.</p></li>
<li><p>Nótese que no establecemos un valor para la propiedad <code class="docutils literal notranslate"><span class="pre">children</span></code> del componente <code class="docutils literal notranslate"><span class="pre">my-output</span></code> en el <code class="docutils literal notranslate"><span class="pre">layout</span></code>. Cuando la aplicación <code class="docutils literal notranslate"><span class="pre">Dash</span></code> se inicia, llama automáticamente a todos los <code class="docutils literal notranslate"><span class="pre">callbacks</span></code> con los valores iniciales de los componentes de entrada para rellenar el estado inicial de los componentes de salida. En este ejemplo, si se especifica algo como <code class="docutils literal notranslate"><span class="pre">html.Div(id='my-output',</span> <span class="pre">children='Hola</span> <span class="pre">mundo')</span></code>, se sobrescribiría cuando la aplicación se inicia.</p></li>
<li><p>Con la interactividad de <code class="docutils literal notranslate"><span class="pre">Dash</span></code>, podemos actualizar dinámicamente cualquier propiedad a través de una función <code class="docutils literal notranslate"><span class="pre">callback</span></code>. ¡Frecuentemente actualizaremos los <code class="docutils literal notranslate"><span class="pre">children</span></code> de un componente para mostrar nuevo texto o la figura de un componente <code class="docutils literal notranslate"><span class="pre">dcc.Graph</span></code> para mostrar nuevos datos, pero también podríamos actualizar el estilo de un componente o incluso las opciones disponibles de un componente <code class="docutils literal notranslate"><span class="pre">dcc.Dropdown</span></code>. Veamos otro ejemplo en el que un <code class="docutils literal notranslate"><span class="pre">dcc.Slider</span></code> actualiza un <code class="docutils literal notranslate"><span class="pre">dcc.Graph</span></code>.</p></li>
</ul>
</section>
<section id="dash-app-layout-con-figura-y-sliderm">
<h2>Dash App Layout con Figura y Sliderm<a class="headerlink" href="#dash-app-layout-con-figura-y-sliderm" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/lihkir/Uninorte/main/AppliedStatisticMS/DataVisualizationRPython/Lectures/Python/PythonDataSets/gapminderDataFiveYear.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>year</th>
      <th>pop</th>
      <th>continent</th>
      <th>lifeExp</th>
      <th>gdpPercap</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Afghanistan</td>
      <td>1952</td>
      <td>8425333.0</td>
      <td>Asia</td>
      <td>28.801</td>
      <td>779.445314</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Afghanistan</td>
      <td>1957</td>
      <td>9240934.0</td>
      <td>Asia</td>
      <td>30.332</td>
      <td>820.853030</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Afghanistan</td>
      <td>1962</td>
      <td>10267083.0</td>
      <td>Asia</td>
      <td>31.997</td>
      <td>853.100710</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Afghanistan</td>
      <td>1967</td>
      <td>11537966.0</td>
      <td>Asia</td>
      <td>34.020</td>
      <td>836.197138</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Afghanistan</td>
      <td>1972</td>
      <td>13079460.0</td>
      <td>Asia</td>
      <td>36.088</td>
      <td>739.981106</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">html</span>
<span class="kn">from</span> <span class="nn">dash.dependencies</span> <span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/lihkir/Uninorte/main/AppliedStatisticMS/DataVisualizationRPython/Lectures/Python/PythonDataSets/gapminderDataFiveYear.csv&#39;</span><span class="p">)</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;graph-with-slider&#39;</span><span class="p">),</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Slider</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;year-slider&#39;</span><span class="p">,</span>
        <span class="nb">min</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
        <span class="nb">max</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
        <span class="n">value</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
        <span class="n">marks</span><span class="o">=</span><span class="p">{</span><span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">):</span> <span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()},</span>
        <span class="n">step</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>
<span class="p">])</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;graph-with-slider&#39;</span><span class="p">,</span> <span class="s1">&#39;figure&#39;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;year-slider&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">update_figure</span><span class="p">(</span><span class="n">selected_year</span><span class="p">):</span>
    <span class="n">filtered_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">year</span> <span class="o">==</span> <span class="n">selected_year</span><span class="p">]</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">filtered_df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;gdpPercap&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;lifeExp&quot;</span><span class="p">,</span>
                     <span class="n">size</span><span class="o">=</span><span class="s2">&quot;pop&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;continent&quot;</span><span class="p">,</span> <span class="n">hover_name</span><span class="o">=</span><span class="s2">&quot;country&quot;</span><span class="p">,</span>
                     <span class="n">log_x</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">size_max</span><span class="o">=</span><span class="mi">55</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">transition_duration</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="dash19-fig">
<img alt="_images/dash19.png" src="_images/dash19.png" />
</figure>
<ul class="simple">
<li><p>Recuerde que siempre <code class="docutils literal notranslate"><span class="pre">puede</span> <span class="pre">cambiar</span> <span class="pre">el</span> <span class="pre">estilo</span> <span class="pre">de</span> <span class="pre">su</span> <span class="pre">figura</span> <span class="pre">y</span> <span class="pre">la</span> <span class="pre">hoja</span></code>. Sólo debe cambiar las siguientes lineas</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ext_style</span> <span class="o">=</span> <span class="s2">&quot;https://cdn.jsdelivr.net/npm/bootswatch@4.5.2/dist/slate/bootstrap.min.css&quot;</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="n">external_stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">ext_style</span><span class="p">])</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">filtered_df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;gdpPercap&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;lifeExp&quot;</span><span class="p">,</span>
                 <span class="n">size</span><span class="o">=</span><span class="s2">&quot;pop&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;continent&quot;</span><span class="p">,</span> <span class="n">hover_name</span><span class="o">=</span><span class="s2">&quot;country&quot;</span><span class="p">,</span>
                 <span class="n">log_x</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">size_max</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="s2">&quot;plotly_dark&quot;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="dash20-fig">
<img alt="_images/dash20.png" src="_images/dash20.png" />
</figure>
<ul class="simple">
<li><p>En este ejemplo, la propiedad “<code class="docutils literal notranslate"><span class="pre">value</span></code>” del <code class="docutils literal notranslate"><span class="pre">dcc.Slider</span></code> es la entrada de la app y la salida de la app es la propiedad “<code class="docutils literal notranslate"><span class="pre">figure</span></code>” del <code class="docutils literal notranslate"><span class="pre">dcc.Graph</span></code>. Cada vez que el valor del <code class="docutils literal notranslate"><span class="pre">dcc.Slider</span></code> cambia, <code class="docutils literal notranslate"><span class="pre">Dash</span></code> llama a la función callback <code class="docutils literal notranslate"><span class="pre">update_figure</span></code> con el nuevo valor. La función filtra el dataframe con este nuevo valor, construye un objeto figura y lo devuelve a la aplicación <code class="docutils literal notranslate"><span class="pre">Dash</span></code>.</p></li>
<li><p>Hay algunos patrones interesantes en este ejemplo:</p>
<ul>
<li><p>Utilizamos la biblioteca <code class="docutils literal notranslate"><span class="pre">Pandas</span></code> para cargar nuestro <code class="docutils literal notranslate"><span class="pre">dataframe</span></code> al inicio de la aplicación: <code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">pd.read_csv('...')</span></code>. Este dataframe <code class="docutils literal notranslate"><span class="pre">df</span></code> está en el estado global de la app y puede ser leído dentro de las funciones callback.</p></li>
<li><p>La carga de datos en memoria puede ser costosa. <code class="docutils literal notranslate"><span class="pre">Al</span> <span class="pre">cargar</span> <span class="pre">los</span> <span class="pre">datos</span> <span class="pre">de</span> <span class="pre">consulta</span> <span class="pre">al</span> <span class="pre">inicio</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">app</span> <span class="pre">en</span> <span class="pre">lugar</span> <span class="pre">de</span> <span class="pre">dentro</span> <span class="pre">de</span> <span class="pre">las</span> <span class="pre">funciones</span> <span class="pre">callback,</span> <span class="pre">nos</span> <span class="pre">aseguramos</span> <span class="pre">de</span> <span class="pre">que</span> <span class="pre">esta</span> <span class="pre">operación</span> <span class="pre">sólo</span> <span class="pre">se</span> <span class="pre">realiza</span> <span class="pre">cuando</span> <span class="pre">se</span> <span class="pre">inicia</span> <span class="pre">el</span> <span class="pre">servidor</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">app</span></code>. Cuando un usuario visita la app o interactúa con ella, esos datos (<code class="docutils literal notranslate"><span class="pre">df</span></code>) ya están en memoria. Si es posible, la inicialización costosa (como la descarga o la consulta de datos) debería hacerse en el ámbito global de la app en lugar de dentro de las funciones callback.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">El</span> <span class="pre">callback</span> <span class="pre">no</span> <span class="pre">modifica</span> <span class="pre">los</span> <span class="pre">datos</span> <span class="pre">originales,</span> <span class="pre">sólo</span> <span class="pre">crea</span> <span class="pre">copias</span> <span class="pre">del</span> <span class="pre">dataframe</span> <span class="pre">filtrando</span> <span class="pre">a</span> <span class="pre">través</span> <span class="pre">de</span> <span class="pre">los</span> <span class="pre">filtros</span> <span class="pre">de</span> <span class="pre">pandas</span></code>. Esto es importante: <code class="docutils literal notranslate"><span class="pre">los</span> <span class="pre">callbacks</span> <span class="pre">nunca</span> <span class="pre">deben</span> <span class="pre">mutar</span> <span class="pre">las</span> <span class="pre">variables</span> <span class="pre">fuera</span> <span class="pre">de</span> <span class="pre">su</span> <span class="pre">ámbito</span></code>. Si tus callbacks modifican el estado global, entonces la sesión de un usuario podría afectar a la sesión del siguiente usuario y cuando la aplicación se despliegue en múltiples procesos o hilos, esas modificaciones no se compartirán entre sesiones.</p></li>
<li><p>Activamos las transiciones con <code class="docutils literal notranslate"><span class="pre">layout.transition</span></code> para dar una idea de cómo evoluciona el conjunto de datos con el tiempo: <code class="docutils literal notranslate"><span class="pre">las</span> <span class="pre">transiciones</span> <span class="pre">permiten</span> <span class="pre">que</span> <span class="pre">el</span> <span class="pre">gráfico</span> <span class="pre">se</span> <span class="pre">actualice</span> <span class="pre">de</span> <span class="pre">un</span> <span class="pre">estado</span> <span class="pre">a</span> <span class="pre">otro</span> <span class="pre">de</span> <span class="pre">forma</span> <span class="pre">suave</span></code>, como si estuviera animado, en este caso <code class="docutils literal notranslate"><span class="pre">transition_duration=500</span></code> está dado en milésimas de segundos.</p></li>
</ul>
</li>
</ul>
</section>
<section id="aplicacion-dash-con-multiples-entradas">
<h2>Aplicación Dash con múltiples entradas<a class="headerlink" href="#aplicacion-dash-con-multiples-entradas" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>En <code class="docutils literal notranslate"><span class="pre">Dash</span></code>, cualquier “<code class="docutils literal notranslate"><span class="pre">Output</span></code>” puede tener múltiples componentes “<code class="docutils literal notranslate"><span class="pre">Input</span></code>”. Aquí hay un ejemplo simple que une cinco <code class="docutils literal notranslate"><span class="pre">Inputs</span></code> (la propiedad value de dos componentes <code class="docutils literal notranslate"><span class="pre">dcc.Dropdown</span></code>, dos componentes <code class="docutils literal notranslate"><span class="pre">dcc.RadioItems</span></code>, y un componente <code class="docutils literal notranslate"><span class="pre">dcc.Slider</span></code>) a 1 componente <code class="docutils literal notranslate"><span class="pre">Output</span></code> (la propiedad <code class="docutils literal notranslate"><span class="pre">figure</span></code> del componente <code class="docutils literal notranslate"><span class="pre">Graph</span></code>). Observe cómo <code class="docutils literal notranslate"><span class="pre">app.callback</span></code> enumera los cinco elementos de entrada después de la salida.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">html</span>
<span class="kn">from</span> <span class="nn">dash.dependencies</span> <span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/lihkir/Uninorte/main/AppliedStatisticMS/DataVisualizationRPython/Lectures/Python/PythonDataSets/country_indicators.csv&#39;</span><span class="p">)</span>

<span class="n">available_indicators</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Indicator Name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>

        <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
            <span class="n">dcc</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;xaxis-column&#39;</span><span class="p">,</span>
                <span class="n">options</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">}</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">available_indicators</span><span class="p">],</span>
                <span class="n">value</span><span class="o">=</span><span class="s1">&#39;Fertility rate, total (births per woman)&#39;</span>
            <span class="p">),</span>
            <span class="n">dcc</span><span class="o">.</span><span class="n">RadioItems</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;xaxis-type&#39;</span><span class="p">,</span>
                <span class="n">options</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">}</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Log&#39;</span><span class="p">]],</span>
                <span class="n">value</span><span class="o">=</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span>
                <span class="n">labelStyle</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;inline-block&#39;</span><span class="p">}</span>
            <span class="p">)</span>
        <span class="p">],</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="s1">&#39;48%&#39;</span><span class="p">,</span> <span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;inline-block&#39;</span><span class="p">}),</span>

        <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
            <span class="n">dcc</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;yaxis-column&#39;</span><span class="p">,</span>
                <span class="n">options</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">}</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">available_indicators</span><span class="p">],</span>
                <span class="n">value</span><span class="o">=</span><span class="s1">&#39;Life expectancy at birth, total (years)&#39;</span>
            <span class="p">),</span>
            <span class="n">dcc</span><span class="o">.</span><span class="n">RadioItems</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;yaxis-type&#39;</span><span class="p">,</span>
                <span class="n">options</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">}</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Log&#39;</span><span class="p">]],</span>
                <span class="n">value</span><span class="o">=</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span>
                <span class="n">labelStyle</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;inline-block&#39;</span><span class="p">}</span>
            <span class="p">)</span>
        <span class="p">],</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="s1">&#39;48%&#39;</span><span class="p">,</span> <span class="s1">&#39;float&#39;</span><span class="p">:</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;inline-block&#39;</span><span class="p">})</span>
    <span class="p">]),</span>

    <span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;indicator-graphic&#39;</span><span class="p">),</span>

    <span class="n">dcc</span><span class="o">.</span><span class="n">Slider</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;year--slider&#39;</span><span class="p">,</span>
        <span class="nb">min</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
        <span class="nb">max</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
        <span class="n">value</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
        <span class="n">marks</span><span class="o">=</span><span class="p">{</span><span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">):</span> <span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()},</span>
        <span class="n">step</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>
<span class="p">])</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;indicator-graphic&#39;</span><span class="p">,</span> <span class="s1">&#39;figure&#39;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;xaxis-column&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;yaxis-column&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;xaxis-type&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;yaxis-type&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;year--slider&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">update_graph</span><span class="p">(</span><span class="n">xaxis_column_name</span><span class="p">,</span> <span class="n">yaxis_column_name</span><span class="p">,</span>
                 <span class="n">xaxis_type</span><span class="p">,</span> <span class="n">yaxis_type</span><span class="p">,</span>
                 <span class="n">year_value</span><span class="p">):</span>
    <span class="n">dff</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">year_value</span><span class="p">]</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">dff</span><span class="p">[</span><span class="n">dff</span><span class="p">[</span><span class="s1">&#39;Indicator Name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">xaxis_column_name</span><span class="p">][</span><span class="s1">&#39;Value&#39;</span><span class="p">],</span>
                     <span class="n">y</span><span class="o">=</span><span class="n">dff</span><span class="p">[</span><span class="n">dff</span><span class="p">[</span><span class="s1">&#39;Indicator Name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">yaxis_column_name</span><span class="p">][</span><span class="s1">&#39;Value&#39;</span><span class="p">],</span>
                     <span class="n">hover_name</span><span class="o">=</span><span class="n">dff</span><span class="p">[</span><span class="n">dff</span><span class="p">[</span><span class="s1">&#39;Indicator Name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">yaxis_column_name</span><span class="p">][</span><span class="s1">&#39;Country Name&#39;</span><span class="p">])</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">margin</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;l&#39;</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span> <span class="n">hovermode</span><span class="o">=</span><span class="s1">&#39;closest&#39;</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">update_xaxes</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">xaxis_column_name</span><span class="p">,</span>
                     <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span> <span class="k">if</span> <span class="n">xaxis_type</span> <span class="o">==</span> <span class="s1">&#39;Linear&#39;</span> <span class="k">else</span> <span class="s1">&#39;log&#39;</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">update_yaxes</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">yaxis_column_name</span><span class="p">,</span>
                     <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span> <span class="k">if</span> <span class="n">yaxis_type</span> <span class="o">==</span> <span class="s1">&#39;Linear&#39;</span> <span class="k">else</span> <span class="s1">&#39;log&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="dash21-fig">
<img alt="_images/dash21.png" src="_images/dash21.png" />
</figure>
<ul class="simple">
<li><p>En este ejemplo, la llamada de retorno se ejecuta cada vez que cambia la propiedad value de los componentes <code class="docutils literal notranslate"><span class="pre">dcc.Dropdown,</span> <span class="pre">dcc.Slider</span></code> o <code class="docutils literal notranslate"><span class="pre">dcc.RadioItems</span></code>. Los argumentos de entrada de la llamada de retorno son el valor nuevo o actual de cada una de las propiedades de entrada, en el orden en que fueron especificadas.</p></li>
<li><p>Aunque sólo un único <code class="docutils literal notranslate"><span class="pre">Input</span></code> cambia a la vez (un usuario sólo puede cambiar el valor de un único <code class="docutils literal notranslate"><span class="pre">Dropdown</span></code> en un momento dado), <code class="docutils literal notranslate"><span class="pre">Dash</span></code> recoge el estado actual de todas las propiedades <code class="docutils literal notranslate"><span class="pre">Input</span></code> especificadas y las pasa a su función por usted. <code class="docutils literal notranslate"><span class="pre">Se</span> <span class="pre">garantiza</span> <span class="pre">que</span> <span class="pre">sus</span> <span class="pre">funciones</span> <span class="pre">callback</span> <span class="pre">siempre</span> <span class="pre">reciben</span> <span class="pre">el</span> <span class="pre">estado</span> <span class="pre">representativo</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">aplicación</span></code>.</p></li>
</ul>
</section>
<section id="aplicacion-dash-con-multiples-salidas">
<h2>Aplicación Dash con múltiples salidas<a class="headerlink" href="#aplicacion-dash-con-multiples-salidas" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Hasta ahora todos los <code class="docutils literal notranslate"><span class="pre">callbacks</span></code> que hemos escrito sólo actualizan una propiedad de salida. También podemos actualizar varias a la vez. Puede enumerar todas las propiedades que requiera actualizar en <code class="docutils literal notranslate"><span class="pre">app.callback</span></code>, y devolver ese número de elementos desde el <code class="docutils literal notranslate"><span class="pre">callback</span></code>. Esto es particularmente bueno si dos salidas dependen del mismo resultado intermedio computacionalmente intenso, como una consulta lenta a la base de datos.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">html</span>
<span class="kn">from</span> <span class="nn">dash.dependencies</span> <span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span>

<span class="n">external_stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;https://codepen.io/chriddyp/pen/bWLwgP.css&#39;</span><span class="p">]</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">external_stylesheets</span><span class="o">=</span><span class="n">external_stylesheets</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;num-multi&#39;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;number&#39;</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="mi">5</span>
    <span class="p">),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Table</span><span class="p">([</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Tr</span><span class="p">([</span><span class="n">html</span><span class="o">.</span><span class="n">Td</span><span class="p">([</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">html</span><span class="o">.</span><span class="n">Sup</span><span class="p">(</span><span class="mi">2</span><span class="p">)]),</span> <span class="n">html</span><span class="o">.</span><span class="n">Td</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;square&#39;</span><span class="p">)]),</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Tr</span><span class="p">([</span><span class="n">html</span><span class="o">.</span><span class="n">Td</span><span class="p">([</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">html</span><span class="o">.</span><span class="n">Sup</span><span class="p">(</span><span class="mi">3</span><span class="p">)]),</span> <span class="n">html</span><span class="o">.</span><span class="n">Td</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;cube&#39;</span><span class="p">)]),</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Tr</span><span class="p">([</span><span class="n">html</span><span class="o">.</span><span class="n">Td</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="n">html</span><span class="o">.</span><span class="n">Sup</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)]),</span> <span class="n">html</span><span class="o">.</span><span class="n">Td</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;twos&#39;</span><span class="p">)]),</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Tr</span><span class="p">([</span><span class="n">html</span><span class="o">.</span><span class="n">Td</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="n">html</span><span class="o">.</span><span class="n">Sup</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)]),</span> <span class="n">html</span><span class="o">.</span><span class="n">Td</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;threes&#39;</span><span class="p">)]),</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Tr</span><span class="p">([</span><span class="n">html</span><span class="o">.</span><span class="n">Td</span><span class="p">([</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">html</span><span class="o">.</span><span class="n">Sup</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)]),</span> <span class="n">html</span><span class="o">.</span><span class="n">Td</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;x^x&#39;</span><span class="p">)]),</span>
    <span class="p">]),</span>
<span class="p">])</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;square&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">),</span>
    <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;cube&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">),</span>
    <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;twos&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">),</span>
    <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;threes&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">),</span>
    <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;x^x&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;num-multi&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">callback_a</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="n">x</span><span class="p">,</span> <span class="mi">3</span><span class="o">**</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="n">x</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="multiple-outputs-dash-fig">
<img alt="_images/multiple_outputs_dash.png" src="_images/multiple_outputs_dash.png" />
</figure>
<ul class="simple">
<li><p>No siempre es una buena idea combinar las salidas, aunque se pueda. Si los <code class="docutils literal notranslate"><span class="pre">Outputs</span></code> dependen de algunas pero no todas los mismos <code class="docutils literal notranslate"><span class="pre">Inputs</span></code>, mantenerlas separadas puede evitar actualizaciones innecesarias. Si tienen los mismos <code class="docutils literal notranslate"><span class="pre">Inputs</span></code> pero hacen cálculos independientes con estas entradas, <code class="docutils literal notranslate"><span class="pre">mantener</span> <span class="pre">las</span> <span class="pre">devoluciones</span> <span class="pre">de</span> <span class="pre">llamada</span> <span class="pre">separadas</span> <span class="pre">puede</span> <span class="pre">permitir</span> <span class="pre">que</span> <span class="pre">se</span> <span class="pre">ejecuten</span> <span class="pre">en</span> <span class="pre">paralelo</span></code>.</p></li>
</ul>
</section>
<section id="dash-app-con-callbacks-encadenados">
<h2>Dash App con callbacks encadenados<a class="headerlink" href="#dash-app-con-callbacks-encadenados" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>También puedes encadenar salidas y entradas. <code class="docutils literal notranslate"><span class="pre">La</span> <span class="pre">salida</span> <span class="pre">de</span> <span class="pre">una</span> <span class="pre">función</span> <span class="pre">callback</span> <span class="pre">puede</span> <span class="pre">ser</span> <span class="pre">la</span> <span class="pre">entrada</span> <span class="pre">de</span> <span class="pre">otra</span> <span class="pre">función</span> <span class="pre">callback</span></code>. Este patrón puede ser utilizado para crear <code class="docutils literal notranslate"><span class="pre">UIs</span></code> dinámicas donde un componente de entrada actualiza las opciones disponibles del siguiente componente de entrada</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">html</span>
<span class="kn">from</span> <span class="nn">dash.dependencies</span> <span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span>

<span class="n">external_stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;https://codepen.io/chriddyp/pen/bWLwgP.css&#39;</span><span class="p">]</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">external_stylesheets</span><span class="o">=</span><span class="n">external_stylesheets</span><span class="p">)</span>

<span class="n">all_options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;America&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;New York City&#39;</span><span class="p">,</span> <span class="s1">&#39;San Francisco&#39;</span><span class="p">,</span> <span class="s1">&#39;Cincinnati&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Canada&#39;</span><span class="p">:</span> <span class="p">[</span><span class="sa">u</span><span class="s1">&#39;Montréal&#39;</span><span class="p">,</span> <span class="s1">&#39;Toronto&#39;</span><span class="p">,</span> <span class="s1">&#39;Ottawa&#39;</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">RadioItems</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;countries-radio&#39;</span><span class="p">,</span>
        <span class="n">options</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">k</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">k</span><span class="p">}</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">all_options</span><span class="o">.</span><span class="n">keys</span><span class="p">()],</span>
        <span class="n">value</span><span class="o">=</span><span class="s1">&#39;America&#39;</span>
    <span class="p">),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Hr</span><span class="p">(),</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">RadioItems</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;cities-radio&#39;</span><span class="p">),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Hr</span><span class="p">(),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;display-selected-values&#39;</span><span class="p">)</span>
<span class="p">])</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;cities-radio&#39;</span><span class="p">,</span> <span class="s1">&#39;options&#39;</span><span class="p">),</span> <span class="c1"># &lt;- as option</span>
    <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;countries-radio&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">))</span> 
<span class="k">def</span> <span class="nf">set_cities_options</span><span class="p">(</span><span class="n">selected_country</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">}</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">all_options</span><span class="p">[</span><span class="n">selected_country</span><span class="p">]]</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;cities-radio&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">),</span> <span class="c1"># &lt;- as value</span>
    <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;cities-radio&#39;</span><span class="p">,</span> <span class="s1">&#39;options&#39;</span><span class="p">))</span>  <span class="c1"># &lt;- as option</span>
<span class="k">def</span> <span class="nf">set_cities_value</span><span class="p">(</span><span class="n">available_options</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">available_options</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;value&#39;</span><span class="p">]</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;display-selected-values&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;countries-radio&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;cities-radio&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">set_display_children</span><span class="p">(</span><span class="n">selected_country</span><span class="p">,</span> <span class="n">selected_city</span><span class="p">):</span>
    <span class="k">return</span> <span class="sa">u</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> is a city in </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">selected_city</span><span class="p">,</span> <span class="n">selected_country</span><span class="p">,</span>
    <span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="dash22-fig">
<img alt="_images/dash22.png" src="_images/dash22.png" />
</figure>
<ul class="simple">
<li><p>El primer <code class="docutils literal notranslate"><span class="pre">callback</span></code> actualiza las opciones disponibles en el segundo componente <code class="docutils literal notranslate"><span class="pre">dcc.RadioItems</span></code> basándose en el valor seleccionado en el primer componente <code class="docutils literal notranslate"><span class="pre">dcc.RadioItems</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dcc.RadioItems</span></code> es un <code class="docutils literal notranslate"><span class="pre">componente</span> <span class="pre">para</span> <span class="pre">mostrar</span> <span class="pre">un</span> <span class="pre">conjunto</span> <span class="pre">de</span> <span class="pre">botones</span> <span class="pre">de</span> <span class="pre">radio</span> <span class="pre">(u</span> <span class="pre">opciones)</span></code>. Los <code class="docutils literal notranslate"><span class="pre">usuarios</span> <span class="pre">pueden</span> <span class="pre">seleccionar</span> <span class="pre">una</span> <span class="pre">opción</span> <span class="pre">del</span> <span class="pre">conjunto</span></code>.</p></li>
<li><p>El segundo <code class="docutils literal notranslate"><span class="pre">callback</span></code> establece un valor inicial cuando la propiedad options cambia: lo establece al primer valor de ese array de opciones.</p></li>
<li><p>La última llamada de retorno muestra el valor seleccionado de cada componente. Si cambia el valor del componente countries <code class="docutils literal notranslate"><span class="pre">dcc.RadioItems</span></code>, <code class="docutils literal notranslate"><span class="pre">Dash</span></code> esperará hasta que se actualice el valor del componente <code class="docutils literal notranslate"><span class="pre">cities</span></code> antes de llamar al <code class="docutils literal notranslate"><span class="pre">callback</span></code> final. Esto evita que sus <code class="docutils literal notranslate"><span class="pre">callbacks</span></code> sean llamados con un estado inconsistente como con “<code class="docutils literal notranslate"><span class="pre">America</span></code>” y “<code class="docutils literal notranslate"><span class="pre">Montréal</span></code>”.</p></li>
</ul>
</section>
<section id="dash-app-con-estado">
<h2>Dash App con Estado<a class="headerlink" href="#dash-app-con-estado" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>En algunos casos, puede tener un patrón de tipo “formulario” en su aplicación. En esta situación, es posible que quieras <code class="docutils literal notranslate"><span class="pre">leer</span> <span class="pre">el</span> <span class="pre">valor</span> <span class="pre">del</span> <span class="pre">componente</span> <span class="pre">de</span> <span class="pre">entrada,</span> <span class="pre">pero</span> <span class="pre">sólo</span> <span class="pre">cuando</span> <span class="pre">el</span> <span class="pre">usuario</span> <span class="pre">haya</span> <span class="pre">terminado</span> <span class="pre">de</span> <span class="pre">introducir</span> <span class="pre">toda</span> <span class="pre">su</span> <span class="pre">información</span> <span class="pre">en</span> <span class="pre">el</span> <span class="pre">formulario</span></code>. Adjuntar una llamada de retorno a los valores de entrada directamente puede tener este aspecto:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">html</span>
<span class="kn">from</span> <span class="nn">dash.dependencies</span> <span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span>

<span class="n">external_stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;https://codepen.io/chriddyp/pen/bWLwgP.css&quot;</span><span class="p">]</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">external_stylesheets</span><span class="o">=</span><span class="n">external_stylesheets</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;input-1&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;Montréal&quot;</span><span class="p">),</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;input-2&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;Canada&quot;</span><span class="p">),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;number-output&quot;</span><span class="p">),</span>
<span class="p">])</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="s2">&quot;number-output&quot;</span><span class="p">,</span> <span class="s2">&quot;children&quot;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s2">&quot;input-1&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s2">&quot;input-2&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">update_output</span><span class="p">(</span><span class="n">input1</span><span class="p">,</span> <span class="n">input2</span><span class="p">):</span>
    <span class="k">return</span> <span class="sa">u</span><span class="s1">&#39;Input 1 is &quot;</span><span class="si">{}</span><span class="s1">&quot; and Input 2 is &quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">input1</span><span class="p">,</span> <span class="n">input2</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="dash23-fig">
<img alt="_images/dash23.png" src="_images/dash23.png" />
</figure>
<ul class="simple">
<li><p>En este ejemplo, <code class="docutils literal notranslate"><span class="pre">la</span> <span class="pre">función</span> <span class="pre">callback</span> <span class="pre">se</span> <span class="pre">dispara</span> <span class="pre">cada</span> <span class="pre">vez</span> <span class="pre">que</span> <span class="pre">cambia</span> <span class="pre">alguno</span> <span class="pre">de</span> <span class="pre">los</span> <span class="pre">atributos</span> <span class="pre">descritos</span> <span class="pre">por</span> <span class="pre">la</span> <span class="pre">entrada</span> <span class="pre">Input</span></code>. Pruébelo usted mismo introduciendo datos en las entradas anteriores. El estado le permite pasar valores adicionales sin disparar las devoluciones de llamada. Aquí está el mismo ejemplo anterior pero con el <code class="docutils literal notranslate"><span class="pre">dcc.Input</span></code> como <code class="docutils literal notranslate"><span class="pre">State</span></code> y un botón como <code class="docutils literal notranslate"><span class="pre">Input</span></code>.</p></li>
</ul>
</section>
<section id="actualizar-graficos-al-deslizar-el-cursor">
<h2>Actualizar gráficos al deslizar el cursor<a class="headerlink" href="#actualizar-graficos-al-deslizar-el-cursor" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Actualicemos nuestro ejemplo de indicadores mundiales, <code class="docutils literal notranslate"><span class="pre">actualizando</span> <span class="pre">las</span> <span class="pre">series</span> <span class="pre">de</span> <span class="pre">tiempo</span> <span class="pre">cuando</span> <span class="pre">pasamos</span> <span class="pre">por</span> <span class="pre">encima</span> <span class="pre">de</span> <span class="pre">los</span> <span class="pre">puntos</span> <span class="pre">de</span> <span class="pre">nuestro</span> <span class="pre">gráfico</span> <span class="pre">de</span> <span class="pre">dispersión</span></code>. la opción <code class="docutils literal notranslate"><span class="pre">padding</span></code> en el dash es utilizada para configurar el área de relleno en los cuatro lados de un elemento a la vez (ver <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/padding">padding</a>).</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/lihkir/Uninorte/main/AppliedStatisticMS/DataVisualizationRPython/Lectures/Python/PythonDataSets/country_indicators.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Country Name</th>
      <th>Indicator Name</th>
      <th>Year</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Arab World</td>
      <td>Agriculture, value added (% of GDP)</td>
      <td>1962</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Arab World</td>
      <td>CO2 emissions (metric tons per capita)</td>
      <td>1962</td>
      <td>0.760996</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Arab World</td>
      <td>Domestic credit provided by financial sector (...</td>
      <td>1962</td>
      <td>18.168690</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Arab World</td>
      <td>Electric power consumption (kWh per capita)</td>
      <td>1962</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Arab World</td>
      <td>Energy use (kg of oil equivalent per capita)</td>
      <td>1962</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">html</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>

<span class="n">external_stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;https://codepen.io/chriddyp/pen/bWLwgP.css&#39;</span><span class="p">]</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">external_stylesheets</span><span class="o">=</span><span class="n">external_stylesheets</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/lihkir/Uninorte/main/AppliedStatisticMS/DataVisualizationRPython/Lectures/Python/PythonDataSets/country_indicators.csv&#39;</span><span class="p">)</span>

<span class="n">available_indicators</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Indicator Name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>

        <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
            <span class="n">dcc</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;crossfilter-xaxis-column&#39;</span><span class="p">,</span>
                <span class="n">options</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">}</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">available_indicators</span><span class="p">],</span>
                <span class="n">value</span><span class="o">=</span><span class="s1">&#39;Fertility rate, total (births per woman)&#39;</span>
            <span class="p">),</span>
            <span class="n">dcc</span><span class="o">.</span><span class="n">RadioItems</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;crossfilter-xaxis-type&#39;</span><span class="p">,</span>
                <span class="n">options</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">}</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Log&#39;</span><span class="p">]],</span>
                <span class="n">value</span><span class="o">=</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span>
                <span class="n">labelStyle</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;inline-block&#39;</span><span class="p">,</span> <span class="s1">&#39;marginTop&#39;</span><span class="p">:</span> <span class="s1">&#39;5px&#39;</span><span class="p">}</span>
            <span class="p">)</span>
        <span class="p">],</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="s1">&#39;49%&#39;</span><span class="p">,</span> <span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;inline-block&#39;</span><span class="p">}),</span>

        <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
            <span class="n">dcc</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;crossfilter-yaxis-column&#39;</span><span class="p">,</span>
                <span class="n">options</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">}</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">available_indicators</span><span class="p">],</span>
                <span class="n">value</span><span class="o">=</span><span class="s1">&#39;Life expectancy at birth, total (years)&#39;</span>
            <span class="p">),</span>
            <span class="n">dcc</span><span class="o">.</span><span class="n">RadioItems</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;crossfilter-yaxis-type&#39;</span><span class="p">,</span>
                <span class="n">options</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">}</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Log&#39;</span><span class="p">]],</span>
                <span class="n">value</span><span class="o">=</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span>
                <span class="n">labelStyle</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;inline-block&#39;</span><span class="p">,</span> <span class="s1">&#39;marginTop&#39;</span><span class="p">:</span> <span class="s1">&#39;5px&#39;</span><span class="p">}</span>
            <span class="p">)</span>
        <span class="p">],</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="s1">&#39;49%&#39;</span><span class="p">,</span> <span class="s1">&#39;float&#39;</span><span class="p">:</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;inline-block&#39;</span><span class="p">})</span>
    <span class="p">],</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;padding&#39;</span><span class="p">:</span> <span class="s1">&#39;10px 5px&#39;</span>
    <span class="p">}),</span>

    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
        <span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;crossfilter-indicator-scatter&#39;</span><span class="p">,</span>
            <span class="n">hoverData</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;customdata&#39;</span><span class="p">:</span> <span class="s1">&#39;Japan&#39;</span><span class="p">}]}</span>
        <span class="p">)</span>
    <span class="p">],</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="s1">&#39;49%&#39;</span><span class="p">,</span> <span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;inline-block&#39;</span><span class="p">,</span> <span class="s1">&#39;padding&#39;</span><span class="p">:</span> <span class="s1">&#39;0 20&#39;</span><span class="p">}),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
        <span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;x-time-series&#39;</span><span class="p">),</span>
        <span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;y-time-series&#39;</span><span class="p">),</span>
    <span class="p">],</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;inline-block&#39;</span><span class="p">,</span> <span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="s1">&#39;49%&#39;</span><span class="p">}),</span>

    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="n">dcc</span><span class="o">.</span><span class="n">Slider</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;crossfilter-year--slider&#39;</span><span class="p">,</span>
        <span class="nb">min</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
        <span class="nb">max</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
        <span class="n">value</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
        <span class="n">marks</span><span class="o">=</span><span class="p">{</span><span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">):</span> <span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()},</span>
        <span class="n">step</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">),</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="s1">&#39;49%&#39;</span><span class="p">,</span> <span class="s1">&#39;padding&#39;</span><span class="p">:</span> <span class="s1">&#39;0px 20px 20px 20px&#39;</span><span class="p">})</span>
<span class="p">])</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
    <span class="n">dash</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="s1">&#39;crossfilter-indicator-scatter&#39;</span><span class="p">,</span> <span class="s1">&#39;figure&#39;</span><span class="p">),</span>
    <span class="p">[</span><span class="n">dash</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="s1">&#39;crossfilter-xaxis-column&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">),</span>
     <span class="n">dash</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="s1">&#39;crossfilter-yaxis-column&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">),</span>
     <span class="n">dash</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="s1">&#39;crossfilter-xaxis-type&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">),</span>
     <span class="n">dash</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="s1">&#39;crossfilter-yaxis-type&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">),</span>
     <span class="n">dash</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="s1">&#39;crossfilter-year--slider&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">update_graph</span><span class="p">(</span><span class="n">xaxis_column_name</span><span class="p">,</span> <span class="n">yaxis_column_name</span><span class="p">,</span>
                 <span class="n">xaxis_type</span><span class="p">,</span> <span class="n">yaxis_type</span><span class="p">,</span>
                 <span class="n">year_value</span><span class="p">):</span>
    <span class="n">dff</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">year_value</span><span class="p">]</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">dff</span><span class="p">[</span><span class="n">dff</span><span class="p">[</span><span class="s1">&#39;Indicator Name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">xaxis_column_name</span><span class="p">][</span><span class="s1">&#39;Value&#39;</span><span class="p">],</span>
            <span class="n">y</span><span class="o">=</span><span class="n">dff</span><span class="p">[</span><span class="n">dff</span><span class="p">[</span><span class="s1">&#39;Indicator Name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">yaxis_column_name</span><span class="p">][</span><span class="s1">&#39;Value&#39;</span><span class="p">],</span>
            <span class="n">hover_name</span><span class="o">=</span><span class="n">dff</span><span class="p">[</span><span class="n">dff</span><span class="p">[</span><span class="s1">&#39;Indicator Name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">yaxis_column_name</span><span class="p">][</span><span class="s1">&#39;Country Name&#39;</span><span class="p">]</span>
            <span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">update_traces</span><span class="p">(</span><span class="n">customdata</span><span class="o">=</span><span class="n">dff</span><span class="p">[</span><span class="n">dff</span><span class="p">[</span><span class="s1">&#39;Indicator Name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">yaxis_column_name</span><span class="p">][</span><span class="s1">&#39;Country Name&#39;</span><span class="p">])</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">update_xaxes</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">xaxis_column_name</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span> <span class="k">if</span> <span class="n">xaxis_type</span> <span class="o">==</span> <span class="s1">&#39;Linear&#39;</span> <span class="k">else</span> <span class="s1">&#39;log&#39;</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">update_yaxes</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">yaxis_column_name</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span> <span class="k">if</span> <span class="n">yaxis_type</span> <span class="o">==</span> <span class="s1">&#39;Linear&#39;</span> <span class="k">else</span> <span class="s1">&#39;log&#39;</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">margin</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;l&#39;</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span> <span class="n">hovermode</span><span class="o">=</span><span class="s1">&#39;closest&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span>


<span class="k">def</span> <span class="nf">create_time_series</span><span class="p">(</span><span class="n">dff</span><span class="p">,</span> <span class="n">axis_type</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">dff</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Value&#39;</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">update_traces</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;lines+markers&#39;</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">update_xaxes</span><span class="p">(</span><span class="n">showgrid</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">update_yaxes</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span> <span class="k">if</span> <span class="n">axis_type</span> <span class="o">==</span> <span class="s1">&#39;Linear&#39;</span> <span class="k">else</span> <span class="s1">&#39;log&#39;</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">add_annotation</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.85</span><span class="p">,</span> <span class="n">xanchor</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">yanchor</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span>
                       <span class="n">xref</span><span class="o">=</span><span class="s1">&#39;paper&#39;</span><span class="p">,</span> <span class="n">yref</span><span class="o">=</span><span class="s1">&#39;paper&#39;</span><span class="p">,</span> <span class="n">showarrow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span>
                       <span class="n">text</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="mi">225</span><span class="p">,</span> <span class="n">margin</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;l&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>

    <span class="k">return</span> <span class="n">fig</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
    <span class="n">dash</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="s1">&#39;x-time-series&#39;</span><span class="p">,</span> <span class="s1">&#39;figure&#39;</span><span class="p">),</span>
    <span class="p">[</span><span class="n">dash</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="s1">&#39;crossfilter-indicator-scatter&#39;</span><span class="p">,</span> <span class="s1">&#39;hoverData&#39;</span><span class="p">),</span>
     <span class="n">dash</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="s1">&#39;crossfilter-xaxis-column&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">),</span>
     <span class="n">dash</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="s1">&#39;crossfilter-xaxis-type&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">update_y_timeseries</span><span class="p">(</span><span class="n">hoverData</span><span class="p">,</span> <span class="n">xaxis_column_name</span><span class="p">,</span> <span class="n">axis_type</span><span class="p">):</span>
    <span class="n">country_name</span> <span class="o">=</span> <span class="n">hoverData</span><span class="p">[</span><span class="s1">&#39;points&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;customdata&#39;</span><span class="p">]</span>
    <span class="n">dff</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Country Name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">country_name</span><span class="p">]</span>
    <span class="n">dff</span> <span class="o">=</span> <span class="n">dff</span><span class="p">[</span><span class="n">dff</span><span class="p">[</span><span class="s1">&#39;Indicator Name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">xaxis_column_name</span><span class="p">]</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;&lt;b&gt;</span><span class="si">{}</span><span class="s1">&lt;/b&gt;&lt;br&gt;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">country_name</span><span class="p">,</span> <span class="n">xaxis_column_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">create_time_series</span><span class="p">(</span><span class="n">dff</span><span class="p">,</span> <span class="n">axis_type</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
    <span class="n">dash</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="s1">&#39;y-time-series&#39;</span><span class="p">,</span> <span class="s1">&#39;figure&#39;</span><span class="p">),</span>
    <span class="p">[</span><span class="n">dash</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="s1">&#39;crossfilter-indicator-scatter&#39;</span><span class="p">,</span> <span class="s1">&#39;hoverData&#39;</span><span class="p">),</span>
     <span class="n">dash</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="s1">&#39;crossfilter-yaxis-column&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">),</span>
     <span class="n">dash</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="s1">&#39;crossfilter-yaxis-type&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">update_x_timeseries</span><span class="p">(</span><span class="n">hoverData</span><span class="p">,</span> <span class="n">yaxis_column_name</span><span class="p">,</span> <span class="n">axis_type</span><span class="p">):</span>
    <span class="n">dff</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Country Name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">hoverData</span><span class="p">[</span><span class="s1">&#39;points&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;customdata&#39;</span><span class="p">]]</span>
    <span class="n">dff</span> <span class="o">=</span> <span class="n">dff</span><span class="p">[</span><span class="n">dff</span><span class="p">[</span><span class="s1">&#39;Indicator Name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">yaxis_column_name</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">create_time_series</span><span class="p">(</span><span class="n">dff</span><span class="p">,</span> <span class="n">axis_type</span><span class="p">,</span> <span class="n">yaxis_column_name</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Intente <code class="docutils literal notranslate"><span class="pre">pasar</span> <span class="pre">el</span> <span class="pre">mouse</span> <span class="pre">por</span> <span class="pre">encima</span> <span class="pre">de</span> <span class="pre">los</span> <span class="pre">puntos</span> <span class="pre">del</span> <span class="pre">gráfico</span> <span class="pre">de</span> <span class="pre">dispersión</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">izquierda</span></code>. ¿Observa cómo los gráficos de líneas de la derecha se actualizan en función del punto sobre el que pasa el mouse?.</p></li>
</ul>
<figure class="align-center" id="dash25-fig">
<img alt="_images/dash25.png" src="_images/dash25.png" />
</figure>
</section>
<section id="dos-ejemplos-de-dash">
<h2>Dos ejemplos de Dash<a class="headerlink" href="#dos-ejemplos-de-dash" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>En esta sección estudiaremos <code class="docutils literal notranslate"><span class="pre">dos</span> <span class="pre">ejemplos</span> <span class="pre">de</span> <span class="pre">app</span> <span class="pre">dash</span></code> para poner en practica lo estudiado en las dos primeras secciones. <code class="docutils literal notranslate"><span class="pre">El</span> <span class="pre">primero</span> <span class="pre">es</span> <span class="pre">relacionado</span> <span class="pre">con</span> <span class="pre">mapas</span> <span class="pre">y</span> <span class="pre">el</span> <span class="pre">segundo</span> <span class="pre">con</span> <span class="pre">series</span> <span class="pre">de</span> <span class="pre">tiempo</span> <span class="pre">financieras</span></code>. El objetivo principal es hacer uso de la metodología aprender por ejemplos</p></li>
</ul>
</section>
<section id="dash-app-para-mapas">
<h2>Dash App para Mapas<a class="headerlink" href="#dash-app-para-mapas" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Iniciamos cargando el <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> a utlizar en nuestra app. Los datos provienen del archivo <code class="docutils literal notranslate"><span class="pre">intro_bees.csv</span></code> que contiene información sobre <code class="docutils literal notranslate"><span class="pre">enfermedades</span> <span class="pre">que</span> <span class="pre">afectan</span> <span class="pre">a</span> <span class="pre">ciertas</span> <span class="pre">colonias</span> <span class="pre">de</span> <span class="pre">abejas,</span> <span class="pre">en</span> <span class="pre">determinados</span> <span class="pre">estados</span> <span class="pre">en</span> <span class="pre">USA</span></code>. Las columnas de interés en este ejemplo son:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;State&#39;</span><span class="p">,</span> <span class="s1">&#39;ANSI&#39;</span><span class="p">,</span> <span class="s1">&#39;Affected by&#39;</span><span class="p">,</span> <span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="s1">&#39;state_code&#39;</span><span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>El código <code class="docutils literal notranslate"><span class="pre">ANSI</span></code> es el Códigos del Instituto Nacional de Normalización: <code class="docutils literal notranslate"><span class="pre">American</span> <span class="pre">National</span> <span class="pre">Standards</span> <span class="pre">Institute</span> <span class="pre">codes</span> <span class="pre">(ANSI</span> <span class="pre">codes)</span></code></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/lihkir/Uninorte/main/AppliedStatisticMS/DataVisualizationRPython/Lectures/Python/PythonDataSets/intro_bees.csv&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Program</th>
      <th>Year</th>
      <th>Period</th>
      <th>State</th>
      <th>ANSI</th>
      <th>Affected by</th>
      <th>Pct of Colonies Impacted</th>
      <th>state_code</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>SURVEY</td>
      <td>2019</td>
      <td>JAN THRU MAR</td>
      <td>Alabama</td>
      <td>1</td>
      <td>Disease</td>
      <td>1.8</td>
      <td>AL</td>
    </tr>
    <tr>
      <th>1</th>
      <td>SURVEY</td>
      <td>2019</td>
      <td>JAN THRU MAR</td>
      <td>Alabama</td>
      <td>1</td>
      <td>Other</td>
      <td>3.1</td>
      <td>AL</td>
    </tr>
    <tr>
      <th>2</th>
      <td>SURVEY</td>
      <td>2019</td>
      <td>JAN THRU MAR</td>
      <td>Alabama</td>
      <td>1</td>
      <td>Pesticides</td>
      <td>0.3</td>
      <td>AL</td>
    </tr>
    <tr>
      <th>3</th>
      <td>SURVEY</td>
      <td>2019</td>
      <td>JAN THRU MAR</td>
      <td>Alabama</td>
      <td>1</td>
      <td>Pests_excl_Varroa</td>
      <td>22.7</td>
      <td>AL</td>
    </tr>
    <tr>
      <th>4</th>
      <td>SURVEY</td>
      <td>2019</td>
      <td>JAN THRU MAR</td>
      <td>Alabama</td>
      <td>1</td>
      <td>Unknown</td>
      <td>9.0</td>
      <td>AL</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>Luego agrupamos nuestro <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> basados en las columnas de interés y calculamos el <code class="docutils literal notranslate"><span class="pre">porcentaje</span> <span class="pre">promedio</span> <span class="pre">de</span> <span class="pre">colonias</span> <span class="pre">afectadas</span></code> para esta agrupación <code class="docutils literal notranslate"><span class="pre">'Pct</span> <span class="pre">of</span> <span class="pre">Colonies</span> <span class="pre">Impacted'</span></code></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;State&#39;</span><span class="p">,</span> <span class="s1">&#39;ANSI&#39;</span><span class="p">,</span> <span class="s1">&#39;Affected by&#39;</span><span class="p">,</span> <span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="s1">&#39;state_code&#39;</span><span class="p">])[[</span><span class="s1">&#39;Pct of Colonies Impacted&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>State</th>
      <th>ANSI</th>
      <th>Affected by</th>
      <th>Year</th>
      <th>state_code</th>
      <th>Pct of Colonies Impacted</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Alabama</td>
      <td>1</td>
      <td>Disease</td>
      <td>2015</td>
      <td>AL</td>
      <td>0.05</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Alabama</td>
      <td>1</td>
      <td>Disease</td>
      <td>2016</td>
      <td>AL</td>
      <td>1.20</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Alabama</td>
      <td>1</td>
      <td>Disease</td>
      <td>2017</td>
      <td>AL</td>
      <td>2.25</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Alabama</td>
      <td>1</td>
      <td>Disease</td>
      <td>2018</td>
      <td>AL</td>
      <td>1.30</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Alabama</td>
      <td>1</td>
      <td>Disease</td>
      <td>2019</td>
      <td>AL</td>
      <td>1.80</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>Comenzamos a implementar nuestro <code class="docutils literal notranslate"><span class="pre">app.layout</span></code> que como es sabido, esta componente corresponde al “diseño” de la aplicación y describe el aspecto de la misma. <code class="docutils literal notranslate"><span class="pre">html.H1</span></code> recuerde que es una envoltura para el elemento <code class="docutils literal notranslate"><span class="pre">&lt;h1&gt;</span> <span class="pre">de</span> <span class="pre">HTML5</span></code>, elemento de encabezado de primer nivel. Luego de esto escribimos nuestro <code class="docutils literal notranslate"><span class="pre">dcc.Dropdown</span></code> con su respectivo <code class="docutils literal notranslate"><span class="pre">id</span></code> el cual sera invocado por nuesta función <code class="docutils literal notranslate"><span class="pre">callback</span></code>. El <code class="docutils literal notranslate"><span class="pre">dcc.Dropdown</span></code> corresponde a nuestro menu de opciones, en las que colocamos por defecto <code class="docutils literal notranslate"><span class="pre">value=2015</span></code>. Luego escribimos un nuevo <code class="docutils literal notranslate"><span class="pre">html.Div</span></code> para crear un output que entregue como mensaje cual fué el años seleccionado, esta es una clase <code class="docutils literal notranslate"><span class="pre">children</span></code>, pues depende del input suministrado en el <code class="docutils literal notranslate"><span class="pre">Dropdown</span></code>. Luego agregamos el componente <code class="docutils literal notranslate"><span class="pre">dcc.Graph</span></code> se puede utilizar para renderizar cualquier visualización de datos <code class="docutils literal notranslate"><span class="pre">plotly-powered</span></code>, recibe como argumento <code class="docutils literal notranslate"><span class="pre">figure</span></code>. Nótese que se le asgina también un <code class="docutils literal notranslate"><span class="pre">id</span></code> el cual será leido por nuestro <code class="docutils literal notranslate"><span class="pre">callback</span></code></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">html</span><span class="o">.</span><span class="n">H1</span><span class="p">(</span><span class="s2">&quot;Web Application Dashboards with Dash&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;text-align&#39;</span><span class="p">:</span> <span class="s1">&#39;center&#39;</span><span class="p">}),</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;slct_year&quot;</span><span class="p">,</span>
                 <span class="n">options</span><span class="o">=</span><span class="p">[</span>
                     <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;2015&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">2015</span><span class="p">},</span>
                     <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;2016&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">2016</span><span class="p">},</span>
                     <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;2017&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">2017</span><span class="p">},</span>
                     <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;2018&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">2018</span><span class="p">}],</span>
                 <span class="n">multi</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">value</span><span class="o">=</span><span class="mi">2015</span><span class="p">,</span>
                 <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="s2">&quot;40%&quot;</span><span class="p">}</span>
                 <span class="p">),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;output_container&#39;</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="p">[]),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Br</span><span class="p">(),</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;my_bee_map&#39;</span><span class="p">,</span> <span class="n">figure</span><span class="o">=</span><span class="p">{})</span>
<span class="p">])</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Pasamos a implementar nuestra función <code class="docutils literal notranslate"><span class="pre">callback</span></code>. En nuestro <code class="docutils literal notranslate"><span class="pre">callback</span></code> nótese que tenemos dos outputs, <code class="docutils literal notranslate"><span class="pre">output_container</span></code> que es tipo <code class="docutils literal notranslate"><span class="pre">children</span></code>, recuerde que el propósito de la propiedad children es permitir a los usuarios anidar componentes, tal y como hacemos en <code class="docutils literal notranslate"><span class="pre">HTML</span></code>, en éste caso <code class="docutils literal notranslate"><span class="pre">Input()</span></code> permite a un componente father actualizar datos en el componente children. La función <code class="docutils literal notranslate"><span class="pre">update_graph</span></code> recibe una sola componente, esto es porque tenemos un sólo input, dado que los outputs son dos, uestro <code class="docutils literal notranslate"><span class="pre">callback</span></code> debe también retornar dos objetos, los cuales en este caso llamamos <code class="docutils literal notranslate"><span class="pre">container</span></code> y <code class="docutils literal notranslate"><span class="pre">fig</span></code>.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
    <span class="p">[</span><span class="n">Output</span><span class="p">(</span><span class="n">component_id</span><span class="o">=</span><span class="s1">&#39;output_container&#39;</span><span class="p">,</span> <span class="n">component_property</span><span class="o">=</span><span class="s1">&#39;children&#39;</span><span class="p">),</span>
     <span class="n">Output</span><span class="p">(</span><span class="n">component_id</span><span class="o">=</span><span class="s1">&#39;my_bee_map&#39;</span><span class="p">,</span> <span class="n">component_property</span><span class="o">=</span><span class="s1">&#39;figure&#39;</span><span class="p">)],</span>
    <span class="p">[</span><span class="n">Input</span><span class="p">(</span><span class="n">component_id</span><span class="o">=</span><span class="s1">&#39;slct_year&#39;</span><span class="p">,</span> <span class="n">component_property</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)]</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">update_graph</span><span class="p">(</span><span class="n">option_slctd</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">option_slctd</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">option_slctd</span><span class="p">))</span>

    <span class="n">container</span> <span class="o">=</span> <span class="s2">&quot;The year chosen by user was: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">option_slctd</span><span class="p">)</span>

    <span class="n">dff</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">dff</span> <span class="o">=</span> <span class="n">dff</span><span class="p">[</span><span class="n">dff</span><span class="p">[</span><span class="s2">&quot;Year&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">option_slctd</span><span class="p">]</span>
    <span class="n">dff</span> <span class="o">=</span> <span class="n">dff</span><span class="p">[</span><span class="n">dff</span><span class="p">[</span><span class="s2">&quot;Affected by&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Varroa_mites&quot;</span><span class="p">]</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">choropleth</span><span class="p">(</span>
        <span class="n">data_frame</span><span class="o">=</span><span class="n">dff</span><span class="p">,</span>
        <span class="n">locationmode</span><span class="o">=</span><span class="s1">&#39;USA-states&#39;</span><span class="p">,</span>
        <span class="n">locations</span><span class="o">=</span><span class="s1">&#39;state_code&#39;</span><span class="p">,</span>
        <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;usa&quot;</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="s1">&#39;Pct of Colonies Impacted&#39;</span><span class="p">,</span>
        <span class="n">hover_data</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;State&#39;</span><span class="p">,</span> <span class="s1">&#39;Pct of Colonies Impacted&#39;</span><span class="p">],</span>
        <span class="n">color_continuous_scale</span><span class="o">=</span><span class="n">px</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">sequential</span><span class="o">.</span><span class="n">YlOrRd</span><span class="p">,</span>
        <span class="n">labels</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Pct of Colonies Impacted&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">% o</span><span class="s1">f Bee Colonies&#39;</span><span class="p">},</span>
        <span class="n">template</span><span class="o">=</span><span class="s1">&#39;plotly_dark&#39;</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">container</span><span class="p">,</span> <span class="n">fig</span>
</pre></div>
</div>
<ul class="simple">
<li><p>La siguiente función ya estudiada anteriormente nos permite ejecutar nuestra aplicación, colocamos la opción <code class="docutils literal notranslate"><span class="pre">debug=True</span></code> para poder activar todas las opciones de debug en nuestra app</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Así vamos a visualizar nuestra plicación luego de cada uno de los paso mencionados anteriormente</p></li>
</ul>
<figure class="align-center" id="dash26-fig">
<img alt="_images/dash26.png" src="_images/dash26.png" />
</figure>
<ul class="simple">
<li><p>El codigo completo utlizado en este ejemplo es el siguiente</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objects</span> <span class="k">as</span> <span class="nn">go</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">Dash</span><span class="p">,</span> <span class="n">dcc</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/lihkir/Uninorte/main/AppliedStatisticMS/DataVisualizationRPython/Lectures/Python/PythonDataSets/intro_bees.csv&quot;</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;State&#39;</span><span class="p">,</span> <span class="s1">&#39;ANSI&#39;</span><span class="p">,</span> <span class="s1">&#39;Affected by&#39;</span><span class="p">,</span> <span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="s1">&#39;state_code&#39;</span><span class="p">])[[</span><span class="s1">&#39;Pct of Colonies Impacted&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[:</span><span class="mi">5</span><span class="p">])</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">html</span><span class="o">.</span><span class="n">H1</span><span class="p">(</span><span class="s2">&quot;Web Application Dashboards with Dash&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;text-align&#39;</span><span class="p">:</span> <span class="s1">&#39;center&#39;</span><span class="p">}),</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;slct_year&quot;</span><span class="p">,</span>
                 <span class="n">options</span><span class="o">=</span><span class="p">[</span>
                     <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;2015&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">2015</span><span class="p">},</span>
                     <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;2016&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">2016</span><span class="p">},</span>
                     <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;2017&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">2017</span><span class="p">},</span>
                     <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;2018&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">2018</span><span class="p">}],</span>
                 <span class="n">multi</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">value</span><span class="o">=</span><span class="mi">2015</span><span class="p">,</span>
                 <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="s2">&quot;40%&quot;</span><span class="p">}</span>
                 <span class="p">),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;output_container&#39;</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="p">[]),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Br</span><span class="p">(),</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;my_bee_map&#39;</span><span class="p">,</span> <span class="n">figure</span><span class="o">=</span><span class="p">{})</span>
<span class="p">])</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
    <span class="p">[</span><span class="n">Output</span><span class="p">(</span><span class="n">component_id</span><span class="o">=</span><span class="s1">&#39;output_container&#39;</span><span class="p">,</span> <span class="n">component_property</span><span class="o">=</span><span class="s1">&#39;children&#39;</span><span class="p">),</span>
     <span class="n">Output</span><span class="p">(</span><span class="n">component_id</span><span class="o">=</span><span class="s1">&#39;my_bee_map&#39;</span><span class="p">,</span> <span class="n">component_property</span><span class="o">=</span><span class="s1">&#39;figure&#39;</span><span class="p">)],</span>
    <span class="p">[</span><span class="n">Input</span><span class="p">(</span><span class="n">component_id</span><span class="o">=</span><span class="s1">&#39;slct_year&#39;</span><span class="p">,</span> <span class="n">component_property</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)]</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">update_graph</span><span class="p">(</span><span class="n">option_slctd</span><span class="p">):</span>

    <span class="n">container</span> <span class="o">=</span> <span class="s2">&quot;The year chosen by user was: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">option_slctd</span><span class="p">)</span>

    <span class="n">dff</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">dff</span> <span class="o">=</span> <span class="n">dff</span><span class="p">[</span><span class="n">dff</span><span class="p">[</span><span class="s2">&quot;Year&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">option_slctd</span><span class="p">]</span>
    <span class="n">dff</span> <span class="o">=</span> <span class="n">dff</span><span class="p">[</span><span class="n">dff</span><span class="p">[</span><span class="s2">&quot;Affected by&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Varroa_mites&quot;</span><span class="p">]</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">choropleth</span><span class="p">(</span>
        <span class="n">data_frame</span><span class="o">=</span><span class="n">dff</span><span class="p">,</span>
        <span class="n">locationmode</span><span class="o">=</span><span class="s1">&#39;USA-states&#39;</span><span class="p">,</span>
        <span class="n">locations</span><span class="o">=</span><span class="s1">&#39;state_code&#39;</span><span class="p">,</span>
        <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;usa&quot;</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="s1">&#39;Pct of Colonies Impacted&#39;</span><span class="p">,</span>
        <span class="n">hover_data</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;State&#39;</span><span class="p">,</span> <span class="s1">&#39;Pct of Colonies Impacted&#39;</span><span class="p">],</span>
        <span class="n">color_continuous_scale</span><span class="o">=</span><span class="n">px</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">sequential</span><span class="o">.</span><span class="n">YlOrRd</span><span class="p">,</span>
        <span class="n">labels</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Pct of Colonies Impacted&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">% o</span><span class="s1">f Bee Colonies&#39;</span><span class="p">},</span>
        <span class="n">template</span><span class="o">=</span><span class="s1">&#39;plotly_dark&#39;</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">container</span><span class="p">,</span> <span class="n">fig</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="dash-app-financiera">
<h2>Dash App Financiera<a class="headerlink" href="#dash-app-financiera" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>En esta aplicación <code class="docutils literal notranslate"><span class="pre">graficáremos</span> <span class="pre">el</span> <span class="pre">precio</span> <span class="pre">de</span> <span class="pre">distintos</span> <span class="pre">stocks,</span> <span class="pre">junto</span> <span class="pre">al</span> <span class="pre">indicador</span> <span class="pre">de</span> <span class="pre">análisis</span> <span class="pre">técnico,</span> <span class="pre">Bollinger</span> <span class="pre">Bands</span></code>. Este indicador considera para cualquier stock, la media del orden de preferencia, y a esta le suma y resta la desviación estándar para tener la banda. Este indicador en bastante utilizado en <code class="docutils literal notranslate"><span class="pre">análisis</span> <span class="pre">técnico</span></code>, sobre todo cuando deseamos conocer posibles sectores de compra y venta.</p></li>
</ul>
<ul class="simple">
<li><p>Para esta app utlizaremos la librería <code class="docutils literal notranslate"><span class="pre">colorlover</span></code> la cual nos permitirá obtener una escala de colores a elegir para nuestras <code class="docutils literal notranslate"><span class="pre">bollinger</span> <span class="pre">bands</span></code>. Comenzamos por cargar el <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> que contiene los datos de los stocks de interés: <code class="docutils literal notranslate"><span class="pre">AAPL,</span> <span class="pre">TSLA,</span> <span class="pre">COKE,</span> <span class="pre">YHOO,</span> <span class="pre">GOOGL</span></code>, los cuales aparecen en nuestra columna <code class="docutils literal notranslate"><span class="pre">Stock</span></code></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/lihkir/Uninorte/main/AppliedStatisticMS/DataVisualizationRPython/Lectures/Python/PythonDataSets/dash-stock-ticker-demo.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>Date</th>
      <th>Open</th>
      <th>High</th>
      <th>Low</th>
      <th>Close</th>
      <th>Volume</th>
      <th>ExDividend</th>
      <th>SplitRatio</th>
      <th>AdjOpen</th>
      <th>AdjHigh</th>
      <th>AdjLow</th>
      <th>AdjClose</th>
      <th>AdjVolume</th>
      <th>Stock</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>2017-12-29</td>
      <td>170.52</td>
      <td>170.590</td>
      <td>169.220</td>
      <td>169.23</td>
      <td>25643711.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>170.52</td>
      <td>170.590</td>
      <td>169.220</td>
      <td>169.23</td>
      <td>25643711.0</td>
      <td>AAPL</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>2017-12-28</td>
      <td>171.00</td>
      <td>171.850</td>
      <td>170.480</td>
      <td>171.08</td>
      <td>15997739.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>171.00</td>
      <td>171.850</td>
      <td>170.480</td>
      <td>171.08</td>
      <td>15997739.0</td>
      <td>AAPL</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>2017-12-27</td>
      <td>170.10</td>
      <td>170.780</td>
      <td>169.710</td>
      <td>170.60</td>
      <td>21672062.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>170.10</td>
      <td>170.780</td>
      <td>169.710</td>
      <td>170.60</td>
      <td>21672062.0</td>
      <td>AAPL</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>2017-12-26</td>
      <td>170.80</td>
      <td>171.470</td>
      <td>169.679</td>
      <td>170.57</td>
      <td>32968167.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>170.80</td>
      <td>171.470</td>
      <td>169.679</td>
      <td>170.57</td>
      <td>32968167.0</td>
      <td>AAPL</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>2017-12-22</td>
      <td>174.68</td>
      <td>175.424</td>
      <td>174.500</td>
      <td>175.01</td>
      <td>16052615.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>174.68</td>
      <td>175.424</td>
      <td>174.500</td>
      <td>175.01</td>
      <td>16052615.0</td>
      <td>AAPL</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>Luego de cargar nuestro <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> nos disponemos a implementar nuestro <code class="docutils literal notranslate"><span class="pre">app.layout</span></code> o “diseño” de la aplicación, tal como lo hicimos con la aplicación anterior. En este caso usamos <code class="docutils literal notranslate"><span class="pre">html.H2</span></code> que es una envoltura para el elemento <code class="docutils literal notranslate"><span class="pre">&lt;h2&gt;</span> <span class="pre">de</span> <span class="pre">HTML5</span></code>, elemento de encabezado de segundo nivel, en este caso también agragamos el logo de <code class="docutils literal notranslate"><span class="pre">Plotly</span></code>, usted puede agragar el logo de su preferencia.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
        <span class="n">html</span><span class="o">.</span><span class="n">H2</span><span class="p">(</span><span class="s1">&#39;Finance Explorer&#39;</span><span class="p">,</span>
                <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;inline&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;float&#39;</span><span class="p">:</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;font-size&#39;</span><span class="p">:</span> <span class="s1">&#39;2.65em&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;margin-left&#39;</span><span class="p">:</span> <span class="s1">&#39;7px&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;font-weight&#39;</span><span class="p">:</span> <span class="s1">&#39;bolder&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;font-family&#39;</span><span class="p">:</span> <span class="s1">&#39;Product Sans&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s2">&quot;rgba(117, 117, 117, 0.95)&quot;</span><span class="p">,</span>
                       <span class="s1">&#39;margin-top&#39;</span><span class="p">:</span> <span class="s1">&#39;20px&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;margin-bottom&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span>
                       <span class="p">}),</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Img</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="s2">&quot;https://s3-us-west-1.amazonaws.com/plotly-tutorials/logo/new-branding/dash-logo-by-plotly-stripe.png&quot;</span><span class="p">,</span>
                <span class="n">style</span><span class="o">=</span><span class="p">{</span>
                    <span class="s1">&#39;height&#39;</span><span class="p">:</span> <span class="s1">&#39;100px&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;float&#39;</span><span class="p">:</span> <span class="s1">&#39;right&#39;</span>
                <span class="p">},</span>
        <span class="p">),</span>
    <span class="p">])</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Luego de esto escribimos nuestro <code class="docutils literal notranslate"><span class="pre">dcc.Dropdown</span></code> con su respectivo <code class="docutils literal notranslate"><span class="pre">id</span></code> el cual sera invocado por nuesta función <code class="docutils literal notranslate"><span class="pre">callback</span></code>. El <code class="docutils literal notranslate"><span class="pre">dcc.Dropdown</span></code> corresponde a nuestro menu de opciones para los diferentes <code class="docutils literal notranslate"><span class="pre">stocks</span></code>, en las que colocamos por defecto una lista con dos stocks <code class="docutils literal notranslate"><span class="pre">['YHOO',</span> <span class="pre">'GOOGL']</span></code>. También creamo una división donde colocaremos cada una de las graficas asociadas a cada stock</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">dcc</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;stock-ticker-input&#39;</span><span class="p">,</span>
        <span class="n">options</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">])}</span>
                 <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">Stock</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="n">df</span><span class="o">.</span><span class="n">Stock</span><span class="o">.</span><span class="n">unique</span><span class="p">())],</span>
        <span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;YHOO&#39;</span><span class="p">,</span> <span class="s1">&#39;GOOGL&#39;</span><span class="p">],</span>
        <span class="n">multi</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;graphs&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Definimos la función encargada de calcular nuestro indicado de análisis tecnico. En esta definimos el periodo para nuestra media movil <code class="docutils literal notranslate"><span class="pre">window_size=10</span></code> y además de esto el numero de desviaciones estandar a las que deseamos distar de esta media <code class="docutils literal notranslate"><span class="pre">num_of_std=5</span></code></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">bbands</span><span class="p">(</span><span class="n">price</span><span class="p">,</span> <span class="n">window_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">num_of_std</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">rolling_mean</span> <span class="o">=</span> <span class="n">price</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="n">window_size</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">rolling_std</span>  <span class="o">=</span> <span class="n">price</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="n">window_size</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
    <span class="n">upper_band</span> <span class="o">=</span> <span class="n">rolling_mean</span> <span class="o">+</span> <span class="p">(</span><span class="n">rolling_std</span><span class="o">*</span><span class="n">num_of_std</span><span class="p">)</span>
    <span class="n">lower_band</span> <span class="o">=</span> <span class="n">rolling_mean</span> <span class="o">-</span> <span class="p">(</span><span class="n">rolling_std</span><span class="o">*</span><span class="n">num_of_std</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">rolling_mean</span><span class="p">,</span> <span class="n">upper_band</span><span class="p">,</span> <span class="n">lower_band</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Definimos ahora nuestra función <code class="docutils literal notranslate"><span class="pre">callback</span></code> la cual tendrá como <code class="docutils literal notranslate"><span class="pre">Output</span></code> en este caso las figuras correspondiente al indicador para cada stock. El mensaje de encabezado <code class="docutils literal notranslate"><span class="pre">&quot;Select</span> <span class="pre">a</span> <span class="pre">stock</span> <span class="pre">ticker.&quot;</span></code> aparecerá si en la caja no aparece ningún stock, indicando que debe seleccionarse el simbolo <code class="docutils literal notranslate"><span class="pre">ticker</span></code> del stock de interés. Una vez recibido este <code class="docutils literal notranslate"><span class="pre">ticker</span></code> filtramos nuestro <code class="docutils literal notranslate"><span class="pre">DataFame</span></code> por <code class="docutils literal notranslate"><span class="pre">Stock</span></code> que coincida con el <code class="docutils literal notranslate"><span class="pre">Inpunt</span> <span class="pre">ticker</span></code> y seleccionamos para este nuevo <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> las columnas que necesitamos para el indicador <code class="docutils literal notranslate"><span class="pre">bollinger</span> <span class="pre">band</span></code> y seleccionamos de la escala de colores el color a utlizar en nuestras bandas de bollinger que será el input de la función encargada de calcular las bandas <code class="docutils literal notranslate"><span class="pre">bbands</span></code>, vamos escalando los colores de acuerdo a la banda que se va a dibujar. Vamos a ir agregando a <code class="docutils literal notranslate"><span class="pre">graphs</span></code> cada una de las graficas que vamos obteniendo para mostrarlas todas en nuestra app una debajo de la otra. La figuras van indezadas con <code class="docutils literal notranslate"><span class="pre">id=ticker</span></code> y son obtenidas al realizar la adición <code class="docutils literal notranslate"><span class="pre">[candlestick]</span> <span class="pre">+</span> <span class="pre">bollinger_traces</span></code>. Los siguiente comandos son usados para las dimensiones del margen en nuestra figura y la ubcación de la leyenda: <code class="docutils literal notranslate"><span class="pre">'margin':</span> <span class="pre">{'b':</span> <span class="pre">0,</span> <span class="pre">'r':</span> <span class="pre">10,</span> <span class="pre">'l':</span> <span class="pre">60,</span> <span class="pre">'t':</span> <span class="pre">0},</span></code> y <code class="docutils literal notranslate"><span class="pre">'legend':</span> <span class="pre">{'x':</span> <span class="pre">0}</span></code>.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span><span class="n">Output</span><span class="p">(</span><span class="s1">&#39;graphs&#39;</span><span class="p">,</span><span class="s1">&#39;children&#39;</span><span class="p">),</span>
    <span class="p">[</span><span class="n">Input</span><span class="p">(</span><span class="s1">&#39;stock-ticker-input&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">update_graph</span><span class="p">(</span><span class="n">tickers</span><span class="p">):</span>
    <span class="n">graphs</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">tickers</span><span class="p">:</span>
        <span class="n">graphs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">H3</span><span class="p">(</span>
            <span class="s2">&quot;Select a stock ticker.&quot;</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;marginTop&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;marginBottom&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
        <span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ticker</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tickers</span><span class="p">):</span>

            <span class="n">dff</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Stock&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">ticker</span><span class="p">]</span>

            <span class="n">candlestick</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">dff</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">],</span>
                <span class="s1">&#39;open&#39;</span><span class="p">:</span> <span class="n">dff</span><span class="p">[</span><span class="s1">&#39;Open&#39;</span><span class="p">],</span>
                <span class="s1">&#39;high&#39;</span><span class="p">:</span> <span class="n">dff</span><span class="p">[</span><span class="s1">&#39;High&#39;</span><span class="p">],</span>
                <span class="s1">&#39;low&#39;</span><span class="p">:</span> <span class="n">dff</span><span class="p">[</span><span class="s1">&#39;Low&#39;</span><span class="p">],</span>
                <span class="s1">&#39;close&#39;</span><span class="p">:</span> <span class="n">dff</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">],</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;candlestick&#39;</span><span class="p">,</span>
                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">ticker</span><span class="p">,</span>
                <span class="s1">&#39;legendgroup&#39;</span><span class="p">:</span> <span class="n">ticker</span><span class="p">,</span>
                <span class="s1">&#39;increasing&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;line&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">colorscale</span><span class="p">[</span><span class="mi">0</span><span class="p">]}},</span>
                <span class="s1">&#39;decreasing&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;line&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">colorscale</span><span class="p">[</span><span class="mi">1</span><span class="p">]}}</span>
            <span class="p">}</span>
            <span class="n">bb_bands</span> <span class="o">=</span> <span class="n">bbands</span><span class="p">(</span><span class="n">dff</span><span class="o">.</span><span class="n">Close</span><span class="p">)</span>
            <span class="n">bollinger_traces</span> <span class="o">=</span> <span class="p">[{</span>
                <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">dff</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">],</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">y</span><span class="p">,</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;scatter&#39;</span><span class="p">,</span> <span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;lines&#39;</span><span class="p">,</span>
                <span class="s1">&#39;line&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">colorscale</span><span class="p">[(</span><span class="n">i</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">colorscale</span><span class="p">)]},</span>
                <span class="s1">&#39;hoverinfo&#39;</span><span class="p">:</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span>
                <span class="s1">&#39;legendgroup&#39;</span><span class="p">:</span> <span class="n">ticker</span><span class="p">,</span>
                <span class="s1">&#39;showlegend&#39;</span><span class="p">:</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> - bollinger bands&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ticker</span><span class="p">)</span>
            <span class="p">}</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bb_bands</span><span class="p">)]</span>
            <span class="n">graphs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">ticker</span><span class="p">,</span>
                <span class="n">figure</span><span class="o">=</span><span class="p">{</span>
                    <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">candlestick</span><span class="p">]</span> <span class="o">+</span> <span class="n">bollinger_traces</span><span class="p">,</span>
                    <span class="s1">&#39;layout&#39;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s1">&#39;margin&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;legend&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">))</span>

    <span class="k">return</span> <span class="n">graphs</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Así vamos a visualizar nuestra plicación luego de cada uno de los paso mencionados anteriormente</p></li>
</ul>
<figure class="align-center" id="dash27-fig">
<img alt="_images/dash27.png" src="_images/dash27.png" />
</figure>
<ul class="simple">
<li><p>El código completo de la app lo presentamos a continuación. Ejecútela desde su terminal o editor <code class="docutils literal notranslate"><span class="pre">VS</span> <span class="pre">Code</span></code> por ejemplo. Antes debe instalar <code class="docutils literal notranslate"><span class="pre">colorlover</span></code> por medio de</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">colorlover</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">Dash</span><span class="p">,</span> <span class="n">dcc</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span>
<span class="kn">import</span> <span class="nn">colorlover</span> <span class="k">as</span> <span class="nn">cl</span>
<span class="kn">import</span> <span class="nn">datetime</span> <span class="k">as</span> <span class="nn">dt</span>
<span class="kn">import</span> <span class="nn">flask</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">server</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">server</span>

<span class="n">app</span><span class="o">.</span><span class="n">scripts</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">serve_locally</span> <span class="o">=</span> <span class="kc">False</span>

<span class="n">colorscale</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">scales</span><span class="p">[</span><span class="s1">&#39;9&#39;</span><span class="p">][</span><span class="s1">&#39;qual&#39;</span><span class="p">][</span><span class="s1">&#39;Paired&#39;</span><span class="p">]</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/lihkir/Uninorte/main/AppliedStatisticMS/DataVisualizationRPython/Lectures/Python/PythonDataSets/dash-stock-ticker-demo.csv&#39;</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
        <span class="n">html</span><span class="o">.</span><span class="n">H2</span><span class="p">(</span><span class="s1">&#39;Finance Explorer&#39;</span><span class="p">,</span>
                <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;inline&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;float&#39;</span><span class="p">:</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;font-size&#39;</span><span class="p">:</span> <span class="s1">&#39;2.65em&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;margin-left&#39;</span><span class="p">:</span> <span class="s1">&#39;7px&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;font-weight&#39;</span><span class="p">:</span> <span class="s1">&#39;bolder&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;font-family&#39;</span><span class="p">:</span> <span class="s1">&#39;Product Sans&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s2">&quot;rgba(117, 117, 117, 0.95)&quot;</span><span class="p">,</span>
                       <span class="s1">&#39;margin-top&#39;</span><span class="p">:</span> <span class="s1">&#39;20px&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;margin-bottom&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span>
                       <span class="p">}),</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Img</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="s2">&quot;https://s3-us-west-1.amazonaws.com/plotly-tutorials/logo/new-branding/dash-logo-by-plotly-stripe.png&quot;</span><span class="p">,</span>
                <span class="n">style</span><span class="o">=</span><span class="p">{</span>
                    <span class="s1">&#39;height&#39;</span><span class="p">:</span> <span class="s1">&#39;100px&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;float&#39;</span><span class="p">:</span> <span class="s1">&#39;right&#39;</span>
                <span class="p">},</span>
        <span class="p">),</span>
    <span class="p">]),</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;stock-ticker-input&#39;</span><span class="p">,</span>
        <span class="n">options</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">])}</span>
                 <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">Stock</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="n">df</span><span class="o">.</span><span class="n">Stock</span><span class="o">.</span><span class="n">unique</span><span class="p">())],</span>
        <span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;YHOO&#39;</span><span class="p">,</span> <span class="s1">&#39;GOOGL&#39;</span><span class="p">],</span>
        <span class="n">multi</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;graphs&#39;</span><span class="p">)</span>
<span class="p">],</span> <span class="n">className</span><span class="o">=</span><span class="s2">&quot;container&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">bbands</span><span class="p">(</span><span class="n">price</span><span class="p">,</span> <span class="n">window_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">num_of_std</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">rolling_mean</span> <span class="o">=</span> <span class="n">price</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="n">window_size</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">rolling_std</span>  <span class="o">=</span> <span class="n">price</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="n">window_size</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
    <span class="n">upper_band</span> <span class="o">=</span> <span class="n">rolling_mean</span> <span class="o">+</span> <span class="p">(</span><span class="n">rolling_std</span><span class="o">*</span><span class="n">num_of_std</span><span class="p">)</span>
    <span class="n">lower_band</span> <span class="o">=</span> <span class="n">rolling_mean</span> <span class="o">-</span> <span class="p">(</span><span class="n">rolling_std</span><span class="o">*</span><span class="n">num_of_std</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">rolling_mean</span><span class="p">,</span> <span class="n">upper_band</span><span class="p">,</span> <span class="n">lower_band</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span><span class="n">Output</span><span class="p">(</span><span class="s1">&#39;graphs&#39;</span><span class="p">,</span><span class="s1">&#39;children&#39;</span><span class="p">),</span>
    <span class="p">[</span><span class="n">Input</span><span class="p">(</span><span class="s1">&#39;stock-ticker-input&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">update_graph</span><span class="p">(</span><span class="n">tickers</span><span class="p">):</span>
    <span class="n">graphs</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">tickers</span><span class="p">:</span>
        <span class="n">graphs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">H3</span><span class="p">(</span>
            <span class="s2">&quot;Select a stock ticker.&quot;</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;marginTop&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;marginBottom&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
        <span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ticker</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tickers</span><span class="p">):</span>

            <span class="n">dff</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Stock&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">ticker</span><span class="p">]</span>

            <span class="n">candlestick</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">dff</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">],</span>
                <span class="s1">&#39;open&#39;</span><span class="p">:</span> <span class="n">dff</span><span class="p">[</span><span class="s1">&#39;Open&#39;</span><span class="p">],</span>
                <span class="s1">&#39;high&#39;</span><span class="p">:</span> <span class="n">dff</span><span class="p">[</span><span class="s1">&#39;High&#39;</span><span class="p">],</span>
                <span class="s1">&#39;low&#39;</span><span class="p">:</span> <span class="n">dff</span><span class="p">[</span><span class="s1">&#39;Low&#39;</span><span class="p">],</span>
                <span class="s1">&#39;close&#39;</span><span class="p">:</span> <span class="n">dff</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">],</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;candlestick&#39;</span><span class="p">,</span>
                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">ticker</span><span class="p">,</span>
                <span class="s1">&#39;legendgroup&#39;</span><span class="p">:</span> <span class="n">ticker</span><span class="p">,</span>
                <span class="s1">&#39;increasing&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;line&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">colorscale</span><span class="p">[</span><span class="mi">0</span><span class="p">]}},</span>
                <span class="s1">&#39;decreasing&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;line&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">colorscale</span><span class="p">[</span><span class="mi">1</span><span class="p">]}}</span>
            <span class="p">}</span>
            <span class="n">bb_bands</span> <span class="o">=</span> <span class="n">bbands</span><span class="p">(</span><span class="n">dff</span><span class="o">.</span><span class="n">Close</span><span class="p">)</span>
            <span class="n">bollinger_traces</span> <span class="o">=</span> <span class="p">[{</span>
                <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">dff</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">],</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">y</span><span class="p">,</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;scatter&#39;</span><span class="p">,</span> <span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;lines&#39;</span><span class="p">,</span>
                <span class="s1">&#39;line&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">colorscale</span><span class="p">[(</span><span class="n">i</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">colorscale</span><span class="p">)]},</span>
                <span class="s1">&#39;hoverinfo&#39;</span><span class="p">:</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span>
                <span class="s1">&#39;legendgroup&#39;</span><span class="p">:</span> <span class="n">ticker</span><span class="p">,</span>
                <span class="s1">&#39;showlegend&#39;</span><span class="p">:</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> - bollinger bands&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ticker</span><span class="p">)</span>
            <span class="p">}</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bb_bands</span><span class="p">)]</span>
            <span class="n">graphs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">ticker</span><span class="p">,</span>
                <span class="n">figure</span><span class="o">=</span><span class="p">{</span>
                    <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">candlestick</span><span class="p">]</span> <span class="o">+</span> <span class="n">bollinger_traces</span><span class="p">,</span>
                    <span class="s1">&#39;layout&#39;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s1">&#39;margin&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                        <span class="s1">&#39;legend&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">))</span>

    <span class="k">return</span> <span class="n">graphs</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">Conclusión</span></code></strong></p>
<ul class="simple">
<li><p>Por medio de estas dos aplicaciones se ha abordado cada concepto básico relacionado con el diseño de una app utilizando <code class="docutils literal notranslate"><span class="pre">Dash</span></code> y <code class="docutils literal notranslate"><span class="pre">Plotly</span></code> teniendo en cuenta lo estudiado en secciones anteriores. Ahora procedemos a estudiar como podemos desplegar nuestra aplicación en <code class="docutils literal notranslate"><span class="pre">Docker</span></code>.</p></li>
</ul>
</section>
<section id="despliegue-de-dash-app-usando-docker">
<h2>Despliegue de Dash App usando Docker<a class="headerlink" href="#despliegue-de-dash-app-usando-docker" title="Permalink to this heading">#</a></h2>
<div class="admonition-introduccion admonition">
<p class="admonition-title">Introducción</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Docker</span></code> y <code class="docutils literal notranslate"><span class="pre">Dash</span></code> son herramientas útiles para <code class="docutils literal notranslate"><span class="pre">alojar</span> <span class="pre">aplicaciones</span> <span class="pre">en</span> <span class="pre">diversos</span> <span class="pre">entornos</span></code>. <code class="docutils literal notranslate"><span class="pre">Dockerizar</span></code> una imagen para <code class="docutils literal notranslate"><span class="pre">Dash</span></code> resulta conveniente para <code class="docutils literal notranslate"><span class="pre">desplegar</span> <span class="pre">tableros</span> <span class="pre">de</span> <span class="pre">control</span> <span class="pre">(dashboards</span></code>) en múltiples escenarios. En esta sección, se explica cómo <code class="docutils literal notranslate"><span class="pre">Dockerizar</span> <span class="pre">Dash</span> <span class="pre">en</span> <span class="pre">una</span> <span class="pre">imagen</span> <span class="pre">Docker</span></code>. El proceso comienza con el uso de una aplicación <code class="docutils literal notranslate"><span class="pre">Dash</span></code> probada localmente en la sección anterior. Luego, <code class="docutils literal notranslate"><span class="pre">se</span> <span class="pre">crea</span> <span class="pre">un</span> <span class="pre">Dockerfile,</span> <span class="pre">que</span> <span class="pre">contiene</span> <span class="pre">instrucciones</span> <span class="pre">para</span> <span class="pre">construir</span> <span class="pre">un</span> <span class="pre">contenedor</span> <span class="pre">Docker</span> <span class="pre">que</span> <span class="pre">hospedará</span> <span class="pre">el</span> <span class="pre">dashboard</span></code>.</p></li>
</ul>
</div>
<ul class="simple">
<li><p>Una vez que haya preparado su <code class="docutils literal notranslate"><span class="pre">Dash</span></code>, puede empezar a <code class="docutils literal notranslate"><span class="pre">Dockerizarlo</span></code> creando un archivo nombrado <strong><code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code></strong> (Dockerfile, sin ninguna extensión). El <code class="docutils literal notranslate"><span class="pre">Dockerfile</span> <span class="pre">representa</span> <span class="pre">una</span> <span class="pre">imagen</span> <span class="pre">Docker</span></code> y contiene <code class="docutils literal notranslate"><span class="pre">instrucciones</span> <span class="pre">sobre</span> <span class="pre">las</span> <span class="pre">operaciones</span> <span class="pre">a</span> <span class="pre">realizar</span> <span class="pre">cuando</span> <span class="pre">se</span> <span class="pre">construye</span> <span class="pre">un</span> <span class="pre">contenedor</span></code>.</p></li>
<li><p>A continuación presentamos el <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> usado para Dockerizar una aplicación <code class="docutils literal notranslate"><span class="pre">Dash</span></code> que reposa en el archivo <code class="docutils literal notranslate"><span class="pre">index.py</span></code>. Cada uno de los siguientes archivos listados, <code class="docutils literal notranslate"><span class="pre">deben</span> <span class="pre">estar</span> <span class="pre">contenidos</span> <span class="pre">en</span> <span class="pre">el</span> <span class="pre">mismo</span> <span class="pre">directorio</span></code>, como se ve en la siguiente imagen.</p></li>
</ul>
<figure class="align-center" id="docker-project-fig">
<img alt="_images/docker_project.png" src="_images/docker_project.png" />
</figure>
<ul class="simple">
<li><p>El objetivo es crear un directorio para nuestro <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> el cual contenga la aplicación <code class="docutils literal notranslate"><span class="pre">index.py</span></code>, un <code class="docutils literal notranslate"><span class="pre">README</span></code> y un archivo de requerimientos <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code>. En este ejemplo se ha creado una carpeta nombrada <code class="docutils literal notranslate"><span class="pre">barplot_fruits</span></code>, donde va a reposar la imagen <code class="docutils literal notranslate"><span class="pre">docker</span></code> con los archivos mencionados previamente</p></li>
</ul>
<ul class="simple">
<li><p>Dentro del archivo <code class="docutils literal notranslate"><span class="pre">.py</span></code> que usará para su aplicación debe copiar el código del <code class="docutils literal notranslate"><span class="pre">dash</span></code> que se va a <code class="docutils literal notranslate"><span class="pre">dockerizar</span></code> en este ejemplo. A continuación puede copiar el código y colocarlo en el archivo <code class="docutils literal notranslate"><span class="pre">index.py</span></code>. <code class="docutils literal notranslate"><span class="pre">Warning</span></code>: Para probar su dash <code class="docutils literal notranslate"><span class="pre">utilice</span> <span class="pre">el</span> <span class="pre">servidor</span> <span class="pre">por</span> <span class="pre">defecto</span> <span class="pre">para</span> <span class="pre">depuración</span></code></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Para <code class="docutils literal notranslate"><span class="pre">Dockerizar</span></code> su dashboard, <code class="docutils literal notranslate"><span class="pre">antes</span> <span class="pre">del</span> <span class="pre">último</span> <span class="pre">paso</span> <span class="pre">de</span> <span class="pre">esta</span> <span class="pre">sección</span></code>, debe cambiar la función que ejecuta el servidor a:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s1">&#39;0.0.0.0&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">9000</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">html</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">ext_style</span> <span class="o">=</span> <span class="s2">&quot;https://cdn.jsdelivr.net/npm/bootswatch@4.5.2/dist/darkly/bootstrap.min.css&quot;</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="n">external_stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">ext_style</span><span class="p">])</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">&quot;Fruit&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Apples&quot;</span><span class="p">,</span> <span class="s2">&quot;Oranges&quot;</span><span class="p">,</span> <span class="s2">&quot;Bananas&quot;</span><span class="p">,</span> <span class="s2">&quot;Apples&quot;</span><span class="p">,</span> <span class="s2">&quot;Oranges&quot;</span><span class="p">,</span> <span class="s2">&quot;Bananas&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Amount&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
    <span class="s2">&quot;City&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;SF&quot;</span><span class="p">,</span> <span class="s2">&quot;SF&quot;</span><span class="p">,</span> <span class="s2">&quot;SF&quot;</span><span class="p">,</span> <span class="s2">&quot;Montreal&quot;</span><span class="p">,</span> <span class="s2">&quot;Montreal&quot;</span><span class="p">,</span> <span class="s2">&quot;Montreal&quot;</span><span class="p">]</span>
<span class="p">})</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;Fruit&quot;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;Amount&quot;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;City&quot;</span><span class="p">,</span> <span class="n">barmode</span> <span class="o">=</span> <span class="s2">&quot;group&quot;</span><span class="p">,</span> <span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;plotly_dark&quot;</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span>
    <span class="n">html</span><span class="o">.</span><span class="n">H1</span><span class="p">(</span><span class="n">children</span> <span class="o">=</span> <span class="s1">&#39;Hello Dash&#39;</span><span class="p">),</span>
    
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="s1">&#39;&#39;&#39;Dash: A web application framework for your data.&#39;&#39;&#39;</span><span class="p">),</span>

    <span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;example-graph&#39;</span><span class="p">,</span>
        <span class="n">figure</span><span class="o">=</span><span class="n">fig</span>
    <span class="p">)</span>
<span class="p">])</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># &lt;- For testing purposes</span>
    <span class="c1">#app.run_server(debug=True, host=&#39;0.0.0.0&#39;, port=9000) # &lt;- To Dockerize the Dash</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Antes de <code class="docutils literal notranslate"><span class="pre">Dockerizar</span></code> su dash, es recomendable crear para este un entorno dedicado, el cual solo se use para crear la imagen <code class="docutils literal notranslate"><span class="pre">Docker</span></code> de su aplicación. Para crear el ambiente virtual de <code class="docutils literal notranslate"><span class="pre">miniconda</span></code> recuerde que puede usar el gestor de instalación de paquetes <code class="docutils literal notranslate"><span class="pre">conda</span></code>. Por ejemplo para crear el entorno virtual <code class="docutils literal notranslate"><span class="pre">dash_venv</span></code></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span>dash_venv<span class="w"> </span><span class="nv">python</span><span class="o">=</span><span class="m">3</span>.9
</pre></div>
</div>
<ul class="simple">
<li><p>Luego de haber creado el entorno virtual <code class="docutils literal notranslate"><span class="pre">dash_venv</span></code>, el siguiente paso es ejecutar la aplicación de interés, a saber <code class="docutils literal notranslate"><span class="pre">index.py</span></code> dentro del environment. Dado que el entorno se ha creado recientemente, deberá instalar cada librería necesaria. Por ejemplo, <code class="docutils literal notranslate"><span class="pre">dash,</span> <span class="pre">plotly,</span> <span class="pre">pandas</span></code>,….. Para verificar que la aplicación funciona correctamente, desde la consola de <code class="docutils literal notranslate"><span class="pre">miniconda</span></code> <code class="docutils literal notranslate"><span class="pre">ubicado</span> <span class="pre">siempre</span> <span class="pre">en</span> <span class="pre">el</span> <span class="pre">directorio</span> <span class="pre">barplot_fruits</span> <span class="pre">donde</span> <span class="pre">se</span> <span class="pre">encuentre</span> <span class="pre">el</span> <span class="pre">archivo</span> <span class="pre">index.py</span></code> debe ejecutar:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>index.py
</pre></div>
</div>
<ul class="simple">
<li><p>Al ejecutar la línea anterior surgirán errores asociados con requerimientos de instalación tales como: <code class="docutils literal notranslate"><span class="pre">dash,</span> <span class="pre">plotly,</span> <span class="pre">pandas</span></code>, etc,. Realice la instalación de cada uno de estos. Luego de finalizada la instalación, <code class="docutils literal notranslate"><span class="pre">verifique</span> <span class="pre">que</span> <span class="pre">efectivamente</span> <span class="pre">la</span> <span class="pre">aplicación</span> <span class="pre">está</span> <span class="pre">funcionando</span> <span class="pre">correctamente</span></code>.</p></li>
</ul>
<ul class="simple">
<li><p>El siguiente paso es crear nuestro archivo de requerimientos <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code>. Para esto debe primero que todo <code class="docutils literal notranslate"><span class="pre">ubicarse</span> <span class="pre">dentro</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">carpeta</span> <span class="pre">barplot_fruit</span> <span class="pre">desde</span> <span class="pre">miniconda</span></code>. En esta carpeta reposa su aplicación, el archivo <code class="docutils literal notranslate"><span class="pre">index.py</span></code> y además, todos los archivo para su imagen <code class="docutils literal notranslate"><span class="pre">Docker</span></code>. Para crear el archivo de requerimientos, dentro de esta carpeta debe ejecutar</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>freeze<span class="w"> </span>&gt;<span class="w"> </span>requirements.txt
</pre></div>
</div>
<ul class="simple">
<li><p>En ocasiones el paso anterior genera conflictos, creando algunas líneas extrañas dentro del archivo <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> del tipo <code class="docutils literal notranslate"><span class="pre">&#64;</span> <span class="pre">file:///opt/...</span></code>. Si este es su caso, puede solucionar este problema de la siguiente forma. Primero que todo, elimine el archivo de requerimientos actual, esto es, el archivo <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code>. Una vez eliminado, debe generarlo nuevamente usando</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>list<span class="w"> </span>--format<span class="o">=</span>freeze<span class="w"> </span>&gt;<span class="w"> </span>requirements.txt
</pre></div>
</div>
<ul class="simple">
<li><p>El siguiente paso es crear nuestro archivo <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> que va a generar nuestra imagen <code class="docutils literal notranslate"><span class="pre">Docker</span></code>. Para esto, debe crear un archivo nombrado <em><code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code></em> sin ninguna extensión, dentro de la carpeta de su proyecto <code class="docutils literal notranslate"><span class="pre">barplot_fruit</span></code>. Puede crearlo usando <code class="docutils literal notranslate"><span class="pre">VS</span> <span class="pre">Code</span></code> directamente. Dentro de este archivo debe colocar lo siguiente. Al final se realiza una explicación del contenido de este archivo</p></li>
</ul>
<div class="highlight-dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">FROM</span><span class="w"> </span><span class="s">python:3.9.17</span>

<span class="k">COPY</span><span class="w"> </span>./requirements.txt<span class="w"> </span>/requirements.txt

<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--upgrade<span class="w"> </span>pip
<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--no-cache-dir<span class="w"> </span>--upgrade<span class="w"> </span>-r<span class="w"> </span>/requirements.txt

<span class="k">COPY</span><span class="w"> </span>./index.py<span class="w"> </span>/index.py

<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;index.py&quot;</span><span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Verifique en el <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code>, la versión de <code class="docutils literal notranslate"><span class="pre">Python</span></code> que aparece en la primera línea, coincide con la versión de <code class="docutils literal notranslate"><span class="pre">Python</span></code> que tiene instalada en el entorno virtual creado para este proyecto. Verifique también que el nombre de la aplicación <code class="docutils literal notranslate"><span class="pre">dash</span></code>, que aparece en las dos últimas líneas, coincide con el de su archivo <code class="docutils literal notranslate"><span class="pre">.py</span></code> dentro del directorio de su proyecto.</p></li>
</ul>
<ul class="simple">
<li><p>El siguiente proceso consiste en crear un archivo <code class="docutils literal notranslate"><span class="pre">README</span></code> el cual contiene <code class="docutils literal notranslate"><span class="pre">instrucciones</span> <span class="pre">para</span> <span class="pre">ejecutar</span> <span class="pre">el</span> <span class="pre">contenedor</span> <span class="pre">con</span> <span class="pre">el</span> <span class="pre">dashboard</span></code>. El siguiente es un ejemplo de <code class="docutils literal notranslate"><span class="pre">README</span></code></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># Execute the following commands to Dockerize the Dash application</span>

docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>barplot_fruits<span class="w"> </span>.
docker<span class="w"> </span>run<span class="w"> </span>-h<span class="w"> </span>localhost<span class="w"> </span>-p<span class="w"> </span><span class="m">9002</span>:9000<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>barplot_fruits<span class="w"> </span>barplot_fruits
</pre></div>
</div>
<ul class="simple">
<li><p>El último paso para crear la imagen <code class="docutils literal notranslate"><span class="pre">Docker</span></code> es el siguiente. <code class="docutils literal notranslate"><span class="pre">Primero</span> <span class="pre">que</span> <span class="pre">todo,</span> <span class="pre">debe</span> <span class="pre">iniciar</span> <span class="pre">la</span> <span class="pre">aplicación</span> <span class="pre">Docker</span></code>. Posteriormente, dentro de la carpeta de su proyecto y desde <code class="docutils literal notranslate"><span class="pre">miniconda</span></code>, debe ejecutar el par de líneas indicadas en el archivo <code class="docutils literal notranslate"><span class="pre">README</span></code></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>barplot_fruits<span class="w"> </span>.
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-h<span class="w"> </span>localhost<span class="w"> </span>-p<span class="w"> </span><span class="m">9002</span>:9000<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>barplot_fruits<span class="w"> </span>barplot_fruits
</pre></div>
</div>
<ul class="simple">
<li><p>Si ningún error ocurrió hasta este momento, usted podrá visualizar dentro de su aplicación Docker, la imagen y y el contenedor asociado a su dashboard, en este caso con el nombre: <code class="docutils literal notranslate"><span class="pre">barplot_fruits</span></code>. Además, podrá ejecutarla haciendo click en los puertos expuestos para su <code class="docutils literal notranslate"><span class="pre">dash</span></code>, en este caso: <code class="docutils literal notranslate"><span class="pre">9002:9000</span></code>.</p></li>
</ul>
<figure class="align-center">
<img alt="_images/docker_dashapp.png" src="_images/docker_dashapp.png" />
</figure>
<ul>
<li><p>En <strong><code class="docutils literal notranslate"><span class="pre">conclusión</span></code></strong>, en un <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> para Dockerizar una aplicación Dash, se debe agregar lo siguiente:</p>
<ul>
<li><p>Declarar la imagen base <code class="docutils literal notranslate"><span class="pre">Python</span></code>: <code class="docutils literal notranslate"><span class="pre">python:3.9.17</span></code> (o la que corresponda)</p></li>
<li><p>Instalar todas las <code class="docutils literal notranslate"><span class="pre">dependencias</span> <span class="pre">necesarias</span></code>, incluyendo las dependencias tanto para <code class="docutils literal notranslate"><span class="pre">Plotly</span></code> como para <code class="docutils literal notranslate"><span class="pre">Dash</span></code></p></li>
<li><p>Ejecutar antes el <code class="docutils literal notranslate"><span class="pre">dashboard</span></code> que ha construido en un <code class="docutils literal notranslate"><span class="pre">environment</span> <span class="pre">separado</span></code>. Dentro de este environment, contruya el archivo de requerimientos mediante:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>freeze<span class="w"> </span>&gt;<span class="w"> </span>requirements.txt
</pre></div>
</div>
</li>
<li><p>Una vez preparado el <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code>, puedes construir el contenedor y ejecutarlo usando las instrucciones del archivo <code class="docutils literal notranslate"><span class="pre">README</span></code>. Recuerde que <code class="docutils literal notranslate"><span class="pre">debe</span> <span class="pre">tener</span> <span class="pre">iniciada</span> <span class="pre">la</span> <span class="pre">aplicación</span> <span class="pre">Docker</span></code></p></li>
</ul>
</li>
</ul>
<ul class="simple">
<li><p>El código del archivo <code class="docutils literal notranslate"><span class="pre">README</span></code> realiza lo siguiente:</p>
<ul>
<li><p>La primera línea construye un contenedor <code class="docutils literal notranslate"><span class="pre">Docker</span></code> basado en el <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> y lo nombra <code class="docutils literal notranslate"><span class="pre">barplot_fruits</span></code>. Debe <code class="docutils literal notranslate"><span class="pre">asegúrate</span> <span class="pre">de</span> <span class="pre">incluir</span> <span class="pre">&quot;.&quot;</span> <span class="pre">al</span> <span class="pre">final</span> <span class="pre">para</span> <span class="pre">indicar</span> <span class="pre">el</span> <span class="pre">directorio</span> <span class="pre">del</span> <span class="pre">archivo</span> <span class="pre">Docker</span></code>.</p></li>
<li><p>Una vez construido el contenedor <code class="docutils literal notranslate"><span class="pre">Docker</span></code>, la segunda línea ejecuta la orden para <code class="docutils literal notranslate"><span class="pre">exponer</span> <span class="pre">la</span> <span class="pre">aplicación</span> <span class="pre">Dash</span> <span class="pre">en</span> <span class="pre">localhost:9002</span></code>. <code class="docutils literal notranslate"><span class="pre">9002:9000</span> <span class="pre">significa</span> <span class="pre">mapear</span> <span class="pre">el</span> <span class="pre">puerto</span> <span class="pre">9000</span> <span class="pre">en</span> <span class="pre">el</span> <span class="pre">contenedor</span> <span class="pre">al</span> <span class="pre">puerto</span> <span class="pre">9002</span> <span class="pre">en</span> <span class="pre">tu</span> <span class="pre">entorno</span> <span class="pre">local</span></code>.</p></li>
<li><p>La razón para mapear el puerto 9000 del contenedor es porque <code class="docutils literal notranslate"><span class="pre">se</span> <span class="pre">declaró</span> <span class="pre">la</span> <span class="pre">aplicación</span> <span class="pre">Dash</span> <span class="pre">en</span> <span class="pre">el</span> <span class="pre">Puerto</span> <span class="pre">9000</span> <span class="pre">en</span> <span class="pre">el</span> <span class="pre">script</span> <span class="pre">Python</span></code>.</p></li>
<li><p>Para <code class="docutils literal notranslate"><span class="pre">exponer</span> <span class="pre">la</span> <span class="pre">aplicación</span> <span class="pre">Dash</span></code>, debe <code class="docutils literal notranslate"><span class="pre">establecer</span> <span class="pre">el</span> <span class="pre">host</span> <span class="pre">=</span> <span class="pre">'0.0.0.0'</span> <span class="pre">en</span> <span class="pre">el</span> <span class="pre">entorno</span> <span class="pre">del</span> <span class="pre">contenedor</span></code>! No funcionará si lo pones en <code class="docutils literal notranslate"><span class="pre">127.0.0.1</span></code>.</p></li>
</ul>
</li>
</ul>
</section>
<section id="lista-de-dockerfiles">
<h2>Lista de Dockerfiles<a class="headerlink" href="#lista-de-dockerfiles" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code></p>
<div class="highlight-dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">FROM</span><span class="w"> </span><span class="s">python:3.9.17</span>

<span class="k">COPY</span><span class="w"> </span>./requirements.txt<span class="w"> </span>/requirements.txt

<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--upgrade<span class="w"> </span>pip
<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--no-cache-dir<span class="w"> </span>--upgrade<span class="w"> </span>-r<span class="w"> </span>/requirements.txt

<span class="k">COPY</span><span class="w"> </span>./index.py<span class="w"> </span>/index.py

<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;index.py&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">index.py</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">html</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">ext_style</span> <span class="o">=</span> <span class="s2">&quot;https://cdn.jsdelivr.net/npm/bootswatch@4.5.2/dist/darkly/bootstrap.min.css&quot;</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="n">external_stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">ext_style</span><span class="p">])</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">&quot;Fruit&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Apples&quot;</span><span class="p">,</span> <span class="s2">&quot;Oranges&quot;</span><span class="p">,</span> <span class="s2">&quot;Bananas&quot;</span><span class="p">,</span> <span class="s2">&quot;Apples&quot;</span><span class="p">,</span> <span class="s2">&quot;Oranges&quot;</span><span class="p">,</span> <span class="s2">&quot;Bananas&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Amount&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
    <span class="s2">&quot;City&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;SF&quot;</span><span class="p">,</span> <span class="s2">&quot;SF&quot;</span><span class="p">,</span> <span class="s2">&quot;SF&quot;</span><span class="p">,</span> <span class="s2">&quot;Montreal&quot;</span><span class="p">,</span> <span class="s2">&quot;Montreal&quot;</span><span class="p">,</span> <span class="s2">&quot;Montreal&quot;</span><span class="p">]</span>
<span class="p">})</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;Fruit&quot;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;Amount&quot;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;City&quot;</span><span class="p">,</span> <span class="n">barmode</span> <span class="o">=</span> <span class="s2">&quot;group&quot;</span><span class="p">,</span> <span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;plotly_dark&quot;</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span>
    <span class="n">html</span><span class="o">.</span><span class="n">H1</span><span class="p">(</span><span class="n">children</span> <span class="o">=</span> <span class="s1">&#39;Hello Dash&#39;</span><span class="p">),</span>
    
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="s1">&#39;&#39;&#39;Dash: A web application framework for your data.&#39;&#39;&#39;</span><span class="p">),</span>

    <span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;example-graph&#39;</span><span class="p">,</span>
        <span class="n">figure</span><span class="o">=</span><span class="n">fig</span>
    <span class="p">)</span>
<span class="p">])</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s1">&#39;0.0.0.0&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">9000</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">ansi2html</span><span class="o">==</span><span class="m">1</span>.8.0
<span class="nv">certifi</span><span class="o">==</span><span class="m">2023</span>.7.22
charset-normalizer<span class="o">==</span><span class="m">3</span>.3.0
<span class="nv">click</span><span class="o">==</span><span class="m">8</span>.1.7
<span class="nv">colorama</span><span class="o">==</span><span class="m">0</span>.4.6
<span class="nv">dash</span><span class="o">==</span><span class="m">2</span>.14.0
dash-core-components<span class="o">==</span><span class="m">2</span>.0.0
dash-html-components<span class="o">==</span><span class="m">2</span>.0.0
dash-table<span class="o">==</span><span class="m">5</span>.0.0
<span class="nv">Flask</span><span class="o">==</span><span class="m">2</span>.2.5
<span class="nv">idna</span><span class="o">==</span><span class="m">3</span>.4
importlib-metadata<span class="o">==</span><span class="m">6</span>.8.0
<span class="nv">itsdangerous</span><span class="o">==</span><span class="m">2</span>.1.2
<span class="nv">Jinja2</span><span class="o">==</span><span class="m">3</span>.1.2
<span class="nv">MarkupSafe</span><span class="o">==</span><span class="m">2</span>.1.3
nest-asyncio<span class="o">==</span><span class="m">1</span>.5.8
<span class="nv">numpy</span><span class="o">==</span><span class="m">1</span>.26.1
<span class="nv">packaging</span><span class="o">==</span><span class="m">23</span>.2
<span class="nv">pandas</span><span class="o">==</span><span class="m">2</span>.1.1
<span class="nv">plotly</span><span class="o">==</span><span class="m">5</span>.17.0
python-dateutil<span class="o">==</span><span class="m">2</span>.8.2
<span class="nv">pytz</span><span class="o">==</span><span class="m">2023</span>.3.post1
<span class="nv">requests</span><span class="o">==</span><span class="m">2</span>.31.0
<span class="nv">retrying</span><span class="o">==</span><span class="m">1</span>.3.4
<span class="nv">six</span><span class="o">==</span><span class="m">1</span>.16.0
<span class="nv">tenacity</span><span class="o">==</span><span class="m">8</span>.2.3
<span class="nv">typing_extensions</span><span class="o">==</span><span class="m">4</span>.8.0
<span class="nv">tzdata</span><span class="o">==</span><span class="m">2023</span>.3
<span class="nv">urllib3</span><span class="o">==</span><span class="m">2</span>.0.7
<span class="nv">Werkzeug</span><span class="o">==</span><span class="m">2</span>.2.3
<span class="nv">zipp</span><span class="o">==</span><span class="m">3</span>.17.0
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">README</span></code></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># Execute the following commands to Dockerize the Dash application</span>

docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>barplot_fruits<span class="w"> </span>.
docker<span class="w"> </span>run<span class="w"> </span>-h<span class="w"> </span>localhost<span class="w"> </span>-p<span class="w"> </span><span class="m">9002</span>:9000<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>barplot_fruits<span class="w"> </span>barplot_fruits
</pre></div>
</div>
<div class="admonition-observacion admonition">
<p class="admonition-title">Observación</p>
<p><code class="docutils literal notranslate"><span class="pre">Dockerizar</span> <span class="pre">un</span> <span class="pre">tablero</span> <span class="pre">Dash</span> <span class="pre">es</span> <span class="pre">muy</span> <span class="pre">fácil</span></code>, sólo tienes que <code class="docutils literal notranslate"><span class="pre">añadir</span> <span class="pre">un</span> <span class="pre">Dockerfile</span> <span class="pre">con</span> <span class="pre">un</span> <span class="pre">par</span> <span class="pre">de</span> <span class="pre">líneas</span> <span class="pre">de</span> <span class="pre">instrucciones,</span> <span class="pre">construir</span> <span class="pre">un</span> <span class="pre">contenedor</span> <span class="pre">con</span> <span class="pre">él,</span> <span class="pre">¡y</span> <span class="pre">ejecutarlo!</span></code></p>
</div>
<ul class="simple">
<li><p>A continuación se muestran <code class="docutils literal notranslate"><span class="pre">outputs</span> <span class="pre">en</span> <span class="pre">consola</span></code> al ejecutar el <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code>, para crear la imagen <code class="docutils literal notranslate"><span class="pre">Docker</span></code></p></li>
</ul>
<figure class="align-center" id="docker-build-fig">
<img alt="_images/docker_build.png" src="_images/docker_build.png" />
</figure>
<figure class="align-center" id="docker-run-fig">
<img alt="_images/docker_run.png" src="_images/docker_run.png" />
</figure>
<figure class="align-center">
<img alt="_images/docker_dashapp.png" src="_images/docker_dashapp.png" />
</figure>
<ul class="simple">
<li><p>Si desea desplegar la aplicación, debe dirigirse a la aplicación <code class="docutils literal notranslate"><span class="pre">Docker</span></code>. Dentro de esta debe buscar la imagen creada en el botón <code class="docutils literal notranslate"><span class="pre">Images</span></code>. Posteriormente, en contenedores, podrá visualizar el contenedor creado, a saber (<code class="docutils literal notranslate"><span class="pre">barplot_fruits</span></code>), y a la derecha los puertos donde se ejecuta el dash en el <code class="docutils literal notranslate"><span class="pre">daemon</span></code>. Haga click sobre este puerto para visualizar su <code class="docutils literal notranslate"><span class="pre">dashboard</span></code></p></li>
</ul>
<figure class="align-center" id="barplot-fruits-dockerized-fig">
<img alt="_images/barplot_fruits_dockerized.png" src="_images/barplot_fruits_dockerized.png" />
</figure>
</section>
<section id="ejercicio-para-entregar">
<h2>Ejercicio para entregar<a class="headerlink" href="#ejercicio-para-entregar" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Dockerizar</span></code> los dashboard de los dos ejemplos estudiados en la sección <strong><code class="docutils literal notranslate"><span class="pre">Dos</span> <span class="pre">ejemplos</span> <span class="pre">de</span> <span class="pre">Dash</span></code></strong>. Esto es, crear dos imágenes <code class="docutils literal notranslate"><span class="pre">Docker</span></code> para los <code class="docutils literal notranslate"><span class="pre">Dash</span></code> asociados con: <code class="docutils literal notranslate"><span class="pre">Dash</span> <span class="pre">App</span> <span class="pre">para</span> <span class="pre">Mapas</span></code> y <code class="docutils literal notranslate"><span class="pre">Dash</span> <span class="pre">App</span> <span class="pre">Financiera</span></code>.</p></li>
<li><p>Posteriormente, realice cambios en el (<code class="docutils literal notranslate"><span class="pre">back/front</span> <span class="pre">end</span></code>) de los dos <code class="docutils literal notranslate"><span class="pre">Dashboards</span></code> teniendo en cuenta los diferentes templates usados en esta sección. Por ejemplo,</p>
<ul>
<li><p>Agregue a los dashboard <code class="docutils literal notranslate"><span class="pre">nuevos</span> <span class="pre">estilos</span></code>: Cambiar título, logo, color de fondo,….</p></li>
<li><p>Agregue además de la ventana de selección de stocks, un nuevo <code class="docutils literal notranslate"><span class="pre">Dropdown</span></code>, el cual le permita por medio de un menú de opciones, <code class="docutils literal notranslate"><span class="pre">seleccionar</span> <span class="pre">entre</span> <span class="pre">4</span> <span class="pre">indicadores</span> <span class="pre">de</span> <span class="pre">análisis</span> <span class="pre">técnico</span></code> (ver  <a class="reference external" href="https://www.investopedia.com/top-7-technical-analysis-tools-4773275">7 Technical Indicators to Build a Trading Toolkit</a>, <a class="reference external" href="https://youtu.be/fFmcONKy3bA?feature=shared">Top 5 Technical Analysis Indicators | Moving Average, RSI, Bollinger Bands, MACD</a>), por ejemplo:</p>
<ul>
<li><p>On-balance volume (OBV)</p></li>
<li><p>Accumulation/distribution (A/D) line</p></li>
<li><p>Average directional index</p></li>
<li><p>Aroon oscillator</p></li>
<li><p>Moving average convergence divergence (MACD)</p></li>
<li><p>Relative strength index (RSI)</p></li>
<li><p>Stochastic oscillator</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Asegúrese de que <code class="docutils literal notranslate"><span class="pre">todos</span> <span class="pre">los</span> <span class="pre">indicadores</span> <span class="pre">seleccionados</span> <span class="pre">aparezcan</span> <span class="pre">en</span> <span class="pre">el</span> <span class="pre">mismo</span> <span class="pre">candlestick</span></code>, esto es fundamental para la toma de decisiones. Por ejemplo, en un solo chart, el objetivo es que el inversionista pueda obtener un mínimo de 4 confirmaciones, por medio del análisis visual de cada uno de los indicadores suministrados por el Dashboard, antes de tomar una decisión de compra o venta (<code class="docutils literal notranslate"><span class="pre">long/short</span></code>). Por lo tanto, <code class="docutils literal notranslate"><span class="pre">debe</span> <span class="pre">visualizar</span> <span class="pre">todos</span> <span class="pre">los</span> <span class="pre">4</span> <span class="pre">indicadores</span> <span class="pre">en</span> <span class="pre">un</span> <span class="pre">solo</span> <span class="pre">plot</span></code>.</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="postgresql.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Introducción a PostreSQL y Docker</p>
      </div>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduccion">Introducción</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuracion-de-su-entorno">Configuración de su entorno</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#usando-python-no-miniconda">Usando Python. No Miniconda</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instalacion-de-librerias">Instalación de Librerías</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#diseno-de-dash">Diseño de Dash</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mas-informacion-sobre-los-componentes-html">Más información sobre los componentes HTML</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#componentes-reutilizables">Componentes reutilizables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mas-informacion-sobre-la-visualizacion">Más información sobre la visualización</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#markdown">Markdown</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#componentes-principales">Componentes principales</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#callbacks-basicos-dash">Callbacks básicos Dash</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dash-app-layout-con-figura-y-sliderm">Dash App Layout con Figura y Sliderm</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aplicacion-dash-con-multiples-entradas">Aplicación Dash con múltiples entradas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aplicacion-dash-con-multiples-salidas">Aplicación Dash con múltiples salidas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dash-app-con-callbacks-encadenados">Dash App con callbacks encadenados</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dash-app-con-estado">Dash App con Estado</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#actualizar-graficos-al-deslizar-el-cursor">Actualizar gráficos al deslizar el cursor</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dos-ejemplos-de-dash">Dos ejemplos de Dash</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dash-app-para-mapas">Dash App para Mapas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dash-app-financiera">Dash App Financiera</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#despliegue-de-dash-app-usando-docker">Despliegue de Dash App usando Docker</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lista-de-dockerfiles">Lista de Dockerfiles</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejercicio-para-entregar">Ejercicio para entregar</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Lihki Rubio PhD in Mathematical Engineering
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright Department of Mathematics and Statistics.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>